const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/infoView-BuGGgj3R.js","assets/naive-Do5BZsDj.js","assets/vue-DCSIo9-U.js","assets/graph-Bu-8RUKy.js","assets/vueuse-C6iXi53z.js","assets/graphView-BT0jankO.js","assets/markdown-uiieBH_X.js","assets/xterm-DfcmCpbH.js","assets/utils-BDSE_uUf.js","assets/graphView-DiVAS00M.css"])))=>i.map(i=>d[i]);
import{a8 as Pe,a9 as Be,aa as ze,d as k,ab as be,c as C,o as N,g as ce,i as S,n as O,B as Ve,x as Re,y as V,G as T,r as L,L as Q,a as P,b as F,q as re,z as ne,$ as w,C as we,ac as De,ad as B,W as Fe,h as He,k as A,f as E,l as qe,ae as Ie}from"./vue-DCSIo9-U.js";import{u as Je,a as q,b as pe,c as Ue}from"./vueuse-C6iXi53z.js";import{Y as Ke}from"./graph-Bu-8RUKy.js";import{N as Ge,d as We,l as Ye,a as Xe,b as Ze,c as Qe,e as et,f as ee,g as tt,h as nt,i as ot,j as rt,k as at}from"./naive-Do5BZsDj.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();const st="modulepreload",it=function(e){return"/labctl/"+e},de={},fe=function(t,n,s){let i=Promise.resolve();if(n&&n.length>0){let u=function(l){return Promise.all(l.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),o=r?.nonce||r?.getAttribute("nonce");i=u(n.map(l=>{if(l=it(l),l in de)return;de[l]=!0;const p=l.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${g}`))return;const h=document.createElement("link");if(h.rel=p?"stylesheet":st,p||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),p)return new Promise((x,v)=>{h.addEventListener("load",x),h.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(r){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r}return i.then(r=>{for(const o of r||[])o.status==="rejected"&&a(o.reason);return t().catch(a)})};var lt={};function ut(e){const t=Pe({history:Be(lt.BASE_URL),routes:[{path:"/info",name:"info",component:()=>fe(()=>import("./infoView-BuGGgj3R.js"),__vite__mapDeps([0,1,2,3,4]))},{path:"/",name:"graph",component:()=>fe(()=>import("./graphView-BT0jankO.js"),__vite__mapDeps([5,2,1,3,6,4,7,8,9])),alias:["/:all(.*)*"]}]});e.use(t)}var ct=e=>({options:t,store:n})=>{const{debounce:s}=t;if(s)return Object.keys(s).reduce((i,a)=>{const r=[n[a]].concat(s[a]);return i[a]=e.apply(null,r),i},{})};function pt(e){const t=ze();t.use(ct(Je)),e.use(t)}function dt(e){e.use(Ke)}const ft=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~\/])+$/,me=k({name:"JsonString",props:{jsonValue:{type:String,required:!0}},setup(e){const t=L(!0),n=L(!1),s=L(null),i=L(null);re(()=>{s.value&&i.value&&s.value.offsetHeight>i.value.offsetHeight&&(n.value=!0)});const a=()=>{t.value=!t.value};return()=>{const r=e.jsonValue,o=ft.test(r);let u;!t.value&&n.value?u=w("span",{class:{"jv-ellipsis":!0},onClick:a},"..."):o?u=w("span",{class:{"jv-item":!0,"jv-string":!0},ref:s},[w("span",null,'"'),w("a",{href:r,target:"_blank",class:"jv-link"},r),w("span",null,'"')]):u=w("span",{class:{"jv-item":!0,"jv-string":!0},ref:s},`"${r}"`);const l=[];return n.value&&l.push(w("span",{class:{"jv-toggle":!0,open:t.value},onClick:a})),l.push(w("span",{class:{"jv-holder-node":!0},ref:i})),l.push(u),w("span",{},l)}}}),mt={class:O(["jv-item","jv-undefined"])},vt=k({__name:"json-undefined",props:{jsonValue:{type:null,default:void 0}},setup(e){const t=e,n=P(()=>t.jsonValue===null?"null":"undefined");return(s,i)=>(N(),C("span",mt,V(n.value),1))}}),ht=k({__name:"json-number",props:{jsonValue:{type:Number,required:!0}},setup(e){const t=e,n=P(()=>Number.isInteger(t.jsonValue));return(s,i)=>(N(),C("span",{class:O(["jv-item","jv-number",n.value?"jv-number-integer":"jv-number-float"])},V(e.jsonValue.toString()),3))}}),yt={class:O(["jv-item","jv-boolean"])},gt=k({__name:"json-boolean",props:{jsonValue:{type:Boolean,required:!0}},setup(e){return(t,n)=>(N(),C("span",yt,V(e.jsonValue.toString()),1))}}),bt=k({name:"JsonObject",props:{jsonValue:{type:Object,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},expand:Boolean,sort:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const n=L({});let s=null;const i=u=>{setTimeout(()=>{n.value=u},0)};F(()=>e.jsonValue,u=>{i(u)},{immediate:!0,deep:!0});const a=P(()=>{if(!e.sort)return n.value;const u=Object.keys(n.value).sort(),l={};return u.forEach(p=>{l[p]=n.value[p]}),l}),r=()=>{if(s)try{s.dispatchEvent(new Event("resized"))}catch{const u=document.createEvent("Event");u.initEvent("resized",!0,!1),s.dispatchEvent(u)}},o=()=>{t("update:expand",!e.expand),r()};return()=>{const u=[];if(u.push(w("span",{class:["jv-item","jv-object"]},"{")),e.expand){for(const l in a.value)if(a.value.hasOwnProperty(l)){const p=a.value[l];u.push(w(ae,{key:l,sort:e.sort,keyName:l,depth:e.depth+1,value:p,previewMode:e.previewMode}))}}return!e.expand&&Object.keys(n.value).length>0&&u.push(w("span",{class:"jv-ellipsis",onClick:o,title:`click to reveal object content (keys: ${Object.keys(a.value).join(", ")})`},"...")),u.push(w("span",{class:["jv-item","jv-object"]},"}")),w("span",{ref:l=>{s=l}},u)}}}),wt=k({name:"JsonArray",props:{jsonValue:{type:Array,required:!0},keyName:{type:String,default:""},depth:{type:Number,default:0},sort:Boolean,expand:Boolean,previewMode:Boolean},emits:["update:expand"],setup(e,{emit:t}){const n=L([]);let s=null;const i=(r,o=0)=>{o===0&&(n.value=[]),setTimeout(()=>{r&&r.length>o&&(n.value.push(r[o]),i(r,o+1))},0)};F(()=>e.jsonValue,r=>{i(r)},{immediate:!0,deep:!0});const a=()=>{if(t("update:expand",!e.expand),s)try{s.dispatchEvent(new Event("resized"))}catch{const r=document.createEvent("Event");r.initEvent("resized",!0,!1),s.dispatchEvent(r)}};return()=>{const r=[];return!e.previewMode&&!e.keyName&&r.push(w("span",{class:{"jv-toggle":!0,open:!!e.expand},onClick:a})),r.push(w("span",{class:["jv-item","jv-array"]},"[")),e.expand&&n.value.forEach((o,u)=>{r.push(w(ae,{key:u,sort:e.sort,depth:e.depth+1,value:o,previewMode:e.previewMode}))}),!e.expand&&n.value.length>0&&r.push(w("span",{class:"jv-ellipsis",onClick:a,title:`click to reveal ${n.value.length} hidden items`},"...")),r.push(w("span",{class:["jv-item","jv-array"]},"]")),w("span",{ref:o=>{s=o}},r)}}}),_t=["title"],xt=k({__name:"json-function",props:{jsonValue:{type:Function,required:!0}},setup(e){return(t,n)=>(N(),C("span",{class:O(["jv-item","jv-function"]),title:e.jsonValue.toString()}," <function> ",8,_t))}}),jt={class:O(["jv-item","jv-string"])},kt=k({__name:"json-date",props:{jsonValue:{type:Date,required:!0}},setup(e){const t=e,n=ne("timeformat",i=>i.toLocaleString()),s=P(()=>n(t.jsonValue));return(i,a)=>(N(),C("span",jt,' "'+V(s.value)+'" ',1))}}),Et={class:O(["jv-item","jv-regexp"])},St=k({__name:"json-regexp",props:{jsonValue:{type:RegExp,required:!0}},setup(e){return(t,n)=>(N(),C("span",Et,V(e.jsonValue.toString()),1))}}),ae=k({name:"JsonBox",props:{value:{type:[Object,Array,String,Number,Boolean,Function,Date],default:null},keyName:{type:String,default:""},sort:Boolean,depth:{type:Number,default:0},previewMode:Boolean},setup(e){const t=ne("expandDepth",1/0),n=ne("keyClick",()=>{}),s=L(!0);let i=null;re(()=>{s.value=e.previewMode||e.depth<t});const a=()=>{if(s.value=!s.value,i)try{i.dispatchEvent(new Event("resized"))}catch{const r=document.createEvent("Event");r.initEvent("resized",!0,!1),i.dispatchEvent(r)}};return()=>{const r=[];let o;e.value===null||e.value===void 0?o=vt:Array.isArray(e.value)?o=wt:e.value instanceof Date?o=kt:e.value instanceof RegExp?o=St:typeof e.value=="object"?o=bt:typeof e.value=="number"?o=ht:typeof e.value=="string"?o=me:typeof e.value=="boolean"?o=gt:typeof e.value=="function"?o=xt:o=me;const u=e.value&&(Array.isArray(e.value)||typeof e.value=="object"&&!(e.value instanceof Date)&&!(e.value instanceof RegExp));return!e.previewMode&&u&&!(e.value instanceof RegExp)&&r.push(w("span",{class:{"jv-toggle":!0,open:!!s.value},onClick:a})),e.keyName&&r.push(w("span",{class:"jv-key",onClick:()=>{n&&n(e.keyName)}},`${e.keyName}:`)),r.push(w(o,{class:"jv-push",jsonValue:e.value,keyName:e.keyName,sort:e.sort,depth:e.depth,expand:s.value,previewMode:e.previewMode,"onUpdate:expand":l=>{s.value=l}})),w("div",{class:{"jv-node":!0,"jv-key-node":!!e.keyName&&!u,toggle:!e.previewMode&&u},ref:l=>{i=l}},r)}}});function Tt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oe={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT Â© Zeno Rocha
 */var Nt=oe.exports,ve;function Lt(){return ve||(ve=1,(function(e,t){(function(n,s){e.exports=s()})(Nt,function(){return(function(){var n={686:(function(a,r,o){o.d(r,{default:function(){return Me}});var u=o(279),l=o.n(u),p=o(370),g=o.n(p),h=o(817),x=o.n(h);function v(d){try{return document.execCommand(d)}catch{return!1}}var _=function(d){var c=x()(d);return v("cut"),c},b=_;function $(d){var c=document.documentElement.getAttribute("dir")==="rtl",m=document.createElement("textarea");m.style.fontSize="12pt",m.style.border="0",m.style.padding="0",m.style.margin="0",m.style.position="absolute",m.style[c?"right":"left"]="-9999px";var f=window.pageYOffset||document.documentElement.scrollTop;return m.style.top="".concat(f,"px"),m.setAttribute("readonly",""),m.value=d,m}var le=function(d,c){var m=$(d);c.container.appendChild(m);var f=x()(m);return v("copy"),m.remove(),f},je=function(d){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},m="";return typeof d=="string"?m=le(d,c):d instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(d?.type)?m=le(d.value,c):(m=x()(d),v("copy")),m},Y=je;function J(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?J=function(c){return typeof c}:J=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},J(d)}var ke=function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},c=d.action,m=c===void 0?"copy":c,f=d.container,y=d.target,j=d.text;if(m!=="copy"&&m!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(y!==void 0)if(y&&J(y)==="object"&&y.nodeType===1){if(m==="copy"&&y.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(m==="cut"&&(y.hasAttribute("readonly")||y.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(j)return Y(j,{container:f});if(y)return m==="cut"?b(y):Y(y,{container:f})},Ee=ke;function D(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?D=function(c){return typeof c}:D=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},D(d)}function Se(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function")}function ue(d,c){for(var m=0;m<c.length;m++){var f=c[m];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(d,f.key,f)}}function Te(d,c,m){return c&&ue(d.prototype,c),m&&ue(d,m),d}function Ne(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),c&&X(d,c)}function X(d,c){return X=Object.setPrototypeOf||function(m,f){return m.__proto__=f,m},X(d,c)}function Le(d){var c=$e();return function(){var m=U(d),f;if(c){var y=U(this).constructor;f=Reflect.construct(m,arguments,y)}else f=m.apply(this,arguments);return Ce(this,f)}}function Ce(d,c){return c&&(D(c)==="object"||typeof c=="function")?c:Oe(d)}function Oe(d){if(d===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d}function $e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function U(d){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(c){return c.__proto__||Object.getPrototypeOf(c)},U(d)}function Z(d,c){var m="data-clipboard-".concat(d);if(c.hasAttribute(m))return c.getAttribute(m)}var Ae=(function(d){Ne(m,d);var c=Le(m);function m(f,y){var j;return Se(this,m),j=c.call(this),j.resolveOptions(y),j.listenClick(f),j}return Te(m,[{key:"resolveOptions",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof f.action=="function"?f.action:this.defaultAction,this.target=typeof f.target=="function"?f.target:this.defaultTarget,this.text=typeof f.text=="function"?f.text:this.defaultText,this.container=D(f.container)==="object"?f.container:document.body}},{key:"listenClick",value:function(f){var y=this;this.listener=g()(f,"click",function(j){return y.onClick(j)})}},{key:"onClick",value:function(f){var y=f.delegateTarget||f.currentTarget,j=this.action(y)||"copy",K=Ee({action:j,container:this.container,target:this.target(y),text:this.text(y)});this.emit(K?"success":"error",{action:j,text:K,trigger:y,clearSelection:function(){y&&y.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(f){return Z("action",f)}},{key:"defaultTarget",value:function(f){var y=Z("target",f);if(y)return document.querySelector(y)}},{key:"defaultText",value:function(f){return Z("text",f)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(f){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return Y(f,y)}},{key:"cut",value:function(f){return b(f)}},{key:"isSupported",value:function(){var f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],y=typeof f=="string"?[f]:f,j=!!document.queryCommandSupported;return y.forEach(function(K){j=j&&!!document.queryCommandSupported(K)}),j}}]),m})(l()),Me=Ae}),828:(function(a){var r=9;if(typeof Element<"u"&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}function u(l,p){for(;l&&l.nodeType!==r;){if(typeof l.matches=="function"&&l.matches(p))return l;l=l.parentNode}}a.exports=u}),438:(function(a,r,o){var u=o(828);function l(h,x,v,_,b){var $=g.apply(this,arguments);return h.addEventListener(v,$,b),{destroy:function(){h.removeEventListener(v,$,b)}}}function p(h,x,v,_,b){return typeof h.addEventListener=="function"?l.apply(null,arguments):typeof v=="function"?l.bind(null,document).apply(null,arguments):(typeof h=="string"&&(h=document.querySelectorAll(h)),Array.prototype.map.call(h,function($){return l($,x,v,_,b)}))}function g(h,x,v,_){return function(b){b.delegateTarget=u(b.target,x),b.delegateTarget&&_.call(h,b)}}a.exports=p}),879:(function(a,r){r.node=function(o){return o!==void 0&&o instanceof HTMLElement&&o.nodeType===1},r.nodeList=function(o){var u=Object.prototype.toString.call(o);return o!==void 0&&(u==="[object NodeList]"||u==="[object HTMLCollection]")&&"length"in o&&(o.length===0||r.node(o[0]))},r.string=function(o){return typeof o=="string"||o instanceof String},r.fn=function(o){var u=Object.prototype.toString.call(o);return u==="[object Function]"}}),370:(function(a,r,o){var u=o(879),l=o(438);function p(v,_,b){if(!v&&!_&&!b)throw new Error("Missing required arguments");if(!u.string(_))throw new TypeError("Second argument must be a String");if(!u.fn(b))throw new TypeError("Third argument must be a Function");if(u.node(v))return g(v,_,b);if(u.nodeList(v))return h(v,_,b);if(u.string(v))return x(v,_,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function g(v,_,b){return v.addEventListener(_,b),{destroy:function(){v.removeEventListener(_,b)}}}function h(v,_,b){return Array.prototype.forEach.call(v,function($){$.addEventListener(_,b)}),{destroy:function(){Array.prototype.forEach.call(v,function($){$.removeEventListener(_,b)})}}}function x(v,_,b){return l(document.body,v,_,b)}a.exports=p}),817:(function(a){function r(o){var u;if(o.nodeName==="SELECT")o.focus(),u=o.value;else if(o.nodeName==="INPUT"||o.nodeName==="TEXTAREA"){var l=o.hasAttribute("readonly");l||o.setAttribute("readonly",""),o.select(),o.setSelectionRange(0,o.value.length),l||o.removeAttribute("readonly"),u=o.value}else{o.hasAttribute("contenteditable")&&o.focus();var p=window.getSelection(),g=document.createRange();g.selectNodeContents(o),p.removeAllRanges(),p.addRange(g),u=p.toString()}return u}a.exports=r}),279:(function(a){function r(){}r.prototype={on:function(o,u,l){var p=this.e||(this.e={});return(p[o]||(p[o]=[])).push({fn:u,ctx:l}),this},once:function(o,u,l){var p=this;function g(){p.off(o,g),u.apply(l,arguments)}return g._=u,this.on(o,g,l)},emit:function(o){var u=[].slice.call(arguments,1),l=((this.e||(this.e={}))[o]||[]).slice(),p=0,g=l.length;for(p;p<g;p++)l[p].fn.apply(l[p].ctx,u);return this},off:function(o,u){var l=this.e||(this.e={}),p=l[o],g=[];if(p&&u)for(var h=0,x=p.length;h<x;h++)p[h].fn!==u&&p[h].fn._!==u&&g.push(p[h]);return g.length?l[o]=g:delete l[o],this}},a.exports=r,a.exports.TinyEmitter=r})},s={};function i(a){if(s[a])return s[a].exports;var r=s[a]={exports:{}};return n[a](r,r.exports,i),r.exports}return(function(){i.n=function(a){var r=a&&a.__esModule?(function(){return a.default}):(function(){return a});return i.d(r,{a:r}),r}})(),(function(){i.d=function(a,r){for(var o in r)i.o(r,o)&&!i.o(a,o)&&Object.defineProperty(a,o,{enumerable:!0,get:r[o]})}})(),(function(){i.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)}})(),i(686)})().default})})(oe)),oe.exports}var Ct=Lt();const Ot=Tt(Ct),$t=function(e,t){let n=Date.now(),s;return(...i)=>{Date.now()-n<t&&s&&clearTimeout(s),s=setTimeout(()=>{e(...i)},t),n=Date.now()}},At=k({name:"JsonViewer",components:{JsonBox:ae},props:{value:{type:[Object,Array,String,Number,Boolean,Function],required:!0},expanded:{type:Boolean,default:!1},expandDepth:{type:Number,default:1},copyable:{type:[Boolean,Object],default:!1},sort:{type:Boolean,default:!1},boxed:{type:Boolean,default:!1},theme:{type:String,default:"light"},timeformat:{type:Function,default:e=>e.toLocaleString()},previewMode:{type:Boolean,default:!1},parse:{type:Boolean,default:!1}},emits:["onKeyClick","copied"],setup(e,{emit:t}){const n=L(!1),s=L(!1),i=L(e.expanded),a=L(null),r=L(null);Q("expandDepth",e.expandDepth),Q("timeformat",e.timeformat),Q("keyClick",v=>{t("onKeyClick",v)});const o=P(()=>"jv-container jv-"+e.theme+(e.boxed?" boxed":"")),u=P(()=>{if(typeof e.copyable=="boolean"&&!e.copyable)return{copyText:"copy",copiedText:"copied!",timeout:2e3,align:"right"};const v=e.copyable;return{copyText:v.copyText||"copy",copiedText:v.copiedText||"copied!",timeout:v.timeout||2e3,align:v.align||"right"}}),l=P(()=>{if(!e.parse||typeof e.value!="string")return e.value;try{return JSON.parse(e.value)}catch{return e.value}}),p=()=>{g()},g=$t(()=>{we(()=>{r.value&&(r.value.$el.clientHeight>=250?s.value=!0:s.value=!1)})},200),h=v=>{n.value||(n.value=!0,setTimeout(()=>{n.value=!1},u.value.timeout),t("copied",v))},x=()=>{i.value=!i.value};return F(()=>e.value,()=>{p()}),re(()=>{e.boxed&&r.value&&(p(),r.value.$el.addEventListener("resized",p,!0)),e.copyable&&a.value&&new Ot(a.value,{text:()=>JSON.stringify(l.value,null,2)}).on("success",h)}),{clip:a,jsonBox:r,copied:n,expandableCode:s,expandCode:i,jvClass:o,copyText:u,parseValue:l,toggleExpandCode:x}}}),Mt=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};function Pt(e,t,n,s,i,a){const r=be("json-box");return N(),C("div",{class:O(e.jvClass)},[e.copyable?(N(),C("div",{key:0,class:O(`jv-tooltip ${e.copyText.align||"right"}`)},[S("span",{ref:"clip",class:O(["jv-button",{copied:e.copied}])},[Ve(e.$slots,"copy",{copied:e.copied},()=>[Re(V(e.copied?e.copyText.copiedText:e.copyText.copyText),1)])],2)],2)):ce("",!0),S("div",{class:O(["jv-code",{open:e.expandCode,boxed:e.boxed}])},[T(r,{ref:"jsonBox",value:e.parseValue,sort:e.sort,"preview-mode":e.previewMode},null,8,["value","sort","preview-mode"])],2),e.expandableCode&&e.boxed?(N(),C("div",{key:1,class:"jv-more",onClick:t[0]||(t[0]=(...o)=>e.toggleExpandCode&&e.toggleExpandCode(...o))},[S("span",{class:O(["jv-toggle",{open:!!e.expandCode}])},null,2)])):ce("",!0)],2)}const he=Mt(At,[["render",Pt]]),Bt=e=>{e.component(he.name,he)},zt={install:Bt};function Vt(e){e.use(zt)}const Rt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Dt=k({name:"CancelTwotone",render:function(t,n){return N(),C("svg",Rt,n[0]||(n[0]=[S("path",{opacity:".3",d:"M12 4c-4.41 0-8 3.59-8 8s3.59 8 8 8s8-3.59 8-8s-3.59-8-8-8zm5 11.59L15.59 17L12 13.41L8.41 17L7 15.59L10.59 12L7 8.41L8.41 7L12 10.59L15.59 7L17 8.41L13.41 12L17 15.59z",fill:"currentColor"},null,-1),S("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10s10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8zm3.59-13L12 10.59L8.41 7L7 8.41L10.59 12L7 15.59L8.41 17L12 13.41L15.59 17L17 15.59L13.41 12L17 8.41z",fill:"currentColor"},null,-1)]))}}),Ft={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},Ht=k({name:"ChangeCircleTwotone",render:function(t,n){return N(),C("svg",Ft,n[0]||(n[0]=[S("path",{opacity:".3",d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8s-8-3.59-8-8s3.59-8 8-8m.06 9.34v2.14a3.46 3.46 0 0 1-2.54-1.01c-1.12-1.12-1.3-2.8-.59-4.13l-1.1-1.1c-1.28 1.94-1.07 4.59.64 6.29A4.95 4.95 0 0 0 12 17h.06v2l2.83-2.83l-2.83-2.83zm3.48-4.88c-.99-.99-2.3-1.46-3.6-1.45V5L9.11 7.83l2.83 2.83V8.51H12c.9 0 1.79.34 2.48 1.02c1.12 1.12 1.3 2.8.59 4.13l1.1 1.1a5.032 5.032 0 0 0-.63-6.3z",fill:"currentColor"},null,-1),S("path",{d:"M12 4c4.41 0 8 3.59 8 8s-3.59 8-8 8s-8-3.59-8-8s3.59-8 8-8m0-2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm.06 11.34v2.14a3.46 3.46 0 0 1-2.54-1.01c-1.12-1.12-1.3-2.8-.59-4.13l-1.1-1.1c-1.28 1.94-1.07 4.59.64 6.29A4.95 4.95 0 0 0 12 17h.06v2l2.83-2.83l-2.83-2.83zm3.48-4.88c-.99-.99-2.3-1.46-3.6-1.45V5L9.11 7.83l2.83 2.83V8.51H12c.9 0 1.79.34 2.48 1.02c1.12 1.12 1.3 2.8.59 4.13l1.1 1.1a5.032 5.032 0 0 0-.63-6.3z",fill:"currentColor"},null,-1)]))}}),qt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},It=k({name:"ContactlessTwotone",render:function(t,n){return N(),C("svg",qt,n[0]||(n[0]=[S("path",{opacity:".3",d:"M12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8s8-3.58 8-8s-3.58-8-8-8zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86a4.42 4.42 0 0 0-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4c.01.86-.17 1.7-.54 2.51zm3.07 1.56l-1.3-.74c.52-.92.78-1.98.78-3.15c0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07c0 1.43-.33 2.74-.98 3.89zm3.14 1.32l-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69c0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31c0 1.74-.44 3.54-1.33 5.35z",fill:"currentColor"},null,-1),S("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8s8 3.58 8 8s-3.58 8-8 8z",fill:"currentColor"},null,-1),S("path",{d:"M7.1 10.18a4.384 4.384 0 0 1 0 3.66l1.37.62c.37-.81.55-1.65.54-2.5c-.01-.84-.19-1.65-.54-2.4l-1.37.62zm6.23-2.85c.78 1.57 1.18 3.14 1.18 4.64c0 1.51-.4 3.09-1.18 4.69l1.35.66c.88-1.81 1.33-3.61 1.33-5.35c0-1.74-.45-3.53-1.33-5.31l-1.35.67zM10.2 8.72c.53 1.07.8 2.21.8 3.4c0 1.17-.26 2.23-.78 3.15l1.3.74c.65-1.15.98-2.45.98-3.89c0-1.42-.32-2.79-.96-4.07l-1.34.67z",fill:"currentColor"},null,-1)]))}});function _e(){let e=localStorage.getItem("localhost");return e===null&&(e="https://tes4:8080/labctl",localStorage.setItem("localhost",e)),new URL(e)}const H=(()=>{if(typeof window>"u")return"";const e=window.location.hostname;if(!(e==="localhost"||e==="127.0.0.1"))return"";const t=_e();return console.warn(`Using upstream server ${t.host}${t.pathname}. Change in Dev Tools --> Application --> Local Storage [key=localhost] & refresh.`),t.host})(),R=(()=>{if(H){const t=_e();if(t.pathname&&t.pathname!=="/")return t.pathname.endsWith("/")?t.pathname:t.pathname+"/"}return typeof window>"u"?"/labctl/":`/${window.location.pathname.split("/",2)[1]||"labctl"}/`})(),Jt=typeof window>"u"?"":H?`http://${H}`:`${window.location.protocol}//${window.location.host}`,Ut=(()=>{if(typeof window>"u")return"";const e=window.location.protocol==="https:"?"wss:":"ws:";return H?`${e}//${H}${R}ws`:`${e}//${window.location.host}${R}ws`})();function Kt(e,t){e.splice(t.length);for(let n=0;n<t.length;n+=1)e[n]=t[n]}function te(e,t){Object.keys(e).forEach(n=>{n in t||delete e[n]}),Object.keys(t).forEach(n=>{e[n]=t[n]})}function cn(e,t,n){const s=typeof n>"u"?{}:n;return Object.keys(e).sort(t).reduce((a,r)=>(r in s&&JSON.stringify(s[r])===JSON.stringify(e[r])||(a[r]=e[r]),a),{})}async function G(e,t){const n={method:"GET"};try{const s=await fetch(Jt+e,{headers:{Accept:"application/json","Content-Type":"application/json"},redirect:"error",...n});return s.ok?Promise.resolve(await s.json()):Promise.reject(s.statusText)}catch(s){return Promise.reject(s)}}var M=(e=>(e.template="template",e.uidata="uidata",e.echo="echo",e.config="config",e.error="error",e.warn="warn",e.info="info",e.fschange="fschange",e))(M||{});const Gt=q("ws-template-bus"),Wt=q("ws-bus"),xe=q("ws-tx-bus"),Yt=xe.emit;function ye(e){return t=>{if(!("clab_far"in t))return console.log(`clab_far not in dictionary. Filtering on ${e}: ${t}`),!0;const n=t.clab_far;return"clab_node"in n?n.clab_node===e:(console.log(`clab_far.clab_node not in dictionary. Filtering on ${e}: ${t}`),!0)}}function pn(e){const t=e.split("."),n=t.length>1&&t.pop()||"";if(e=t.join("."),e.includes("__")){const s=e.split("__"),i=s.length>1&&s.pop()||"";return{name:s.join("__"),role:i,ext:n}}return{name:e,role:"",ext:n}}function ge(e){return e?`
source_above: {{ .source_endpoint }}
source_below: ".{{ .source_vars.clab_link_ip | ip | split "." | index -1 }}"
target_above: {{ .target_endpoint }}
target_below: ".{{ .target_vars.clab_link_ip | ip | split "." | index -1 }}"
center_above:
center_below: {{ .source_vars.clab_link_ip | split "." | slice 0 3 | join "." }}/{{ .source_vars.clab_link_ip | split "/" | index -1  }}
`:`
label: {{ .clab_role }}
label_below: {{ .clab_node }}`}function se(e){const t=window;typeof t.$message<"u"&&t.$message[e.type](e.msg,e.opt),typeof t.$backlog>"u"&&(t.$backlog=[]),t.$backlog.push(e)}function dn(e){const t=window;t.$message=e,typeof t.$backlog<"u"&&(t.$backlog.forEach(n=>t.$message[n.type](n.msg,n.opt)),delete t.$backlog)}function Xt(e,t){se({type:"info",msg:e,opt:{duration:3e3,closable:!0,render:ie,...t}})}function W(e,t){se({type:"warning",msg:e,opt:{duration:4e3,closable:!0,render:ie,...t}})}function z(e,t){se({type:"error",msg:e,opt:{duration:0,closable:!0,render:ie,...t}})}const ie=e=>{const{type:t}=e;return w(Ge,{closable:e.closable,onClose:e.onClose,type:t==="loading"?"default":t,style:{boxShadow:"var(--n-box-shadow)",maxWidth:"calc(100vw - 32px)",width:"480px"}},{default:()=>w("div",{style:{"white-space":"pre-wrap"}},e.content)})},Zt=q("action"),fn=q("log"),Qt=De("main",{state:()=>({topo:{name:"",prefix:void 0,nodes:{},links:{},vars:{}},context:{topoerror:""},templateFiles:{},labFiles:{},optNodeLayouts:{nodes:{}},optNodeProps:{},optTemplates:{},optLayoutHandler:"grid",optCommands:[""],optHeight:450,results:{},loading:0,split_vars:pe("split_vars",!0),dark:pe("dark_mode",!1),lastSave:0}),getters:{wsState:e=>({code:M.uidata,uidata:{options:{layout:e.optLayoutHandler,height:e.optHeight,commands:B(e.optCommands),props:B(e.optNodeProps)},layouts:B(e.optNodeLayouts),templates:B(e.optTemplates)}}),hostName:e=>t=>{const n=e.topo.prefix??"clab";return n===""?t:n==="__lab-name"?`${e.topo.name}-${t}`:`${n}-${e.topo.name}-${t}`},linkVars:e=>t=>{const n=e.topo.links[t];if(!n)return{};e.topo.vars[n.target]||W(`No variable found for ${n.target}

reload advised`);let s=e.topo.vars[n.source].clab_links.filter(ye(n.target));s.length>1&&(s=s.filter(a=>{const r=n.vars.port;return r&&r.length===2&&a.port?r[0]===a.port:!0}));let i=e.topo.vars[n.target].clab_links.filter(ye(n.source));return i.length>1&&(console.debug(i),i=i.filter(a=>{const r=n.vars.port;return r&&r.length===2&&a.port?r[1]===a.port:!0})),(s.length!==1||i.length!==1)&&console.error(`error picking a single vars for link # ${t}`,[s,i]),{...n,source_vars:s.length==0?{}:B(s[0]),target_vars:i.length==0?{}:B(i[0]),vars:B(n.vars),source_node:e.topo.nodes[n.source],target_node:e.topo.nodes[n.target]}}},actions:{init(){},async load_uidata(e){if(!e){console.warn("no data to load");return}if(Date.now()-this.lastSave<800){console.debug("ignoring changes from server");return}this.context=e.context,console.debug("load layouts+",e.options),this.optHeight=Math.max(400,Math.min(900,e.options.height||450)),this.optLayoutHandler=e.options.layout,this.optNodeProps=e.options.props||{},Array.isArray(e.options.commands)?Kt(this.optCommands,e.options.commands):this.optCommands=[],Object.assign(this,e.options),this.optNodeLayouts=e.layouts,this.optTemplates=e.templates,"link"in this.optTemplates||(this.optTemplates.link=ge(!0)),"node"in this.optTemplates||(this.optTemplates.node=ge(!1)),this.context.topoerror?W("Failed to read the topology file"):await this.fetch_topo(),this.fetch_templates(),this.fetch_labfiles()},async fetch_topo(){const e=await G(R+"topo");console.debug(`got topo ${e.data.name}`),this.topo.name=e.data.name,this.topo.prefix=e.data.prefix,te(this.topo.nodes,e.data.nodes),te(this.topo.links,e.data.links),Object.keys(this.topo.nodes).forEach(t=>{const n=this.optNodeProps[t];n&&(this.topo.nodes[t].icon=n.icon,this.topo.nodes[t].color=n.color,this.topo.nodes[t].size=n.size)}),G(R+"vars").then(t=>{te(this.topo.vars,t.data)}),we(()=>{Zt.emit({action:"center",command:""})})},fetch_templates(){G(R+"templates").then(e=>{Object.assign(this.templateFiles,e.data)}).catch(e=>z(`Could not load templates

${e}

Reload the webpage and/or check the server`))},fetch_labfiles(){G(R+"files").then(e=>{Object.assign(this.labFiles,e.data)}).catch(()=>{z("Could not load lab files"),this.labFiles={"readme.md":"could not load lab files"}})},load_config(e){if(!e){z("No config results");return}if(e.cmd!=="done"){if(!e.results){console.log("no results in config message",e);const t=e.env;t&&(e.results=[{response:t.Data?.join(`
`),prompt:"",command:"template",source:t.Info?.join(`
`),node:t.TargetNode?.shortname,level:0}])}if(!e.results){z("No config results");return}e.results.forEach(t=>{console.log("load config",t),this.results[t.node]??=[],this.results[t.node].push(t)})}},save(){console.debug("save layouts+",this.wsState.uidata),Yt(this.wsState),this.lastSave=Date.now()},async websock_handler(e){try{switch(e.code){case M.uidata:await this.load_uidata(e.uidata);break;case M.config:this.load_config(e.config);break;case M.error:z(e.msg??JSON.stringify(e));return;case M.warn:W(e.msg??JSON.stringify(e));return;case M.info:Xt(e.msg??JSON.stringify(e));return;case M.fschange:this.fschange(e.msg??"");return;default:console.debug("unknown msg code",e),z(`unknown message code

${JSON.stringify(e)}`,{duration:0,closable:!0})}}catch(t){z(String(t))}Wt.emit(e)},fschange(e){if(e.toLowerCase().endsWith(".md")){console.debug("fetch /files",e),this.fetch_labfiles();return}const t=e.split("/"),n=t[t.length-1];if(this.templateFiles[n]!==void 0){console.log("fetch /templates",e),this.fetch_templates();return}e.startsWith(".")||W(`unhandled file change: ${e}`)}},debounce:{save:1500}}),en="/labctl/assets/labctl1-B14J0FxK.svg",tn={href:"https://labctl.net/guide/config-engine-ui",target:"_blank"},nn={style:{"font-size":"24px"}},on={class:"nav-end"},rn=k({__name:"App",setup(e){const t=Qt(),n=P(()=>t.dark?We:Ye),{status:s,data:i,send:a,open:r}=Ue(Ut,{heartbeat:{message:"%",interval:5e3,pongTimeout:15e3},immediate:!1});xe.on(l=>{console.debug("WS Tx",l),a(JSON.stringify(l))}),F(i,l=>{if(!l)return;const p=JSON.parse(l);p.code===M.template?Gt.emit(p.template):t.websock_handler(p),l===i.value&&(i.value=null)}),F(s,l=>{l==="CLOSED"&&setTimeout(u,2e3)});const o=P(()=>{switch(s.value){case"OPEN":return{color:"green",icon:It};case"CONNECTING":return{color:"orange",icon:Ht}}return{color:"red",icon:Dt}});Fe(()=>{t.init(),r()});function u(){s.value!=="OPEN"&&r()}return(l,p)=>{const g=be("router-view");return N(),He(E(at),{"theme-overrides":{common:{fontWeightStrong:"600"}},theme:n.value},{default:A(()=>[T(E(Xe),null,{default:A(()=>[T(E(Ze),{placement:"bottom-right"},{default:A(()=>[T(E(Qe),{position:"absolute"},{default:A(()=>[T(E(et),{bordered:"",position:"absolute",style:{padding:"24px","padding-top":"15px",height:"64px"}},{default:A(()=>[T(E(ee),{justify:"space-between",size:"large",wrap:!1},{default:A(()=>[T(E(ee),{justify:"space-around",wrap:!1},{default:A(()=>[S("a",tn,[T(E(tt),{src:E(en),height:32,"preview-disabled":""},null,8,["src"])]),S("span",nn,V(E(t).topo.name),1)]),_:1}),T(E(ee),{justify:"end"},{default:A(()=>[p[0]||(p[0]=S("div",{id:"mtoolbar"},null,-1)),S("div",on,[T(E(nt),{round:"",color:"white",onClick:u},{default:A(()=>[T(E(ot),{component:o.value.icon,color:o.value.color},null,8,["component","color"])]),_:1})])]),_:1})]),_:1})]),_:1}),T(E(rt),{"native-scrollbar":"",position:"absolute",style:qe({top:"64px","--n-font-family":n.value.common.fontFamily,"--n-font-family-mono":n.value.common.fontFamilyMono,"--n-font-size-tiny":n.value.common.fontSizeTiny})},{default:A(()=>[T(g)]),_:1},8,["style"])]),_:1})]),_:1})]),_:1})]),_:1},8,["theme"])}}}),I=Ie(rn);ut(I);pt(I);dt(I);Vt(I);I.mount("#app");export{te as $,Xt as M,he as Q,M as W,Gt as a,Wt as b,Zt as c,ge as d,W as e,Ut as f,dn as g,xe as h,fn as l,pn as p,cn as s,Qt as u,Yt as w};
