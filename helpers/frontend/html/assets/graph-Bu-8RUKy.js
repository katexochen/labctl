import{d as U,r as j,c as A,w as he,o as P,u as It,t as Pe,a as _,b as F,e as ot,n as fe,f as O,g as ce,h as V,i as fr,F as q,j as Q,k as ne,l as pt,m as ta,p as Me,q as et,s as gt,v as oe,x as na,y as lo,z as Ne,A as oa,B as K,C as On,D as Tn,E as hr,G as Re,H as hn,I as vn,T as ct,J as ye,K as ra,L as Ze}from"./vue-DCSIo9-U.js";var vr=typeof global=="object"&&global&&global.Object===Object&&global,ia=typeof self=="object"&&self&&self.Object===Object&&self,be=vr||ia||Function("return this")(),$e=be.Symbol,pr=Object.prototype,aa=pr.hasOwnProperty,sa=pr.toString,rt=$e?$e.toStringTag:void 0;function la(t){var e=aa.call(t,rt),n=t[rt];try{t[rt]=void 0;var o=!0}catch{}var r=sa.call(t);return o&&(e?t[rt]=n:delete t[rt]),r}var ua=Object.prototype,ca=ua.toString;function da(t){return ca.call(t)}var fa="[object Null]",ha="[object Undefined]",uo=$e?$e.toStringTag:void 0;function He(t){return t==null?t===void 0?ha:fa:uo&&uo in Object(t)?la(t):da(t)}function Le(t){return t!=null&&typeof t=="object"}var va="[object Symbol]";function $t(t){return typeof t=="symbol"||Le(t)&&He(t)==va}function gr(t,e){for(var n=-1,o=t==null?0:t.length,r=Array(o);++n<o;)r[n]=e(t[n],n,t);return r}var ge=Array.isArray,co=$e?$e.prototype:void 0,fo=co?co.toString:void 0;function mr(t){if(typeof t=="string")return t;if(ge(t))return gr(t,mr)+"";if($t(t))return fo?fo.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}var pa=/\s/;function ga(t){for(var e=t.length;e--&&pa.test(t.charAt(e)););return e}var ma=/^\s+/;function ba(t){return t&&t.slice(0,ga(t)+1).replace(ma,"")}function me(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ho=NaN,ya=/^[-+]0x[0-9a-f]+$/i,wa=/^0b[01]+$/i,xa=/^0o[0-7]+$/i,Ea=parseInt;function Pt(t){if(typeof t=="number")return t;if($t(t))return ho;if(me(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=me(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ba(t);var n=wa.test(t);return n||xa.test(t)?Ea(t.slice(2),n?2:8):ya.test(t)?ho:+t}var vo=1/0,Sa=17976931348623157e292;function ka(t){if(!t)return t===0?t:0;if(t=Pt(t),t===vo||t===-vo){var e=t<0?-1:1;return e*Sa}return t===t?t:0}function br(t){var e=ka(t),n=e%1;return e===e?n?e-n:e:0}function _n(t){return t}var Pa="[object AsyncFunction]",Ma="[object Function]",Oa="[object GeneratorFunction]",Ta="[object Proxy]";function Cn(t){if(!me(t))return!1;var e=He(t);return e==Ma||e==Oa||e==Pa||e==Ta}var Jt=be["__core-js_shared__"],po=(function(){var t=/[^.]+$/.exec(Jt&&Jt.keys&&Jt.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""})();function _a(t){return!!po&&po in t}var Ca=Function.prototype,za=Ca.toString;function We(t){if(t!=null){try{return za.call(t)}catch{}try{return t+""}catch{}}return""}var Aa=/[\\^$.*+?()[\]{}|]/g,Ia=/^\[object .+?Constructor\]$/,$a=Function.prototype,La=Object.prototype,Na=$a.toString,Za=La.hasOwnProperty,ja=RegExp("^"+Na.call(Za).replace(Aa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Da(t){if(!me(t)||_a(t))return!1;var e=Cn(t)?ja:Ia;return e.test(We(t))}function Ra(t,e){return t?.[e]}function Ve(t,e){var n=Ra(t,e);return Da(n)?n:void 0}var pn=Ve(be,"WeakMap"),go=Object.create,Ba=(function(){function t(){}return function(e){if(!me(e))return{};if(go)return go(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}})();function Ha(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Wa(){}function Va(t,e){var n=-1,o=t.length;for(e||(e=Array(o));++n<o;)e[n]=t[n];return e}var Ua=800,Fa=16,Ga=Date.now;function qa(t){var e=0,n=0;return function(){var o=Ga(),r=Fa-(o-n);if(n=o,r>0){if(++e>=Ua)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Xa(t){return function(){return t}}var Mt=(function(){try{var t=Ve(Object,"defineProperty");return t({},"",{}),t}catch{}})(),Ka=Mt?function(t,e){return Mt(t,"toString",{configurable:!0,enumerable:!1,value:Xa(e),writable:!0})}:_n,Ya=qa(Ka);function Ja(t,e,n,o){for(var r=t.length,i=n+-1;++i<r;)if(e(t[i],i,t))return i;return-1}function Qa(t){return t!==t}function es(t,e,n){for(var o=n-1,r=t.length;++o<r;)if(t[o]===e)return o;return-1}function ts(t,e,n){return e===e?es(t,e,n):Ja(t,Qa,n)}function ns(t,e){var n=t==null?0:t.length;return!!n&&ts(t,e,0)>-1}var os=9007199254740991,rs=/^(?:0|[1-9]\d*)$/;function zn(t,e){var n=typeof t;return e=e??os,!!e&&(n=="number"||n!="symbol"&&rs.test(t))&&t>-1&&t%1==0&&t<e}function An(t,e,n){e=="__proto__"&&Mt?Mt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function mt(t,e){return t===e||t!==t&&e!==e}var is=Object.prototype,as=is.hasOwnProperty;function ss(t,e,n){var o=t[e];(!(as.call(t,e)&&mt(o,n))||n===void 0&&!(e in t))&&An(t,e,n)}function ls(t,e,n,o){var r=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var u=e[i],c=void 0;c===void 0&&(c=t[u]),r?An(n,u,c):ss(n,u,c)}return n}var mo=Math.max;function us(t,e,n){return e=mo(e===void 0?t.length-1:e,0),function(){for(var o=arguments,r=-1,i=mo(o.length-e,0),a=Array(i);++r<i;)a[r]=o[e+r];r=-1;for(var u=Array(e+1);++r<e;)u[r]=o[r];return u[e]=n(a),Ha(t,this,u)}}function cs(t,e){return Ya(us(t,e,_n),t+"")}var ds=9007199254740991;function In(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ds}function tt(t){return t!=null&&In(t.length)&&!Cn(t)}function fs(t,e,n){if(!me(n))return!1;var o=typeof e;return(o=="number"?tt(n)&&zn(e,n.length):o=="string"&&e in n)?mt(n[e],t):!1}function yr(t){return cs(function(e,n){var o=-1,r=n.length,i=r>1?n[r-1]:void 0,a=r>2?n[2]:void 0;for(i=t.length>3&&typeof i=="function"?(r--,i):void 0,a&&fs(n[0],n[1],a)&&(i=r<3?void 0:i,r=1),e=Object(e);++o<r;){var u=n[o];u&&t(e,u,o,i)}return e})}var hs=Object.prototype;function $n(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||hs;return t===n}function vs(t,e){for(var n=-1,o=Array(t);++n<t;)o[n]=e(n);return o}var ps="[object Arguments]";function bo(t){return Le(t)&&He(t)==ps}var wr=Object.prototype,gs=wr.hasOwnProperty,ms=wr.propertyIsEnumerable,Ot=bo((function(){return arguments})())?bo:function(t){return Le(t)&&gs.call(t,"callee")&&!ms.call(t,"callee")};function bs(){return!1}var xr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,yo=xr&&typeof module=="object"&&module&&!module.nodeType&&module,ys=yo&&yo.exports===xr,wo=ys?be.Buffer:void 0,ws=wo?wo.isBuffer:void 0,Tt=ws||bs,xs="[object Arguments]",Es="[object Array]",Ss="[object Boolean]",ks="[object Date]",Ps="[object Error]",Ms="[object Function]",Os="[object Map]",Ts="[object Number]",_s="[object Object]",Cs="[object RegExp]",zs="[object Set]",As="[object String]",Is="[object WeakMap]",$s="[object ArrayBuffer]",Ls="[object DataView]",Ns="[object Float32Array]",Zs="[object Float64Array]",js="[object Int8Array]",Ds="[object Int16Array]",Rs="[object Int32Array]",Bs="[object Uint8Array]",Hs="[object Uint8ClampedArray]",Ws="[object Uint16Array]",Vs="[object Uint32Array]",Y={};Y[Ns]=Y[Zs]=Y[js]=Y[Ds]=Y[Rs]=Y[Bs]=Y[Hs]=Y[Ws]=Y[Vs]=!0;Y[xs]=Y[Es]=Y[$s]=Y[Ss]=Y[Ls]=Y[ks]=Y[Ps]=Y[Ms]=Y[Os]=Y[Ts]=Y[_s]=Y[Cs]=Y[zs]=Y[As]=Y[Is]=!1;function Us(t){return Le(t)&&In(t.length)&&!!Y[He(t)]}function Fs(t){return function(e){return t(e)}}var Er=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lt=Er&&typeof module=="object"&&module&&!module.nodeType&&module,Gs=lt&&lt.exports===Er,Qt=Gs&&vr.process,xo=(function(){try{var t=lt&&lt.require&&lt.require("util").types;return t||Qt&&Qt.binding&&Qt.binding("util")}catch{}})(),Eo=xo&&xo.isTypedArray,Ln=Eo?Fs(Eo):Us,qs=Object.prototype,Xs=qs.hasOwnProperty;function Sr(t,e){var n=ge(t),o=!n&&Ot(t),r=!n&&!o&&Tt(t),i=!n&&!o&&!r&&Ln(t),a=n||o||r||i,u=a?vs(t.length,String):[],c=u.length;for(var f in t)(e||Xs.call(t,f))&&!(a&&(f=="length"||r&&(f=="offset"||f=="parent")||i&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||zn(f,c)))&&u.push(f);return u}function kr(t,e){return function(n){return t(e(n))}}var Ks=kr(Object.keys,Object),Ys=Object.prototype,Js=Ys.hasOwnProperty;function Qs(t){if(!$n(t))return Ks(t);var e=[];for(var n in Object(t))Js.call(t,n)&&n!="constructor"&&e.push(n);return e}function Nn(t){return tt(t)?Sr(t):Qs(t)}function el(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var tl=Object.prototype,nl=tl.hasOwnProperty;function ol(t){if(!me(t))return el(t);var e=$n(t),n=[];for(var o in t)o=="constructor"&&(e||!nl.call(t,o))||n.push(o);return n}function Pr(t){return tt(t)?Sr(t,!0):ol(t)}var rl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,il=/^\w*$/;function Zn(t,e){if(ge(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||$t(t)?!0:il.test(t)||!rl.test(t)||e!=null&&t in Object(e)}var dt=Ve(Object,"create");function al(){this.__data__=dt?dt(null):{},this.size=0}function sl(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ll="__lodash_hash_undefined__",ul=Object.prototype,cl=ul.hasOwnProperty;function dl(t){var e=this.__data__;if(dt){var n=e[t];return n===ll?void 0:n}return cl.call(e,t)?e[t]:void 0}var fl=Object.prototype,hl=fl.hasOwnProperty;function vl(t){var e=this.__data__;return dt?e[t]!==void 0:hl.call(e,t)}var pl="__lodash_hash_undefined__";function gl(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=dt&&e===void 0?pl:e,this}function Be(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}Be.prototype.clear=al;Be.prototype.delete=sl;Be.prototype.get=dl;Be.prototype.has=vl;Be.prototype.set=gl;function ml(){this.__data__=[],this.size=0}function Lt(t,e){for(var n=t.length;n--;)if(mt(t[n][0],e))return n;return-1}var bl=Array.prototype,yl=bl.splice;function wl(t){var e=this.__data__,n=Lt(e,t);if(n<0)return!1;var o=e.length-1;return n==o?e.pop():yl.call(e,n,1),--this.size,!0}function xl(t){var e=this.__data__,n=Lt(e,t);return n<0?void 0:e[n][1]}function El(t){return Lt(this.__data__,t)>-1}function Sl(t,e){var n=this.__data__,o=Lt(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}function Oe(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}Oe.prototype.clear=ml;Oe.prototype.delete=wl;Oe.prototype.get=xl;Oe.prototype.has=El;Oe.prototype.set=Sl;var ft=Ve(be,"Map");function kl(){this.size=0,this.__data__={hash:new Be,map:new(ft||Oe),string:new Be}}function Pl(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Nt(t,e){var n=t.__data__;return Pl(e)?n[typeof e=="string"?"string":"hash"]:n.map}function Ml(t){var e=Nt(this,t).delete(t);return this.size-=e?1:0,e}function Ol(t){return Nt(this,t).get(t)}function Tl(t){return Nt(this,t).has(t)}function _l(t,e){var n=Nt(this,t),o=n.size;return n.set(t,e),this.size+=n.size==o?0:1,this}function Te(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var o=t[e];this.set(o[0],o[1])}}Te.prototype.clear=kl;Te.prototype.delete=Ml;Te.prototype.get=Ol;Te.prototype.has=Tl;Te.prototype.set=_l;var Cl="Expected a function";function jn(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Cl);var n=function(){var o=arguments,r=e?e.apply(this,o):o[0],i=n.cache;if(i.has(r))return i.get(r);var a=t.apply(this,o);return n.cache=i.set(r,a)||i,a};return n.cache=new(jn.Cache||Te),n}jn.Cache=Te;var zl=500;function Al(t){var e=jn(t,function(o){return n.size===zl&&n.clear(),o}),n=e.cache;return e}var Il=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$l=/\\(\\)?/g,Ll=Al(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(Il,function(n,o,r,i){e.push(r?i.replace($l,"$1"):o||n)}),e});function Qe(t){return t==null?"":mr(t)}function Mr(t,e){return ge(t)?t:Zn(t,e)?[t]:Ll(Qe(t))}function Zt(t){if(typeof t=="string"||$t(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function Or(t,e){e=Mr(e,t);for(var n=0,o=e.length;t!=null&&n<o;)t=t[Zt(e[n++])];return n&&n==o?t:void 0}function Nl(t,e,n){var o=t==null?void 0:Or(t,e);return o===void 0?n:o}function Zl(t,e){for(var n=-1,o=e.length,r=t.length;++n<o;)t[r+n]=e[n];return t}var Tr=kr(Object.getPrototypeOf,Object),jl="[object Object]",Dl=Function.prototype,Rl=Object.prototype,_r=Dl.toString,Bl=Rl.hasOwnProperty,Hl=_r.call(Object);function Cr(t){if(!Le(t)||He(t)!=jl)return!1;var e=Tr(t);if(e===null)return!0;var n=Bl.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&_r.call(n)==Hl}function zr(t,e,n){var o=-1,r=t.length;e<0&&(e=-e>r?0:r+e),n=n>r?r:n,n<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(r);++o<r;)i[o]=t[o+e];return i}function Wl(t,e,n){var o=t.length;return n=n===void 0?o:n,!e&&n>=o?t:zr(t,e,n)}var Vl="\\ud800-\\udfff",Ul="\\u0300-\\u036f",Fl="\\ufe20-\\ufe2f",Gl="\\u20d0-\\u20ff",ql=Ul+Fl+Gl,Xl="\\ufe0e\\ufe0f",Kl="\\u200d",Yl=RegExp("["+Kl+Vl+ql+Xl+"]");function Ar(t){return Yl.test(t)}function Jl(t){return t.split("")}var Ir="\\ud800-\\udfff",Ql="\\u0300-\\u036f",eu="\\ufe20-\\ufe2f",tu="\\u20d0-\\u20ff",nu=Ql+eu+tu,ou="\\ufe0e\\ufe0f",ru="["+Ir+"]",gn="["+nu+"]",mn="\\ud83c[\\udffb-\\udfff]",iu="(?:"+gn+"|"+mn+")",$r="[^"+Ir+"]",Lr="(?:\\ud83c[\\udde6-\\uddff]){2}",Nr="[\\ud800-\\udbff][\\udc00-\\udfff]",au="\\u200d",Zr=iu+"?",jr="["+ou+"]?",su="(?:"+au+"(?:"+[$r,Lr,Nr].join("|")+")"+jr+Zr+")*",lu=jr+Zr+su,uu="(?:"+[$r+gn+"?",gn,Lr,Nr,ru].join("|")+")",cu=RegExp(mn+"(?="+mn+")|"+uu+lu,"g");function du(t){return t.match(cu)||[]}function fu(t){return Ar(t)?du(t):Jl(t)}function hu(t){return function(e){e=Qe(e);var n=Ar(e)?fu(e):void 0,o=n?n[0]:e.charAt(0),r=n?Wl(n,1).join(""):e.slice(1);return o[t]()+r}}var Fv=hu("toUpperCase");function vu(t,e,n,o){for(var r=-1,i=t==null?0:t.length;++r<i;)n=e(n,t[r],r,t);return n}function pu(t){return function(e){return t?.[e]}}var gu={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},mu=pu(gu),bu=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,yu="\\u0300-\\u036f",wu="\\ufe20-\\ufe2f",xu="\\u20d0-\\u20ff",Eu=yu+wu+xu,Su="["+Eu+"]",ku=RegExp(Su,"g");function Pu(t){return t=Qe(t),t&&t.replace(bu,mu).replace(ku,"")}var Mu=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Ou(t){return t.match(Mu)||[]}var Tu=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function _u(t){return Tu.test(t)}var Dr="\\ud800-\\udfff",Cu="\\u0300-\\u036f",zu="\\ufe20-\\ufe2f",Au="\\u20d0-\\u20ff",Iu=Cu+zu+Au,Rr="\\u2700-\\u27bf",Br="a-z\\xdf-\\xf6\\xf8-\\xff",$u="\\xac\\xb1\\xd7\\xf7",Lu="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Nu="\\u2000-\\u206f",Zu=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Hr="A-Z\\xc0-\\xd6\\xd8-\\xde",ju="\\ufe0e\\ufe0f",Wr=$u+Lu+Nu+Zu,Vr="['’]",So="["+Wr+"]",Du="["+Iu+"]",Ur="\\d+",Ru="["+Rr+"]",Fr="["+Br+"]",Gr="[^"+Dr+Wr+Ur+Rr+Br+Hr+"]",Bu="\\ud83c[\\udffb-\\udfff]",Hu="(?:"+Du+"|"+Bu+")",Wu="[^"+Dr+"]",qr="(?:\\ud83c[\\udde6-\\uddff]){2}",Xr="[\\ud800-\\udbff][\\udc00-\\udfff]",qe="["+Hr+"]",Vu="\\u200d",ko="(?:"+Fr+"|"+Gr+")",Uu="(?:"+qe+"|"+Gr+")",Po="(?:"+Vr+"(?:d|ll|m|re|s|t|ve))?",Mo="(?:"+Vr+"(?:D|LL|M|RE|S|T|VE))?",Kr=Hu+"?",Yr="["+ju+"]?",Fu="(?:"+Vu+"(?:"+[Wu,qr,Xr].join("|")+")"+Yr+Kr+")*",Gu="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qu="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Xu=Yr+Kr+Fu,Ku="(?:"+[Ru,qr,Xr].join("|")+")"+Xu,Yu=RegExp([qe+"?"+Fr+"+"+Po+"(?="+[So,qe,"$"].join("|")+")",Uu+"+"+Mo+"(?="+[So,qe+ko,"$"].join("|")+")",qe+"?"+ko+"+"+Po,qe+"+"+Mo,qu,Gu,Ur,Ku].join("|"),"g");function Ju(t){return t.match(Yu)||[]}function Qu(t,e,n){return t=Qe(t),e=e,e===void 0?_u(t)?Ju(t):Ou(t):t.match(e)||[]}var ec="['’]",tc=RegExp(ec,"g");function nc(t){return function(e){return vu(Qu(Pu(e).replace(tc,"")),t,"")}}var oc=be.isFinite,rc=Math.min;function ic(t){var e=Math[t];return function(n,o){if(n=Pt(n),o=o==null?0:rc(br(o),292),o&&oc(n)){var r=(Qe(n)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+o));return r=(Qe(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-o))}return e(n)}}var ac=Math.ceil,sc=Math.max;function Dn(t,e,n){e===void 0?e=1:e=sc(br(e),0);var o=t==null?0:t.length;if(!o||e<1)return[];for(var r=0,i=0,a=Array(ac(o/e));r<o;)a[i++]=zr(t,r,r+=e);return a}function lc(){this.__data__=new Oe,this.size=0}function uc(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function cc(t){return this.__data__.get(t)}function dc(t){return this.__data__.has(t)}var fc=200;function hc(t,e){var n=this.__data__;if(n instanceof Oe){var o=n.__data__;if(!ft||o.length<fc-1)return o.push([t,e]),this.size=++n.size,this;n=this.__data__=new Te(o)}return n.set(t,e),this.size=n.size,this}function xe(t){var e=this.__data__=new Oe(t);this.size=e.size}xe.prototype.clear=lc;xe.prototype.delete=uc;xe.prototype.get=cc;xe.prototype.has=dc;xe.prototype.set=hc;var Jr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Oo=Jr&&typeof module=="object"&&module&&!module.nodeType&&module,vc=Oo&&Oo.exports===Jr,To=vc?be.Buffer:void 0;To&&To.allocUnsafe;function pc(t,e){return t.slice()}function gc(t,e){for(var n=-1,o=t==null?0:t.length,r=0,i=[];++n<o;){var a=t[n];e(a,n,t)&&(i[r++]=a)}return i}function mc(){return[]}var bc=Object.prototype,yc=bc.propertyIsEnumerable,_o=Object.getOwnPropertySymbols,wc=_o?function(t){return t==null?[]:(t=Object(t),gc(_o(t),function(e){return yc.call(t,e)}))}:mc;function xc(t,e,n){var o=e(t);return ge(t)?o:Zl(o,n(t))}function Co(t){return xc(t,Nn,wc)}var bn=Ve(be,"DataView"),yn=Ve(be,"Promise"),Ke=Ve(be,"Set"),zo="[object Map]",Ec="[object Object]",Ao="[object Promise]",Io="[object Set]",$o="[object WeakMap]",Lo="[object DataView]",Sc=We(bn),kc=We(ft),Pc=We(yn),Mc=We(Ke),Oc=We(pn),Ce=He;(bn&&Ce(new bn(new ArrayBuffer(1)))!=Lo||ft&&Ce(new ft)!=zo||yn&&Ce(yn.resolve())!=Ao||Ke&&Ce(new Ke)!=Io||pn&&Ce(new pn)!=$o)&&(Ce=function(t){var e=He(t),n=e==Ec?t.constructor:void 0,o=n?We(n):"";if(o)switch(o){case Sc:return Lo;case kc:return zo;case Pc:return Ao;case Mc:return Io;case Oc:return $o}return e});var _t=be.Uint8Array;function Tc(t){var e=new t.constructor(t.byteLength);return new _t(e).set(new _t(t)),e}function _c(t,e){var n=Tc(t.buffer);return new t.constructor(n,t.byteOffset,t.length)}function Cc(t){return typeof t.constructor=="function"&&!$n(t)?Ba(Tr(t)):{}}var zc="__lodash_hash_undefined__";function Ac(t){return this.__data__.set(t,zc),this}function Ic(t){return this.__data__.has(t)}function ht(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new Te;++e<n;)this.add(t[e])}ht.prototype.add=ht.prototype.push=Ac;ht.prototype.has=Ic;function $c(t,e){for(var n=-1,o=t==null?0:t.length;++n<o;)if(e(t[n],n,t))return!0;return!1}function Qr(t,e){return t.has(e)}var Lc=1,Nc=2;function ei(t,e,n,o,r,i){var a=n&Lc,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var f=i.get(t),h=i.get(e);if(f&&h)return f==e&&h==t;var s=-1,l=!0,d=n&Nc?new ht:void 0;for(i.set(t,e),i.set(e,t);++s<u;){var b=t[s],E=e[s];if(o)var g=a?o(E,b,s,e,t,i):o(b,E,s,t,e,i);if(g!==void 0){if(g)continue;l=!1;break}if(d){if(!$c(e,function(v,w){if(!Qr(d,w)&&(b===v||r(b,v,n,o,i)))return d.push(w)})){l=!1;break}}else if(!(b===E||r(b,E,n,o,i))){l=!1;break}}return i.delete(t),i.delete(e),l}function Zc(t){var e=-1,n=Array(t.size);return t.forEach(function(o,r){n[++e]=[r,o]}),n}function Rn(t){var e=-1,n=Array(t.size);return t.forEach(function(o){n[++e]=o}),n}var jc=1,Dc=2,Rc="[object Boolean]",Bc="[object Date]",Hc="[object Error]",Wc="[object Map]",Vc="[object Number]",Uc="[object RegExp]",Fc="[object Set]",Gc="[object String]",qc="[object Symbol]",Xc="[object ArrayBuffer]",Kc="[object DataView]",No=$e?$e.prototype:void 0,en=No?No.valueOf:void 0;function Yc(t,e,n,o,r,i,a){switch(n){case Kc:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xc:return!(t.byteLength!=e.byteLength||!i(new _t(t),new _t(e)));case Rc:case Bc:case Vc:return mt(+t,+e);case Hc:return t.name==e.name&&t.message==e.message;case Uc:case Gc:return t==e+"";case Wc:var u=Zc;case Fc:var c=o&jc;if(u||(u=Rn),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;o|=Dc,a.set(t,e);var h=ei(u(t),u(e),o,r,i,a);return a.delete(t),h;case qc:if(en)return en.call(t)==en.call(e)}return!1}var Jc=1,Qc=Object.prototype,ed=Qc.hasOwnProperty;function td(t,e,n,o,r,i){var a=n&Jc,u=Co(t),c=u.length,f=Co(e),h=f.length;if(c!=h&&!a)return!1;for(var s=c;s--;){var l=u[s];if(!(a?l in e:ed.call(e,l)))return!1}var d=i.get(t),b=i.get(e);if(d&&b)return d==e&&b==t;var E=!0;i.set(t,e),i.set(e,t);for(var g=a;++s<c;){l=u[s];var v=t[l],w=e[l];if(o)var x=a?o(w,v,l,e,t,i):o(v,w,l,t,e,i);if(!(x===void 0?v===w||r(v,w,n,o,i):x)){E=!1;break}g||(g=l=="constructor")}if(E&&!g){var y=t.constructor,p=e.constructor;y!=p&&"constructor"in t&&"constructor"in e&&!(typeof y=="function"&&y instanceof y&&typeof p=="function"&&p instanceof p)&&(E=!1)}return i.delete(t),i.delete(e),E}var nd=1,Zo="[object Arguments]",jo="[object Array]",wt="[object Object]",od=Object.prototype,Do=od.hasOwnProperty;function rd(t,e,n,o,r,i){var a=ge(t),u=ge(e),c=a?jo:Ce(t),f=u?jo:Ce(e);c=c==Zo?wt:c,f=f==Zo?wt:f;var h=c==wt,s=f==wt,l=c==f;if(l&&Tt(t)){if(!Tt(e))return!1;a=!0,h=!1}if(l&&!h)return i||(i=new xe),a||Ln(t)?ei(t,e,n,o,r,i):Yc(t,e,c,n,o,r,i);if(!(n&nd)){var d=h&&Do.call(t,"__wrapped__"),b=s&&Do.call(e,"__wrapped__");if(d||b){var E=d?t.value():t,g=b?e.value():e;return i||(i=new xe),r(E,g,n,o,i)}}return l?(i||(i=new xe),td(t,e,n,o,r,i)):!1}function jt(t,e,n,o,r){return t===e?!0:t==null||e==null||!Le(t)&&!Le(e)?t!==t&&e!==e:rd(t,e,n,o,jt,r)}var id=1,ad=2;function sd(t,e,n,o){var r=n.length,i=r;if(t==null)return!i;for(t=Object(t);r--;){var a=n[r];if(a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=n[r];var u=a[0],c=t[u],f=a[1];if(a[2]){if(c===void 0&&!(u in t))return!1}else{var h=new xe,s;if(!(s===void 0?jt(f,c,id|ad,o,h):s))return!1}}return!0}function ti(t){return t===t&&!me(t)}function ld(t){for(var e=Nn(t),n=e.length;n--;){var o=e[n],r=t[o];e[n]=[o,r,ti(r)]}return e}function ni(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function ud(t){var e=ld(t);return e.length==1&&e[0][2]?ni(e[0][0],e[0][1]):function(n){return n===t||sd(n,t,e)}}function cd(t,e){return t!=null&&e in Object(t)}function dd(t,e,n){e=Mr(e,t);for(var o=-1,r=e.length,i=!1;++o<r;){var a=Zt(e[o]);if(!(i=t!=null&&n(t,a)))break;t=t[a]}return i||++o!=r?i:(r=t==null?0:t.length,!!r&&In(r)&&zn(a,r)&&(ge(t)||Ot(t)))}function fd(t,e){return t!=null&&dd(t,e,cd)}var hd=1,vd=2;function pd(t,e){return Zn(t)&&ti(e)?ni(Zt(t),e):function(n){var o=Nl(n,t);return o===void 0&&o===e?fd(n,t):jt(e,o,hd|vd)}}function gd(t){return function(e){return e?.[t]}}function md(t){return function(e){return Or(e,t)}}function bd(t){return Zn(t)?gd(Zt(t)):md(t)}function yd(t){return typeof t=="function"?t:t==null?_n:typeof t=="object"?ge(t)?pd(t[0],t[1]):ud(t):bd(t)}function wd(t){return function(e,n,o){for(var r=-1,i=Object(e),a=o(e),u=a.length;u--;){var c=a[++r];if(n(i[c],c,i)===!1)break}return e}}var oi=wd();function xd(t,e){return t&&oi(t,e,Nn)}function Ed(t,e){return function(n,o){if(n==null)return n;if(!tt(n))return t(n,o);for(var r=n.length,i=-1,a=Object(n);++i<r&&o(a[i],i,a)!==!1;);return n}}var Sd=Ed(xd),tn=function(){return be.Date.now()},kd="Expected a function",Pd=Math.max,Md=Math.min;function ri(t,e,n){var o,r,i,a,u,c,f=0,h=!1,s=!1,l=!0;if(typeof t!="function")throw new TypeError(kd);e=Pt(e)||0,me(n)&&(h=!!n.leading,s="maxWait"in n,i=s?Pd(Pt(n.maxWait)||0,e):i,l="trailing"in n?!!n.trailing:l);function d(m){var S=o,M=r;return o=r=void 0,f=m,a=t.apply(M,S),a}function b(m){return f=m,u=setTimeout(v,e),h?d(m):a}function E(m){var S=m-c,M=m-f,I=e-S;return s?Md(I,i-M):I}function g(m){var S=m-c,M=m-f;return c===void 0||S>=e||S<0||s&&M>=i}function v(){var m=tn();if(g(m))return w(m);u=setTimeout(v,E(m))}function w(m){return u=void 0,l&&o?d(m):(o=r=void 0,a)}function x(){u!==void 0&&clearTimeout(u),f=0,o=c=r=u=void 0}function y(){return u===void 0?a:w(tn())}function p(){var m=tn(),S=g(m);if(o=arguments,r=this,c=m,S){if(u===void 0)return b(c);if(s)return clearTimeout(u),u=setTimeout(v,e),d(c)}return u===void 0&&(u=setTimeout(v,e)),a}return p.cancel=x,p.flush=y,p}function wn(t,e,n){(n!==void 0&&!mt(t[e],n)||n===void 0&&!(e in t))&&An(t,e,n)}function Od(t){return Le(t)&&tt(t)}function xn(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}function Td(t){return ls(t,Pr(t))}function _d(t,e,n,o,r,i,a){var u=xn(t,n),c=xn(e,n),f=a.get(c);if(f){wn(t,n,f);return}var h=i?i(u,c,n+"",t,e,a):void 0,s=h===void 0;if(s){var l=ge(c),d=!l&&Tt(c),b=!l&&!d&&Ln(c);h=c,l||d||b?ge(u)?h=u:Od(u)?h=Va(u):d?(s=!1,h=pc(c)):b?(s=!1,h=_c(c)):h=[]:Cr(c)||Ot(c)?(h=u,Ot(u)?h=Td(u):(!me(u)||Cn(u))&&(h=Cc(c))):s=!1}s&&(a.set(c,h),r(h,c,o,i,a),a.delete(c)),wn(t,n,h)}function Bn(t,e,n,o,r){t!==e&&oi(e,function(i,a){if(r||(r=new xe),me(i))_d(t,e,a,n,Bn,o,r);else{var u=o?o(xn(t,a),i,a+"",t,e,r):void 0;u===void 0&&(u=i),wn(t,a,u)}},Pr)}var Cd=yr(function(t,e,n,o){Bn(t,e,n,o)});function zd(t,e){var n=-1,o=tt(t)?Array(t.length):[];return Sd(t,function(r,i,a){o[++n]=e(r,i,a)}),o}function Gv(t,e){var n=ge(t)?gr:zd;return n(t,yd(e))}function Ae(t,e){return jt(t,e)}var qv=nc(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ad=yr(function(t,e,n){Bn(t,e,n)}),Ro=ic("round"),Id="Expected a function";function Xv(t,e,n){var o=!0,r=!0;if(typeof t!="function")throw new TypeError(Id);return me(n)&&(o="leading"in n?!!n.leading:o,r="trailing"in n?!!n.trailing:r),ri(t,e,{leading:o,maxWait:e,trailing:r})}var $d=1/0,Ld=Ke&&1/Rn(new Ke([,-0]))[1]==$d?function(t){return new Ke(t)}:Wa,Nd=200;function Zd(t,e,n){var o=-1,r=ns,i=t.length,a=!0,u=[],c=u;if(i>=Nd){var f=Ld(t);if(f)return Rn(f);a=!1,r=Qr,c=new ht}else c=u;e:for(;++o<i;){var h=t[o],s=h;if(h=h!==0?h:0,a&&s===s){for(var l=c.length;l--;)if(c[l]===s)continue e;u.push(h)}else r(c,s,n)||(c!==u&&c.push(s),u.push(h))}return u}function jd(t){return t&&t.length?Zd(t):[]}var Dd=Object.defineProperty,Rd=Object.defineProperties,Bd=Object.getOwnPropertyDescriptors,Bo=Object.getOwnPropertySymbols,Hd=Object.prototype.hasOwnProperty,Wd=Object.prototype.propertyIsEnumerable,ue=Math.pow,Ho=(t,e,n)=>e in t?Dd(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ae=(t,e)=>{for(var n in e||(e={}))Hd.call(e,n)&&Ho(t,n,e[n]);if(Bo)for(var n of Bo(e))Wd.call(e,n)&&Ho(t,n,e[n]);return t},Dt=(t,e)=>Rd(t,Bd(e)),we=(t,e,n)=>new Promise((o,r)=>{var i=c=>{try{u(n.next(c))}catch(f){r(f)}},a=c=>{try{u(n.throw(c))}catch(f){r(f)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(i,a);u((n=n.apply(t,e)).next())});const Vd=["paths","node-labels","nodes","focusring","edge-labels","edges","base","grid","background","root"];function ze(t){return oa(t)?t:Me(t)}function G(t,e="Parameter"){if(t==null)throw new Error(`${e} is null`);return t}const ii=Symbol("containers");function Ud(t){Ze(ii,t)}function Hn(){const t=G(Ne(ii),"containers");return{container:t.container,svg:t.svg,viewport:t.viewport,svgPanZoom:t.svgPanZoom}}class z{static value(e,n){return e instanceof Function?e(n):e}static values(e,n){return Object.values(e).filter(o=>o instanceof Function).length===0?e:Object.fromEntries(Object.entries(e).map(([o,r])=>[o,r instanceof Function?r(n):r]))}}var N=(t=>(t.CENTER="center",t.NORTH="north",t.NORTH_EAST="north-east",t.EAST="east",t.SOUTH_EAST="south-east",t.SOUTH="south",t.SOUTH_WEST="south-west",t.WEST="west",t.NORTH_WEST="north-west",t))(N||{});function nn(t){const e={};return Object.assign(e,t(e))}function Kv(t){return t}function Wo(t,e,n){const o=z.values(e.normal,t);return o.type=="circle"?{width:o.radius*2*n,height:o.radius*2*n}:{width:o.width*n,height:o.height*n}}function Fd(t,e,n,o){const r=Math.abs(t.x-n.x)<e.width/2+o.width/2,i=Math.abs(t.y-n.y)<e.height/2+o.height/2;return r&&i}function bt(t,e){let n=0;return e===1||t===void 0||t==="none"?n=t??0:typeof t=="string"?n=t.split(/\s+/).map(o=>parseInt(o)*e).filter(o=>!isNaN(o)).join(" "):n=t*e,n&&n!=="0"?n:void 0}function Rt(t){let e=0;if(t===void 0||t==="none")e=0;else if(typeof t=="string"){const n=t.split(/\s+/).map(o=>parseInt(o)).filter(o=>!isNaN(o));n.length%2===0?e=n.reduce((o,r)=>o+r,0):e=n.reduce((o,r)=>o+r,0)*2}else e=t*2;return e}const Vo=20;class ai{activate(e){const{nodePositions:n,nodes:o,configs:r,emitter:i,scale:a,svgPanZoom:u}=e,c=s=>{for(const[l,d]of Object.entries(s)){const b=this.getOrCreateNodePosition(n,l);this.setNodePosition(b,d)}},f=s=>{const l=s.filter(E=>!(E in n.value)),d=u.getViewArea(),b=a.value;for(const E of l){const g=o.value[E],v=Wo(g,r.node,b),w=ae({},d.center);for(;;){let y=!1;for(const[p,m]of Object.entries(n.value)){if(E===p)continue;const S=o.value[p];if(!S)continue;const M=Wo(S,r.node,b);if(y=Fd(w,v,m,M),y)break}if(y)w.x+=v.width+Vo*b,w.x+v.width/2>d.box.right&&(w.x=d.center.x,w.y+=v.height+Vo*b);else break}const x=this.getOrCreateNodePosition(n,E);this.setNodePosition(x,w)}};f(Object.keys(o.value));const h=F(()=>Ae(new Set(Object.keys(o.value)),new Set(Object.keys(n.value))),s=>{s||f(Object.keys(o.value))});i.on("node:dragstart",c),i.on("node:pointermove",c),i.on("node:dragend",c),this.onDeactivate=()=>{h(),i.off("node:dragstart",c),i.off("node:pointermove",c),i.off("node:dragend",c)}}deactivate(){this.onDeactivate&&this.onDeactivate()}setNodePosition(e,n){e.value.x=Ro(n.x,3),e.value.y=Ro(n.y,3)}getOrCreateNodePosition(e,n){const o=Pe(e.value,n);return o.value||(o.value={x:0,y:0}),o}}function Gd(){return{view:{scalingObjects:!1,panEnabled:!0,zoomEnabled:!0,minZoomLevel:.1,maxZoomLevel:64,doubleClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,boxSelectionEnabled:!1,autoPanAndZoomOnLoad:"center-content",fitContentMargin:"8%",autoPanOnResize:!0,layoutHandler:new ai,onSvgPanZoomInitialized:void 0,grid:{visible:!1,interval:10,thickIncrements:5,line:{color:"#e0e0e0",width:1,dasharray:1},thick:{color:"#cccccc",width:1,dasharray:0}},selection:{box:{color:"#0000ff20",strokeWidth:1,strokeColor:"#aaaaff",strokeDasharray:0},detector:t=>{const e=/Mac OS/.test(navigator.userAgent)?t.metaKey:t.ctrlKey;return t.type==="keydown"?e:!e}},builtInLayerOrder:[],onBeforeInitialDisplay:void 0},node:nn(t=>({normal:{type:"circle",radius:16,width:32,height:32,borderRadius:4,color:"#4466cc",strokeWidth:0,strokeColor:"#000000",strokeDasharray:0},hover:{type:e=>z.value(t.normal.type,e),radius:e=>{var n;return((n=z.value(t.normal.radius,e))!=null?n:0)+2},width:e=>{var n;return((n=z.value(t.normal.width,e))!=null?n:0)+2},height:e=>{var n;return((n=z.value(t.normal.height,e))!=null?n:0)+2},borderRadius:e=>{var n;return(n=z.value(t.normal.borderRadius,e))!=null?n:0},strokeWidth:e=>z.value(t.normal.strokeWidth,e),strokeColor:e=>z.value(t.normal.strokeColor,e),strokeDasharray:e=>z.value(t.normal.strokeDasharray,e),color:"#3355bb"},selected:void 0,draggable:!0,selectable:!1,label:{visible:!0,fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,direction:N.SOUTH,directionAutoAdjustment:!1,text:"name",handleNodeEvents:!0},focusring:{visible:!0,width:4,padding:3,color:"#eebb00"},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0})),edge:nn(t=>({normal:{width:2,color:"#4466cc",dasharray:0,linecap:"butt",animate:!1,animationSpeed:50},hover:{width:e=>z.value(t.normal.width,e)+1,color:"#3355bb",dasharray:e=>z.value(t.normal.dasharray,e),linecap:e=>z.value(t.normal.linecap,e),animate:e=>z.value(t.normal.animate,e),animationSpeed:e=>z.value(t.normal.animationSpeed,e)},selected:{width:e=>z.value(t.normal.width,e)+1,color:"#dd8800",dasharray:e=>{const n=z.value(t.normal.width,e);return`${n*1.5} ${n*2}`},linecap:e=>z.value(t.normal.linecap,e),animate:e=>z.value(t.normal.animate,e),animationSpeed:e=>z.value(t.normal.animationSpeed,e)},selectable:!1,gap:3,type:"straight",marker:{source:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null},target:{type:"none",width:5,height:5,margin:-1,offset:0,units:"strokeWidth",color:null}},margin:null,summarize:(e,n)=>n.edge.type=="curve"?!1:null,summarized:{label:{fontSize:10,lineHeight:1,color:"#4466cc"},shape:{type:"rect",radius:6,width:12,height:12,borderRadius:3,color:"#ffffff",strokeWidth:1,strokeColor:"#4466cc",strokeDasharray:void 0},stroke:{width:5,color:"#4466cc",dasharray:void 0,linecap:void 0,animate:!1,animationSpeed:50}},selfLoop:{radius:12,isClockwise:!0,offset:10,angle:270},keepOrder:"clock",label:{fontFamily:void 0,fontSize:11,lineHeight:1.1,color:"#000000",background:void 0,margin:4,padding:4},zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0}})),path:nn(t=>({visible:!1,clickable:!1,hoverable:!1,curveInNode:!1,end:"centerOfNode",margin:0,path:Me({width:6,color:e=>{const n=["#d5000088","#c5116288","#aa00ff88","#6200ea88","#304ffe88","#2962ff88","#0091ea88","#00b8d488","#00bfa588","#00c85388","#64dd1788","#aeea0088","#ffd60088","#ffab0088","#ff6d0088","#dd2c0088"],o=e.edges.map(r=>r.split("").reduce((i,a)=>(i=(i<<5)-i+a.charCodeAt(0),i&i),0)).reduce((r,i)=>r+i,0);return n[Math.abs(o)%n.length]},dasharray:void 0,linecap:"round",linejoin:"round",animate:!1,animationSpeed:50}),normal:{width:e=>z.value(t.path.width,e),color:e=>z.value(t.path.color,e),dasharray:e=>z.value(t.path.dasharray,e),linecap:e=>z.value(t.path.linecap,e),linejoin:e=>z.value(t.path.linejoin,e),animate:e=>z.value(t.path.animate,e),animationSpeed:e=>z.value(t.path.animationSpeed,e)},hover:{width:e=>z.value(t.normal.width,e)+2,color:e=>z.value(t.normal.color,e),dasharray:e=>z.value(t.normal.dasharray,e),linecap:e=>z.value(t.normal.linecap,e),linejoin:e=>z.value(t.normal.linejoin,e),animate:e=>z.value(t.normal.animate,e),animationSpeed:e=>z.value(t.normal.animationSpeed,e)},selected:{width:e=>z.value(t.normal.width,e)+2,color:e=>z.value(t.normal.color,e),dasharray:"6 12",linecap:e=>z.value(t.normal.linecap,e),linejoin:e=>z.value(t.normal.linejoin,e),animate:e=>z.value(t.normal.animate,e),animationSpeed:e=>z.value(t.normal.animationSpeed,e)},selectable:!1,zOrder:{enabled:!1,zIndex:0,bringToFrontOnHover:!0,bringToFrontOnSelected:!0},transition:void 0}))}}const si=Symbol("style");function qd(t,e){return Cr(t)?Ad(t,e):e}function Xd(t){const e=Me(Gd()),n=Object.keys(e);for(const o of n)F(()=>t.value[o],()=>{Cd(e[o],t.value[o]||{},qd)},{immediate:!0,deep:!0});return Ze(si,e),e}function Bt(t){return G(Ne(si),`Configs(${t})`)[t]}function Kd(){return Bt("view")}function Ht(){return Bt("node")}function Wt(){return Bt("edge")}function li(){return Bt("path")}let Yd=1;function Jd(){return Yd++}function de(t){return Object.entries(t)}function St(t,e){const n=new Set(Object.keys(t));de(e).forEach(([o,r])=>{Ae(t[o],r)||(t[o]=r),n.delete(o)}),n.forEach(o=>delete t[o])}function Qd(t){return t instanceof Promise||t&&typeof t.then=="function"}function ef(t,e,n){const o=ze({edgeLayoutPoints:{},edgeGroups:{},summarizedEdges:{}});return he(()=>{const{edgeLayoutPoints:r,edgeGroups:i}=nf(n,t.value,e.value);St(o.edgeLayoutPoints,r),St(o.edgeGroups,i)}),he(()=>{const r={};for(const[i,{edges:a,groupWidth:u}]of Object.entries(o.edgeGroups)){let c=!1;if(u==0)c=!1;else if(n.edge.summarize instanceof Function){const f=n.edge.summarize(a,n);f===null?c=Uo(t.value,a,n,u):c=f}else n.edge.summarize?c=Uo(t.value,a,n,u):c=!1;o.edgeGroups[i].summarize=c,c&&Object.keys(a).forEach(f=>r[f]=!0)}St(o.summarizedEdges,r)}),o}function tf(t,e,n,o,r,i){return t?e?Fo(t.edge,n,o,r,0,0,i):Fo(t.edge,n,o,r,t.groupWidth,t.pointInGroup,i):{p1:{x:0,y:0},p2:{x:0,y:0}}}function nf(t,e,n){const o={},r={},i={};for(const[u,c]of Object.entries(n)){if(!(c.source in e&&c.target in e))continue;const f=[c.source,c.target].sort().join("<=>"),h=i[f]||{};h[u]=c,i[f]=h}const a=t.edge.gap instanceof Function?t.edge.gap:(u,c)=>t.edge.gap;for(const[u,c]of Object.entries(i)){const f=Object.keys(c).length;if(f==0)continue;const h=a(c,t),[s,l]=Object.entries(c)[0];if(f===1)o[s]={edge:l,pointInGroup:0,groupWidth:0},r[u]={edges:c,groupWidth:0,summarize:!1};else{let d=0;const b=Object.entries(c).map(([v,w])=>{let x=z.value(t.edge.normal.width,w);return isNaN(+x)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",v,x),x=1),x/2}),E=Object.entries(c).map(([v,w],x)=>(x>0&&(d+=b[x-1]+h+b[x]),[v,w,d])),g=d;E.forEach(([v,w,x])=>{o[v]={edge:w,pointInGroup:x,groupWidth:g}}),r[u]={edges:c,groupWidth:g,summarize:!1}}}return{edgeLayoutPoints:o,edgeGroups:r}}function Uo(t,e,n,o){if(Object.entries(e).length===1)return!1;const r=Math.min(...Object.values(e).flatMap(i=>[t[i.source],t[i.target]]).filter(i=>i).map(i=>{const a=z.values(n.node.normal,i);return a.type==="circle"?a.radius*2:Math.min(a.width,a.height)}));return o>r}function Fo(t,e,n,o,r,i,a){var u,c,f,h,s,l,d,b;let E,g,v,w;return t.source<t.target?[E,g,v,w]=Go((u=e?.x)!=null?u:0,(c=e?.y)!=null?c:0,(f=n?.x)!=null?f:0,(h=n?.y)!=null?h:0,o,r,i,a):[v,w,E,g]=Go((s=n?.x)!=null?s:0,(l=n?.y)!=null?l:0,(d=e?.x)!=null?d:0,(b=e?.y)!=null?b:0,o,r,i,a),{p1:{x:E,y:g},p2:{x:v,y:w}}}function Go(t,e,n,o,r,i,a,u){const c=n-t,f=o-e;let h=(i/2-a)*r;if(h!==0&&u!=="clock"){const s=Math.atan2(o-e,n-t);if(u==="vertical"){const l=Math.PI/2;(s<-l||s>=l)&&(h*=-1)}else u==="horizontal"&&s<0&&(h*=-1)}if(c===0){const s=f<0?-1:1;return[t+h*s,e,n+h*s,o]}else if(f===0){const s=c<0?1:-1;return[t,e+h*s,n,o+h*s]}else{const s=-1/(f/c);f<0&&(h=-h);const l=h/Math.sqrt(1+Math.pow(s,2));return[t+l,e+l*s,n+l,o+l*s]}}function ui(t,e,n){return n||(n={x:0,y:0}),n.x=t.x+e.x,n.y=t.y+e.y,n}function Wn(t,e,n){return n||(n={x:0,y:0}),n.x=t.x-e.x,n.y=t.y-e.y,n}function ci(t,e,n){return n||(n={x:0,y:0}),n.x=t.x*e.x,n.y=t.y*e.y,n}function di(t,e,n){return n||(n={x:0,y:0}),n.x=t.x*e,n.y=t.y*e,n}function Vn(t,e,n){return n||(n={x:0,y:0}),n.x=t.x/e.x,n.y=t.y/e.y,n}function fi(t,e){return t.x*e.x+t.y*e.y}function hi(t,e){return t.x*e.y-t.y*e.x}function Un(t){return t.x*t.x+t.y*t.y}function Fn(t){return Math.sqrt(Un(t))}function Gn(t,e){const n=t.x-e.x,o=t.y-e.y;return n*n+o*o}function vi(t,e){return Math.sqrt(Gn(t,e))}function pi(t,e){e||(e={x:0,y:0});const n=Fn(t);return n===0?(e.x=1,e.y=0):Vn(t,{x:n,y:n},e),e}function Ct(t,e,n){n||(n={x:0,y:0});const o=t.x*Math.cos(e)-t.y*Math.sin(e),r=t.x*Math.sin(e)+t.y*Math.cos(e);return n.x=o,n.y=r,n}const of=180/Math.PI;function rf(t){return t*of}function qn(t){return Math.atan2(t.y,t.x)}function Xn(t){return rf(qn(t))}const af=Object.freeze(Object.defineProperty({__proto__:null,add:ui,angle:qn,angleDegree:Xn,cross:hi,distance:vi,distanceSquared:Gn,divide:Vn,dot:fi,length:Fn,lengthSquared:Un,multiply:ci,multiplyScalar:di,normalize:pi,rotate:Ct,subtract:Wn},Symbol.toStringTag,{value:"Module"}));class W{static fromArray(e){return new W(e[0]||0,e[1]||0)}static fromObject(e){return new W(e.x,e.y)}constructor(e,n){this.x=e,this.y=n}add(e){return ui(this,e,this)}subtract(e){return Wn(this,e,this)}multiply(e){return ci(this,e,this)}multiplyScalar(e){return di(this,e,this)}divide(e){return Vn(this,e,this)}dot(e){return fi(this,e)}cross(e){return hi(this,e)}lengthSquared(){return Un(this)}length(){return Fn(this)}distanceSquared(e){return Gn(this,e)}distance(e){return vi(this,e)}normalize(){return pi(this,this)}angle(){return qn(this)}angleDegree(){return Xn(this)}rotate(e){return Ct(this,e,this)}isEqualTo(e){return this.x===e.x&&this.y===e.y}clone(){return new W(this.x,this.y)}toObject(){return{x:this.x,y:this.y}}toArray(){return[this.x,this.y]}}const ee=ae({Vector2D:W},af);class J{constructor(e,n,o){this.source=e,this.target=n,this.v=o}static fromLinePosition(e){const n=W.fromObject(e.p1),o=W.fromObject(e.p2);return new J(n,o,Ye(n,o))}static fromPositions(e,n){const o=W.fromObject(e),r=W.fromObject(n);return new J(o,r,Ye(o,r))}static fromVectors(e,n){return new J(e,n,Ye(e,n))}}function Ye(t,e){return e.clone().subtract(t)}function sf(t){return[W.fromObject(t.p1),W.fromObject(t.p2)]}function lf(t){return new W((t.p1.x+t.p2.x)/2,(t.p1.y+t.p2.y)/2)}function zt(t,e){return{p1:t,p2:e}}function En(t,e,n){const o=J.fromLinePosition(t);return uf(o,e,n)}function uf(t,e,n){const o=t.v.clone().normalize(),r=t.source.clone().add(o.clone().multiplyScalar(e)),i=t.target.clone().subtract(o.clone().multiplyScalar(n));let a=r.toObject(),u=i.toObject();const c=Ye(r,i);if(t.v.angle()*c.angle()<0){const f=new W((a.x+u.x)/2,(a.y+u.y)/2),h=f.clone().add(o.multiplyScalar(.5));a=f.toObject(),u=h.toObject()}return{p1:a,p2:u}}function cf(t){return{p1:t.p2,p2:t.p1}}function it(t){const e=t.v.clone().normalize().rotate(Math.PI/2);return J.fromVectors(t.target,t.target.clone().add(e))}function Kn(t,e){const n=e.v.clone().normalize(),o=e.source,r=ee.subtract(t,o),i=n.dot(r);return o.clone().add(n.multiplyScalar(i))}function Vt(t,e,n,o){if(!(ee.lengthSquared(ee.subtract(e,n))-o*o<=Math.pow(1,-10)))return null;const r=J.fromVectors(t,e),i=Kn(n,r),a=ee.length(ee.subtract(i,n));if(o<a)return null;if(o===a)return i;const u=Math.sqrt(ue(o,2)-ue(a,2)),c=r.v.normalize().multiplyScalar(u);return i.subtract(c)}function df(t,e,n,o,r){if(!(ee.lengthSquared(ee.subtract(e,n))-o*o<=Math.pow(1,-10)))return null;const i=J.fromVectors(t,e),a=Kn(n,i),u=ee.length(ee.subtract(a,n));if(o<u)return null;if(o===u)return a;const c=Math.sqrt(ue(o,2)-ue(u,2)),f=i.v.normalize().multiplyScalar(c),h=a.clone().add(f),s=a.clone().subtract(f),l=r.distance(h),d=r.distance(s);return Math.abs(l-d)<2?s:l<d?h:s}function De(t,e){const n=ee.subtract(e.source,t.source),o=t.v,r=e.v,i=ee.cross(n,o)/ee.cross(o,r);return e.source.clone().add(r.clone().multiplyScalar(i))}function vt(t,e,n,o,r){const i=t,a=n.clone().subtract(i),u=a.length(),c=e+o;if(c<u)return null;const f=Math.abs(e-o);if(u<f)return null;if(u===c){const p=a.clone().normalize(),m=t.clone().add(p.multiplyScalar(e));return r?m:[m,m]}if(u===f){const p=a.clone().normalize(),m=e>o,S=t.clone().add(p.multiplyScalar(m?e:-e));return r?S:[S,S]}const h=e,s=o,l=(ue(u,2)+ue(h,2)-ue(s,2))/(2*u*h),d=h*l,b=Math.sqrt(ue(h,2)-ue(d,2)),E=a.clone().normalize(),g=new W(-E.y,E.x),v=E.clone().multiplyScalar(d),w=g.clone().multiplyScalar(b),x=t.clone().add(v).add(w),y=t.clone().add(v).subtract(w);if(r){const p=x.distance(r),m=y.distance(r);return p<m?x:y}else return[x,y]}function qo(t,e,n,o){const r=J.fromPositions(t,e),i=(n.width+n.strokeWidth)/2*o,a=(n.height+n.strokeWidth)/2*o,u=n.borderRadius>0?(n.borderRadius+n.strokeWidth/2)*o:0,c=(r.v.angle()-Math.PI/2)%Math.PI,f=Math.PI/2-c%Math.PI,h=a*Math.abs(Math.tan(c)),s=i*Math.abs(Math.tan(f)),l=h<=i-u,d=s<=a-u;if(l||d||u===0)return Math.sqrt(l?ue(a,2)+ue(h,2):ue(i,2)+ue(s,2));{const b=e.x-i+u,E=e.y-a+u,g=e.x+i-u,v=e.y+a-u,w=[new W(b,E),new W(g,E),new W(g,v),new W(b,v)],x=Math.floor((r.v.angleDegree()+360)%360/90),y=w[x],p=Vt(r.source,Kn(y,r),y,u);return p?Ye(p,r.target).length():Ye(y,r.target).length()+u}}function gi(t,e,n,o,r){const i=J.fromLinePosition(t),a=i.v.clone().normalize(),u=o===0?i.source:i.source.clone().add(a.clone().multiplyScalar(o*r)),c=o===0?i.target:i.target.clone().subtract(a.clone().multiplyScalar(o*r)),f=(e.width/2+n)*r,h=new W(-a.y,a.x).multiplyScalar(f);let s=ee.subtract(u,h),l=ee.add(u,h),d=ee.subtract(c,h),b=ee.add(c,h);const E=i.v.angleDegree();return(E<-90||E>=90)&&([s,l]=[l,s],[d,b]=[b,d]),{source:{above:s,below:l},target:{above:d,below:b}}}function ff(t,e,n,o){let r;n.type==="circle"?r=n.radius+n.strokeWidth/2:r=qo(e,t,n,1);let i;return o.type==="circle"?i=o.radius+o.strokeWidth/2:i=qo(t,e,o,1),[r,i]}function Ie(t,e,n){const{x:o,y:r}=t,i=o-e.x,a=r-e.y;return{x:i*Math.cos(n)-a*Math.sin(n)+e.x,y:i*Math.sin(n)+a*Math.cos(n)+e.y}}function Sn(t){return t>0?-(Math.PI*2-t):Math.PI*2+t}function kn(t,e,n,o){const r=[],i=J.fromVectors(e,t),a=J.fromVectors(e,n);let u=Je(i,a);o*u<0&&(u=Sn(u));const c=W.fromObject(Ie(t,e,-u/2)),f=J.fromVectors(e,c),h=it(f),s=Je(i,f);let l=it(i);if(Math.abs(s)<Math.PI/2){const b=De(l,h);r.push(b)}else{const b=W.fromObject(Ie(c,e,s/2)),E=it(J.fromVectors(e,W.fromObject(b))),g=De(l,E),v=De(E,h);r.push(g,b,v)}r.push(c);const d=Je(a,f);if(l=it(a),Math.abs(d)<Math.PI/2){const b=De(l,h);r.push(b)}else{const b=W.fromObject(Ie(c,e,d/2)),E=it(J.fromVectors(e,W.fromObject(b))),g=De(h,E),v=De(E,l);r.push(g,b,v)}return r}function Je(t,e){return Math.atan2(t.v.y*e.v.x-t.v.x*e.v.y,t.v.x*e.v.x+t.v.y*e.v.y)}function hf(t,e,n){const o=t.x,r=t.y,i=e.x,a=e.y,u=n.x,c=n.y,f=o-i,h=r-a,s=u-i,l=c-a;if(f===0&&h===0||s===0&&l===0)return[t,0];const d=(l*(f*(o+i)+h*(r+a))-h*(s*(u+i)+l*(c+a)))/(2*f*l-2*h*s),b=(-s*(f*(o+i)+h*(r+a))+f*(s*(u+i)+l*(c+a)))/(2*f*l-2*h*s),E=Math.sqrt(Math.pow(o-d,2)+Math.pow(r-b,2));return[new W(d,b),E]}function Xe(t){return t.type=="circle"?t.radius:Math.min(t.width,t.height)/2}function vf(t){const e=Object.values(t);if(e.length===0)return{top:0,bottom:0,left:0,right:0};const n={top:e[0].y,bottom:e[0].y,left:e[0].x,right:e[0].x};return e.forEach(o=>{n.top=Math.min(o.y,n.top),n.bottom=Math.max(o.y,n.bottom),n.left=Math.min(o.x,n.left),n.right=Math.max(o.x,n.right)}),n}function xt(...t){return t.find(e=>!!e)}const pf=Number.EPSILON*100;function gf(t,e,n,o,r,i,a,u){var c,f;const h=t.edges,s=t.directions,l=h.map((v,w)=>bf(v,s[w],o[v.edgeId])),d=[];let b=!1,E=!1;{const v=l[0];let w=Xe(e[v.source].shape)*r;const x=u+(a==="edgeOfNode"?w:0),y=x<=0?v.line.source:Ko(v,x,n,!0);d.push(y),w=Xe(e[v.target].shape)*r,u>0&&ee.distance(v.line.source,v.line.target)<=x+w&&(b=!0)}const g=h.length;for(let v=1;v<g;v++){const w=l[v-1],x=l[v],y=x.source,p=W.fromObject((c=n[y])!=null?c:{x:0,y:0}),m=mf(w,x,p),S=Xe(e[y].shape)*r,M=Math.max(S*(2/3),S-4*r),I=Pn(w),T=Pn(x),C=Et(w,p,M,I),Z=Et(x,p,M,!T),D=Et(w,p,S,I),X=Et(x,p,S,!T);let R;if(m){const H=ee.distance(m,p);if(H<M)R=[xt(C,D,w.line.target),m,xt(Z,X,x.line.source)];else if(H<=S){let ie,te;D&&C?ie=ee.distance(m,C)<ee.distance(m,D)?C:D:ie=D||w.line.target,X&&Z?te=ee.distance(m,Z)<ee.distance(m,X)?Z:X:te=X||x.line.source,R=[ie,m,te]}else C&&Z?R=[C,p,Z]:D&&X?R=[D,p,X]:R=[xt(C,D,w.line.target),p,xt(Z,X,x.line.source)]}else C&&Z?R=[C,p,Z]:D&&X?R=[D,p,X]:R=[w.line.target,p,x.line.source];if(w.curve){const H=d[d.length-1];if(H){const ie=H instanceof Array?H[H.length-1]:H;let te;R instanceof Array?te=i?R[0]:R[1]:te=R;const se=kn(ie,w.curve.circle.center,te,w.curve.theta);R instanceof Array&&i?d.push([...se,...R]):d.push([...se,te])}}else if(w.loop){const[H,ie,te]=Jo(p,w,S);d.push(H),d.push(te),R instanceof Array&&i?d.push([ie,R[1],R[2]]):d.push(R[2])}else i||!(R instanceof Array)?d.push(R):x.curve?d.push(R[1]):x.loop?d.push(R[0]):d.push(R[0],R[2])}{const v=l[l.length-1];let w=Xe(e[v.target].shape)*r;const x=u+(a==="edgeOfNode"?w:0),y=x<=0?v.line.target:Ko(v,x,n,!1);if(w=Xe(e[v.source].shape)*r,v.loop){const p=W.fromObject((f=n[v.target])!=null?f:{x:0,y:0}),[m,S,M]=Jo(p,v,w);d.push(m),d.push(M)}else if(v.curve){const p=d[d.length-1],m=p instanceof Array?p[p.length-1]:p,S=kn(m,v.curve.circle.center,y,v.curve.theta);d.push([...S,y])}else d.push(y);u>0&&ee.distance(v.line.source,v.line.target)<=x+w&&(E=!0)}return b&&(d.shift(),d[0]instanceof Array&&d.unshift(d[0][0])),E&&d.pop(),d}function Xo(t){const e=t.length;if(e===0)return[];if(e<=1)return[!0];const n=[];let o=null,r=!0;for(let i=0;i<e;i++){const a=t[i].edge.source,u=t[i].edge.target;if(i===0)if(e>2){const c=mi(t,0);c===null?r=!0:r=c===u}else r=[t[1].edge.source,t[1].edge.target].includes(u);else a===u?r=!0:r=o===a;n.push(r),o=r?u:a}return n}function mi(t,e){const n=t[e],o=t[e+1],r=[n.edge.source,n.edge.target].sort(),i=[o.edge.source,o.edge.target].sort();if(r[0]===r[1])return r[0];if(i[0]===i[1])return i[0];if(n.edgeId===o.edgeId||r[0]===i[0]&&r[1]===i[1]){if(e>=t.length-2)return null;{const a=mi(t,e+1);return a===null?null:a===r[1]?r[0]:r[1]}}else return i.includes(r[1])?r[1]:r[0]}function Ko(t,e,n,o){const r=o?t.source:t.target,i=t.curve;if(i){let a=e/i.circle.radius;return i.theta>0&&(a*=-1),o||(a*=-1),W.fromObject(Ie(o?t.line.source:t.line.target,i.circle.center,a))}else{let a,u;if(o?(a=t.line.target,u=t.line.source):(a=t.line.source,u=t.line.target),n[r]){const c=Vt(a,u,W.fromObject(n[r]),e);return c===null?a:c}else return a}}function mf(t,e,n){let o=null;if(t.loop||e.loop)o=null;else if(t.curve)if(e.curve){if(t.line.target.isEqualTo(e.line.source))return t.line.target.clone();o=vt(t.curve.circle.center,t.curve.circle.radius,e.curve.circle.center,e.curve.circle.radius,t.curve.center)}else o=df(e.line.target,e.line.source,t.curve.circle.center,t.curve.circle.radius,n);else if(e.curve)o=Vt(t.line.source,t.line.target,e.curve.circle.center,e.curve.circle.radius);else{const r=Yo(t.line),i=Yo(e.line);!isFinite(r)&&!isFinite(i)||Math.abs(r-i)<pf?o=null:o=De(t.line,e.line)}return o}function Et(t,e,n,o){if(t.loop){const r=vt(e,n,t.loop.center,t.loop.radius[0]);return r?o?r[0]:r[1]:null}else return t.curve?vt(e,n,t.curve.circle.center,t.curve.circle.radius,W.fromObject(t.curve.center)):Vt(o?t.line.source:t.line.target,o?t.line.target:t.line.source,e,n)}function bf(t,e,n){let o=n.origin,r=t.edge.source,i=t.edge.target,a=n.curve;const u=n.loop;u?o=n.position:e||(o=cf(o),r=t.edge.target,i=t.edge.source,a&&(a=Dt(ae({},a),{theta:-a.theta})));const c=J.fromLinePosition(o);return{edgeId:t.edgeId,source:r,target:i,line:c,direction:e,curve:a,loop:u}}function Yo(t){return(t.target.y-t.source.y)/(t.target.x-t.source.x)}function Jo(t,e,n){const{radius:o,center:r}=G(e.loop,"Loop of edge parameter"),[i,a]=o,u=vt(t,n,r,o[0]);let[c,f]=u?u.reverse():[e.line.source,e.line.target];const h=Pn(e);h||([c,f]=[f,c]);const s=c,l=f,d=W.fromObject(s).subtract(r).angleDegree();let b=(W.fromObject(l).subtract(r).angleDegree()+360-d)%360>=180;return b=h?b:!b,[s,l,`A ${i} ${a} 0 ${b?1:0} ${h?1:0} ${l.x} ${l.y}`]}function Pn(t){return t.loop?t.direction?t.loop.isClockwise:!t.loop.isClockwise:!0}function on(t,e,n,o,r,i,a){const u=Me({});F(()=>new Set(Object.keys(t.value)),(f,h)=>{h||(h=new Set([]));for(const s of f)h.has(s)||yf(t,u,s,!1,e,r);for(const s of h)f.has(s)||(n.delete(s),o.delete(s),i?.(s,u[s]),delete u[s])},{immediate:!0}),F(()=>[...n],(f,h)=>{const s=h?f.filter(d=>!h.includes(d)):f,l=h?h.filter(d=>!f.includes(d)):[];s.forEach(d=>{const b=u[d];b&&!b.selected&&(b.selected=!0)}),l.forEach(d=>{const b=u[d];b&&b.selected&&(b.selected=!1)})},{immediate:!0}),F(()=>[...o],(f,h)=>{const s=f.filter(d=>!h.includes(d)),l=h.filter(d=>!f.includes(d));s.forEach(d=>{const b=u[d];b&&!b.hovered&&(b.hovered=!0)}),l.forEach(d=>{const b=u[d];b&&b.hovered&&(b.hovered=!1)})});const c=_(()=>{const f=a?a():Object.values(u);return e.zOrder.enabled?wf(f,e.zOrder,o,n):f});return{states:u,zOrderedList:c}}function yf(t,e,n,o,r,i){const a={id:n,selected:o,hovered:!1,selectable:_(()=>t.value[n]?z.value(r.selectable,t.value[n]):O(a.selectable)),zIndex:_(()=>t.value[n]?z.value(r.zOrder.zIndex,t.value[n]):O(a.zIndex))};e[n]=a,i(t,n,e[n])}function wf(t,e,n,o){return e.bringToFrontOnHover&&e.bringToFrontOnSelected?t.sort((r,i)=>{const a=n.has(r.id),u=n.has(i.id);if(a!=u)return a?1:-1;const c=o.has(r.id),f=o.has(i.id);return c!=f?c?1:-1:r.zIndex-i.zIndex}):e.bringToFrontOnHover?t.sort((r,i)=>{const a=n.has(r.id),u=n.has(i.id);return a!=u?a?1:-1:r.zIndex-i.zIndex}):e.bringToFrontOnSelected?t.sort((r,i)=>{const a=o.has(r.id),u=o.has(i.id);return a!=u?a?1:-1:r.zIndex-i.zIndex}):t.sort((r,i)=>r.zIndex-i.zIndex)}function xf(t){return typeof btoa===void 0?Buffer.from(t).toString("base64").replaceAll("=",""):btoa(t).replaceAll("=","")}function Ef(){return{markers:Me({}),referenceCount:{}}}function Sf(t){const{markers:e,referenceCount:n}=t;function o(u,c){var f;const h=(f=n[u])!=null?f:0;n[u]=h+1,h||(e[u]=c)}function r(u){var c;const f=(c=n[u])!=null?c:0;f&&(f-1===0?(delete e[u],delete n[u]):n[u]=f-1)}function i(u){u&&r(u)}function a(u,c,f,h,s){if(u.type==="none"){i(f);return}if(u.type==="custom")return i(f),u.customId;const l=kf(u,c,h),d=Pf(l,s);return d===f||(i(f),o(d,l)),d}return{makeMarker:a,clearMarker:i}}function kf(t,e,n){var o;return Dt(ae({},t),{color:(o=t.color)!=null?o:n,isSource:e})}function Pf(t,e){const n=xf(t.color),o=t.isSource?"L":"R",r=t.units==="strokeWidth"?"rel":"abs";return`marker_${e}_${t.type}_${t.width}_${t.height}_${t.margin}_${t.offset}_${n}_${o}_${r}`}function rn(t,e,n){return{objects:t,selected:e,hovered:n}}const bi=Symbol("states"),Mf={type:"none",width:0,height:0,margin:0,offset:0,units:"strokeWidth",color:null};function Of(t,e,n,o,r,i,a,u){const c=Me({}),f=ze({});he(()=>{const y=Object.fromEntries(Object.keys(t.objects.value).map(p=>[p,{}]));Object.entries(e.objects.value).forEach(([p,m])=>{y!=null&&y[m.source]||(y[m.source]={}),y!=null&&y[m.target]||(y[m.target]={}),y[m.source][p]=m.target,y[m.target][p]=m.source}),St(f,y)});const{states:h,zOrderedList:s}=on(t.objects,o.node,t.selected,t.hovered,(y,p,m)=>{Cf(y,p,m,o.node,f,r,i)},(y,p)=>{const m=r.nodes;delete m[y]}),l=Jd(),d=ef(t.objects,e.objects,o),b=j([]),{states:E,zOrderedList:g}=on(e.objects,o.edge,e.selected,e.hovered,(y,p,m)=>{Af(y,p,m,o.edge,a,h,d,r,u,l)},(y,p)=>{var m;(m=p.stopWatchHandle)==null||m.call(p)},()=>b.value);he(()=>{b.value=If(d.edgeGroups,E)}),F(d.edgeGroups,y=>Nf(c,d,o),{immediate:!0});const{states:v,zOrderedList:w}=on(n.objects,o.path,n.selected,n.hovered,(y,p,m)=>{const S=m;S.clickable=_(()=>y.value[p]?z.value(o.path.clickable,y.value[p]):!1),S.hoverable=_(()=>y.value[p]?z.value(o.path.hoverable,y.value[p]):!1),S.path=y.value[p],S.edges=er(S.path,e),S.directions=Xo(S.edges),S.stopWatchHandle=F(()=>y.value[p].edges,()=>{S.path=y.value[p],S.edges=er(S.path,e),S.directions=Xo(S.edges)})},(y,p)=>{var m;(m=p.stopWatchHandle)==null||m.call(p)}),x={nodeStates:h,edgeStates:E,edgeGroupStates:d,summarizedEdgeStates:c,pathStates:v,layouts:r,nodeZOrderedList:s,edgeZOrderedList:g,pathZOrderedList:w};return Ze(bi,x),x}function Tf(t){return t.summarized}function Ee(){return G(Ne(bi),"states")}function _f(t,e,n,o){return n&&o.hover?z.values(o.hover,t):yi(t,e,o)}function yi(t,e,n){return e&&n.selected?z.values(n.selected,t):z.values(n.normal,t)}function Cf(t,e,n,o,r,i,a){var u,c;!i.nodes[e]&&(u=a.nodes)!=null&&u[e]&&(i.nodes[e]=ae({},(c=a.nodes)==null?void 0:c[e])),n.shape=_(()=>t.value[e]?_f(t.value[e],n.selected,n.hovered,o):O(n.shape)),n.staticShape=_(()=>t.value[e]?yi(t.value[e],n.selected,o):O(n.staticShape)),n.label=_(()=>t.value[e]?z.values(o.label,t.value[e]):O(n.label)),n.labelText=_(()=>{var f,h;return o.label.text instanceof Function?O(n.label).text:t.value[e]?(h=(f=t.value[e])==null?void 0:f[O(n.label).text])!=null?h:"":O(n.labelText)}),n.draggable=_(()=>t.value[e]?z.value(o.draggable,t.value[e]):O(n.draggable)),n.oppositeNodeIds=Pe(r,e),n.oppositeNodes=_(()=>Object.entries(n.oppositeNodeIds).reduce((f,h)=>{const[s,l]=h,d=i.nodes[l];return d&&(f[s]={nodeId:l,pos:ae({},d)}),f},{}))}function zf(t,e,n,o){return e?z.values(o.selected,t):n&&o.hover?z.values(o.hover,t):z.values(o.normal,t)}function Qo(t){return t.type==="none"?Mf:t}function Af(t,e,n,o,r,i,a,u,c,f){const{makeMarker:h,clearMarker:s}=Sf(r);Object.assign(n,{origin:{p1:{x:0,y:0},p2:{x:0,y:0}},labelPosition:{p1:{x:0,y:0},p2:{x:0,y:0}},position:{p1:{x:0,y:0},p2:{x:0,y:0}}}),n.label=_(()=>t.value[e]?z.values(o.label,t.value[e]):O(n.label));const l=_(()=>{const v=t.value[e],w=zf(v,n.selected,n.hovered,o);isNaN(+w.width)&&(console.warn("[v-network-graph] Edge width is invalid value. id=[%s] value=[%s]",e,w.width),w.width=1),(w.color===void 0||w.color===null)&&(console.warn("[v-network-graph] Edge color is invalid value. id=[%s] value=[%s]",e,w.color),w.color="#000000");let x=z.value(o.normal.width,v);isNaN(+x)&&(x=1);const y=Qo(z.values(o.marker.source,[v,w])),p=Qo(z.values(o.marker.target,[v,w]));return{stroke:w,normalWidth:x,source:y,target:p}});n.line=l;const d=Pe(a.edgeLayoutPoints,e),b=Pe(a.summarizedEdges,e),E=he(()=>{var v,w,x,y,p,m,S;const M=t.value[e];if(!M)return;const I=(v=i[M.source])==null?void 0:v.staticShape,T=(w=i[M.target])==null?void 0:w.staticShape;if(!I||!T)return;const C=(x=u.nodes[M?.source])!=null?x:{x:0,y:0},Z=(y=u.nodes[M?.target])!=null?y:{x:0,y:0},D=tf(d.value,(p=b.value)!=null?p:!1,C,Z,c.value,o.keepOrder),[X,R]=ff(C,Z,I,T),H=c.value;n.labelPosition=En(D,X*H,R*H);let ie=0,te=0;const se=l.value;if(se.source.type!=="none"){const le=se.source;ie=le.margin+le.width,le.units==="strokeWidth"&&(ie*=se.normalWidth)}if(se.target.type!=="none"){const le=se.target;te=le.margin+le.width,le.units==="strokeWidth"&&(te*=se.normalWidth)}o.margin&&(ie+=o.margin,te+=o.margin);const je=!!o.margin||se.source.type!=="none"||se.target.type!=="none";if(M.source===M.target){n.origin=zt(C,Z);const le=z.values(o.selfLoop,M),[Ue,Fe]=Lf(C,I,le,je,ie,te,(S=(m=d.value)==null?void 0:m.pointInGroup)!=null?S:0,H);n.position=Ue,n.loop=Fe,n.curve=void 0;return}else n.loop=void 0;if(je&&(ie+=X,te+=R),o.type==="straight"||b.value)n.origin=D,n.curve=void 0,ie===0&&te===0?n.position=n.origin:n.position=En(n.origin,ie*H,te*H);else{n.origin=zt(C,Z);const le=d.value?d.value.groupWidth/2-d.value.pointInGroup:0,[Ue,Fe]=$f(n.origin,D,le,ie*H,te*H);n.position=Ue,n.curve=Fe}}),g=he(()=>{t.value[e]&&(n.sourceMarkerId=h(l.value.source,!0,n.sourceMarkerId,l.value.stroke.color,f),n.targetMarkerId=h(l.value.target,!1,n.targetMarkerId,l.value.stroke.color,f))});n.stopWatchHandle=()=>{E(),g(),s(n.sourceMarkerId),s(n.targetMarkerId)}}function If(t,e){return Object.entries(t).map(([n,o])=>{var r;return o.summarize?{id:(r=Object.keys(o.edges)[0])!=null?r:n,summarized:!0,key:n,group:o,zIndex:Object.keys(o.edges).map(i=>{var a,u;return(u=(a=e[i])==null?void 0:a.zIndex)!=null?u:0}).reduce((i,a)=>Math.max(i,a))}:Object.entries(o.edges).map(([i,a])=>{var u,c;return{id:i,summarized:!1,key:i,edge:a,zIndex:(c=(u=e[i])==null?void 0:u.zIndex)!=null?c:0}})}).flat()}function $f(t,e,n,o,r){const i=J.fromLinePosition(t),a=J.fromLinePosition(e),u=lf(e),[c,f]=hf(i.source,i.target,u);let h,s;if(f===0)return[t,s];if(n===0)return o===0&&r===0?h=t:h=En(t,o,r),[h,s];const l=J.fromVectors(c,u),d=Je(J.fromVectors(c,i.source),l);if(o===0&&r===0)h=t;else{let v=o/f,w=r/f;d>0&&(v*=-1,w*=-1),h=zt(Ie(i.source,c,v),Ie(i.target,c,-w));let x=Je(J.fromVectors(c,i.source),J.fromVectors(c,i.target)),y=Je(J.fromPositions(c,h.p1),J.fromPositions(c,h.p2));if(d*x<0&&(x=Sn(x),d*y<0&&(y=Sn(y))),x*y<0){const p=u.clone().add(a.v.normalize().multiplyScalar(.5));return h=zt(u,p),[h,s]}}const[b,E]=sf(h),g=kn(b,c,E,d).map(v=>v.toObject());return s={center:u,theta:d,circle:{center:c,radius:f},control:g},[h,s]}function Lf(t,e,n,o,r,i,a,u){const c=u,f=(n.radius+a/2)*c,h=n.offset*c+f,s=(n.angle-90)*(Math.PI/180),l=W.fromObject({x:t.x+h*Math.cos(s),y:t.y+h*Math.sin(s)}),d=n.isClockwise;let b,E;if(o){const w=vt(l,f,W.fromObject(t),Xe(e)*c);if(w){[b,E]=w;let x=1;if(d||([b,E]=[E,b],x=-1),r!==0||i!==0){const y=r*c/f*x,p=i*c/f*x;b=Ie(b,l,y),E=Ie(E,l,-p)}}}if(b===void 0||E===void 0){const w=W.fromObject(t).subtract(l).normalize().multiplyScalar(f);let x=1*(Math.PI/180);d||(x*=-1),b=l.clone().add(Ct(w,x)),E=l.clone().add(Ct(w,-x))}const g=W.fromObject(b).subtract(l).angleDegree(),v=(W.fromObject(E).subtract(l).angleDegree()+360-g)%360>=180;return[{p1:b,p2:E},{center:l,radius:[f,f],isLargeArc:d?v:!v,isClockwise:d}]}function Nf(t,e,n){const o=e.edgeGroups;Object.entries(o).filter(([r,i])=>i.summarize&&!(r in t)).forEach(([r,i])=>{const a={stroke:void 0};a.stroke=_(()=>z.values(n.edge.summarized.stroke,i.edges)),t[r]=a}),Object.keys(t).forEach(r=>{var i;(i=e.edgeGroups[r])!=null&&i.summarize||delete t[r]})}function er(t,e){return t.edges.map(n=>({edgeId:n,edge:e.objects.value[n]})).filter(n=>n.edge)}class ut{static valueOf(e){return Array.from(e.values())}}const Zf=3,jf=6,wi=500;function kt(t){return t==="touch"?jf:Zf}function Yn(t,e,n,o){let r=t.get(e);if(r)r.id!==n&&(r=void 0);else{const u=Array.from(t.entries()).find(([c,f])=>f.id===n);if(u){const[c,f]=u;t.delete(c),r=f}}let i,a;return[r,i,a]=xi(r,o,n),t.set(e,r),[i,a]}function xi(t,e,n){const o=Date.now();t&&o-t.lastTime<=wi?(t.count++,t.lastTime=o):t={count:1,lastTime:o,id:n};const r={view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey,metaKey:e.metaKey,button:e.button,buttons:e.buttons,detail:t.count};let i,a;return e instanceof PointerEvent?(Object.assign(r,{pointerId:e.pointerId,width:e.width,height:e.height,pressure:e.pressure,tangentialPressure:e.tangentialPressure,tiltX:e.tiltX,tiltY:e.tiltY,twist:e.twist,pointerType:e.pointerType,isPrimary:e.isPrimary}),i=new PointerEvent("click",r),t.count===2&&(a=new PointerEvent("dblclick",r))):(i=new MouseEvent("click",r),t.count===2&&(a=new MouseEvent("dblclick",r))),[t,i,a]}function Jn(t){const e=Date.now();Array.from(t.entries()).filter(([n,o])=>e-o.lastTime>wi).map(([n,o])=>t.delete(n))}function Df(t,e,n,o,r,i,a){const u={pointers:new Map,follow:{followedPointerId:-1,nodeBasePositions:{}},hoveredNodesPre:new Set,clicks:new Map},c={pointermove:d,pointerup:E,pointercancel:b};function f(y){const p=u.follow.followedPointerId===y.pointerId,m=r.has(y.nodeId),S=!(y.pointerId in u.pointers);if(p&&S||p&&!m){const M=ut.valueOf(u.pointers).find(I=>r.has(I.nodeId));if(!M){u.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=M,u.follow.followedPointerId=y.pointerId}else{const M=u.pointers.get(u.follow.followedPointerId);if(!M){u.follow={followedPointerId:-1,nodeBasePositions:{}};return}y=M}if(p||m){const M=ut.valueOf(u.pointers).map(I=>I.nodeId);u.follow.nodeBasePositions=Object.fromEntries(Array.from(r).filter(I=>!M.includes(I)).filter(I=>{var T;return(T=t[I])==null?void 0:T.draggable}).map(I=>[I,an(e.nodes,I)])),y.dragBasePosition=ae({},y.latestPosition),y.nodeBasePosition=an(e.nodes,y.nodeId)}}F(r,y=>{const p=u.pointers.get(u.follow.followedPointerId);p&&f(p),y.size>0&&n.selectionMode.value!=="node"?n.selectionMode.value="node":y.size===0&&n.selectionMode.value==="node"&&(n.selectionMode.value="container")}),F(n.selectionMode,y=>{y!=="node"&&r.clear()});function h(y,p){const m=y.dragBasePosition.x-p.pageX,S=y.dragBasePosition.y-p.pageY,M=u.follow.followedPointerId==y.pointerId?ae({[y.nodeId]:y.nodeBasePosition},u.follow.nodeBasePositions):{[y.nodeId]:y.nodeBasePosition},I=i.value;return Object.fromEntries(Object.entries(M).map(([T,C])=>[T,{x:C.x-m/I,y:C.y-S/I}]))}function s(y,p){var m,S;if(p.isTrusted||p.shiftKey&&!["container","node"].includes(n.selectionMode.value))return;n.selectionMode.value="node";const M=(S=(m=t[y])==null?void 0:m.selectable)!=null?S:!1;if(M){const I=ut.valueOf(u.pointers).filter(T=>r.has(T.nodeId)).length>0;p.shiftKey||I?r.has(y)?r.delete(y):typeof M=="number"&&r.size>=M||r.add(y):r.has(y)||(r.clear(),r.add(y))}a.emit("node:click",{node:y,event:p})}function l(y,p){p.isTrusted||a.emit("node:dblclick",{node:y,event:p})}function d(y){var p;y.stopPropagation();const m=u.pointers.get(y.pointerId);if(!m)return;m.latestPosition={x:y.pageX,y:y.pageY},m.moveCounter++;const S=kt(y.pointerType);if(m.moveCounter<=S||!((p=t[m.nodeId])!=null&&p.draggable))return;if(m.moveCounter===S+1){const I=h(m,{pointerId:m.pointerId,pageX:m.dragBasePosition.x,pageY:m.dragBasePosition.y});a.emit("node:dragstart",I)}const M=h(m,y);a.emit("node:pointermove",M)}function b(y){y.stopPropagation();let p=u.pointers.get(y.pointerId);if(p){for(p of u.pointers.values()){const m=p.nodeId,S=kt(y.pointerType);if(p.moveCounter>S){const M=h(p,{pointerId:p.pointerId,pageX:p.latestPosition.x,pageY:p.latestPosition.y});a.emit("node:dragend",M)}a.emit("node:pointerup",{node:m,event:y})}u.pointers.clear(),u.follow={followedPointerId:-1,nodeBasePositions:{}},de(c).forEach(([m,S])=>{document.removeEventListener(m,S)}),n.viewMode.value="default"}}function E(y){var p,m,S;y.stopPropagation();const M=u.pointers.get(y.pointerId);if(!M)return;u.pointers.delete(y.pointerId);const I=M.nodeId,T=kt(y.pointerType),C=M.moveCounter>T;if(C){if((p=t[M.nodeId])!=null&&p.draggable){const Z=h(M,y);a.emit("node:dragend",Z),a.emit("node:pointerup",{node:I,event:y})}}else a.emit("node:pointerup",{node:I,event:y});if(!C){const[Z,D]=Yn(u.clicks,M.pointerId,I,y);(m=M.eventTarget)==null||m.dispatchEvent(Z),D&&((S=M.eventTarget)==null||S.dispatchEvent(D))}u.pointers.size===0?(u.follow={followedPointerId:-1,nodeBasePositions:{}},de(c).forEach(([Z,D])=>{document.removeEventListener(Z,D)}),Jn(u.clicks),n.viewMode.value="default"):f(M),o.clear(),u.hoveredNodesPre.forEach(o.add,o)}function g(y,p){if(p.button==2||(p.stopPropagation(),!["default","node"].includes(n.viewMode.value)))return;u.pointers.size==0&&(n.viewMode.value="node",de(c).forEach(([S,M])=>{document.addEventListener(S,M)}));const m={pointerId:p.pointerId,nodeId:y,moveCounter:0,nodeBasePosition:an(e.nodes,y),dragBasePosition:{x:p.pageX,y:p.pageY},latestPosition:{x:p.pageX,y:p.pageY},eventTarget:p.currentTarget};u.pointers.set(p.pointerId,m),r.has(y)&&(u.follow.followedPointerId<0?(u.follow.followedPointerId=p.pointerId,f(m)):delete u.follow.nodeBasePositions[m.nodeId]),a.emit("node:pointerdown",{node:y,event:p})}function v(y,p){u.hoveredNodesPre.add(y),!(u.pointers.size>0)&&(o.add(y),a.emit("node:pointerover",{node:y,event:p}))}function w(y,p){u.hoveredNodesPre.delete(y),!(u.pointers.size>0)&&(o.delete(y),a.emit("node:pointerout",{node:y,event:p}))}function x(y,p){p.stopPropagation(),a.emit("node:contextmenu",{node:y,event:p})}return{handleNodePointerDownEvent:g,handleNodePointerOverEvent:v,handleNodePointerOutEvent:w,handleNodeClickEvent:s,handleNodeDoubleClickEvent:l,handleNodeContextMenu:x}}function an(t,e){var n;const o=(n=t[e])!=null?n:{x:0,y:0};return ae({},o)}function Rf(t,e,n,o,r){const i={pointers:new Map,pointerPeekCount:0,clicks:new Map},a={pointerup:c,pointercancel:f};F(o,p=>{p.size>0&&e.selectionMode.value!=="edge"?e.selectionMode.value="edge":p.size===0&&e.selectionMode.value==="edge"&&(e.selectionMode.value="container")}),F(e.selectionMode,p=>{p!=="edge"&&o.clear()});function u(p,m){if(m.button==2||(m.stopPropagation(),!["default","edge"].includes(e.viewMode.value)))return;i.pointers.size==0&&(e.viewMode.value="edge",de(a).forEach(([M,I])=>{document.addEventListener(M,I)}),i.pointerPeekCount=0),i.pointerPeekCount++;const S={pointerId:m.pointerId,id:p,eventTarget:m.currentTarget};i.pointers.set(m.pointerId,S),r.emit("edge:pointerdown",pe(p,m))}function c(p){var m,S;p.stopPropagation();const M=i.pointers.get(p.pointerId);if(!M)return;i.pointers.delete(p.pointerId);const I=M.id;r.emit("edge:pointerup",pe(I,p));const[T,C]=Yn(i.clicks,M.pointerId,I instanceof Array?I.join(","):I,p);(m=M.eventTarget)==null||m.dispatchEvent(T),C&&((S=M.eventTarget)==null||S.dispatchEvent(C)),i.pointers.size===0&&(i.pointerPeekCount=0,de(a).forEach(([Z,D])=>{document.removeEventListener(Z,D)}),Jn(i.clicks),e.viewMode.value="default")}function f(p){if(p.stopPropagation(),!!i.pointers.get(p.pointerId)){for(const m of i.pointers.values()){const S=m.id;r.emit("edge:pointerup",pe(S,p))}i.pointers.clear(),i.pointerPeekCount=0,de(a).forEach(([m,S])=>{document.removeEventListener(m,S)}),r.emit("view:mode","default")}}function h(p,m){var S;if(m.isTrusted||m.shiftKey&&!["container","edge"].includes(e.selectionMode.value))return;e.selectionMode.value="edge";const M=p instanceof Array?p:[p],I=ut.valueOf(i.pointers).filter(T=>(T.id instanceof Array?T.id:[T.id]).every(C=>o.has(C))).length>0;if(p instanceof Array)M.find(T=>{var C;return(C=t[T])==null?void 0:C.selectable})&&(m.shiftKey||I?M.some(T=>o.has(T))?M.forEach(T=>o.delete(T)):M.forEach(T=>{var C;const Z=(C=t[T])==null?void 0:C.selectable;typeof Z=="number"&&o.size>=Z||o.add(T)}):(o.clear(),M.forEach(T=>o.add(T))));else{const T=(S=t[p])==null?void 0:S.selectable;T&&(m.shiftKey||I?o.has(p)?o.delete(p):typeof T=="number"&&o.size>=T||o.add(p):o.has(p)||(o.clear(),o.add(p)))}r.emit("edge:click",pe(p,m))}function s(p,m){m.isTrusted||r.emit("edge:dblclick",pe(p,m))}function l(p,m){n.add(p),r.emit("edge:pointerover",pe(p,m))}function d(p,m){n.delete(p),r.emit("edge:pointerout",pe(p,m))}function b(p,m){m.stopPropagation(),r.emit("edge:contextmenu",pe(p,m))}function E(p,m){if(m.button==2||(m.stopPropagation(),!["default","edge"].includes(e.viewMode.value)))return;i.pointers.size==0&&(e.viewMode.value="edge",de(a).forEach(([M,I])=>{document.addEventListener(M,I)}),i.pointerPeekCount=0),i.pointerPeekCount++;const S={pointerId:m.pointerId,id:p,eventTarget:m.currentTarget};i.pointers.set(m.pointerId,S),r.emit("edge:pointerdown",pe(p,m))}function g(p,m){p.forEach(S=>n.add(S)),r.emit("edge:pointerover",pe(p,m))}function v(p,m){p.forEach(S=>n.delete(S)),r.emit("edge:pointerout",pe(p,m))}function w(p,m){h(p,m)}function x(p,m){s(p,m)}function y(p,m){m.stopPropagation(),r.emit("edge:contextmenu",pe(p,m))}return{handleEdgePointerDownEvent:u,handleEdgePointerOverEvent:l,handleEdgePointerOutEvent:d,handleEdgeClickEvent:h,handleEdgeDoubleClickEvent:s,handleEdgeContextMenu:b,handleEdgesPointerDownEvent:E,handleEdgesPointerOverEvent:g,handleEdgesPointerOutEvent:v,handleEdgesClickEvent:w,handleEdgesDoubleClickEvent:x,handleEdgesContextMenu:y}}function pe(t,e){return t instanceof Array?{edges:t,event:e,summarized:!0}:{edge:t,edges:[t],event:e,summarized:!1}}function Bf(t,e,n,o){const r={moveCounter:0,pointerCounter:0,clickState:void 0},i={pointermove:u,pointerup:c,pointercancel:c};function a(d){r.moveCounter=0,r.pointerCounter===0&&de(i).forEach(([b,E])=>{document.addEventListener(b,E,{passive:!0})}),r.pointerCounter++}function u(d){r.moveCounter++}function c(d){if(r.pointerCounter--,r.pointerCounter<=0){r.pointerCounter=0,de(i).forEach(([E,g])=>{document.removeEventListener(E,g)});const b=kt(d.pointerType);if(r.moveCounter<=b){if(d.shiftKey&&e.selectionMode.value!=="container")return;e.selectionMode.value="container";const[E,g,v]=xi(r.clickState,d,"view");r.clickState=E,t.value.dispatchEvent(g),v&&t.value.dispatchEvent(v)}}}function f(d){d.isTrusted||(d.stopPropagation(),o.emit("view:click",{event:d}))}function h(d){d.isTrusted||(d.stopPropagation(),o.emit("view:dblclick",{event:d}))}function s(d){o.emit("view:contextmenu",{event:d}),r.pointerCounter>0&&(r.pointerCounter=0,de(i).forEach(([b,E])=>{var g;(g=t.value)==null||g.removeEventListener(b,E)}))}const l=d=>{d.preventDefault()};et(()=>{const d=t.value;d&&(d.addEventListener("pointerdown",a,{passive:!0}),d.addEventListener("click",f,{passive:!1}),d.addEventListener("dblclick",h,{passive:!1}),d.addEventListener("contextmenu",s,{passive:!1}),n.value&&d.addEventListener("wheel",l,{passive:!1}))}),gt(()=>{const d=t.value;d&&(d.removeEventListener("pointerdown",a),d.removeEventListener("click",f),d.removeEventListener("dblclick",h),d.removeEventListener("contextmenu",s),n.value&&d.removeEventListener("wheel",l))}),F(n,(d,b)=>{const E=t.value;!E||d===b||(d?E.addEventListener("wheel",l,{passive:!1}):E.removeEventListener("wheel",l))})}function Hf(t,e,n,o,r,i){const a={pointers:new Map,pointerPeekCount:0,clicks:new Map};function u(v,w){var x,y;return r.value?{path:(y=(x=t[v])==null?void 0:x.path)!=null?y:v,event:w}:{path:v,event:w}}const c={pointerup:h,pointercancel:s};F(o,v=>{v.size>0&&e.selectionMode.value!=="path"?e.selectionMode.value="path":v.size===0&&e.selectionMode.value==="path"&&(e.selectionMode.value="container")}),F(e.selectionMode,v=>{v!=="path"&&o.clear()});function f(v,w){var x;if(!((x=t[v])!=null&&x.clickable)||w.button==2||(w.stopPropagation(),!["default","path"].includes(e.viewMode.value)))return;a.pointers.size==0&&(e.viewMode.value="path",de(c).forEach(([p,m])=>{document.addEventListener(p,m)}),a.pointerPeekCount=0),a.pointerPeekCount++;const y={pointerId:w.pointerId,id:v,eventTarget:w.currentTarget};a.pointers.set(w.pointerId,y),i.emit("path:pointerdown",u(v,w))}function h(v){var w,x;const y=a.pointers.get(v.pointerId);if(!y)return;v.stopPropagation(),a.pointers.delete(v.pointerId);const p=y.id;i.emit("path:pointerup",u(p,v));const[m,S]=Yn(a.clicks,y.pointerId,p,v);(w=y.eventTarget)==null||w.dispatchEvent(m),S&&((x=y.eventTarget)==null||x.dispatchEvent(S)),a.pointers.size===0&&(a.pointerPeekCount=0,de(c).forEach(([M,I])=>{document.removeEventListener(M,I)}),Jn(a.clicks),e.viewMode.value="default")}function s(v){if(a.pointers.get(v.pointerId)){v.stopPropagation();for(const w of a.pointers.values()){const x=w.id;i.emit("path:pointerup",u(x,v))}a.pointers.clear(),a.pointerPeekCount=0,de(c).forEach(([w,x])=>{document.removeEventListener(w,x)}),i.emit("view:mode","default")}}function l(v,w){var x;(x=t[v])!=null&&x.hoverable&&(n.add(v),i.emit("path:pointerover",u(v,w)))}function d(v,w){var x;(x=t[v])!=null&&x.hoverable&&(n.delete(v),i.emit("path:pointerout",u(v,w)))}function b(v,w){var x,y,p;if(w.isTrusted||!((x=t[v])!=null&&x.clickable)||w.shiftKey&&!["container","path"].includes(e.selectionMode.value))return;e.selectionMode.value="path";const m=(p=(y=t[v])==null?void 0:y.selectable)!=null?p:!1;if(m){const S=ut.valueOf(a.pointers).filter(M=>o.has(M.id)).length>0;w.shiftKey||S?o.has(v)?o.delete(v):typeof m=="number"&&o.size>=m||o.add(v):o.has(v)||(o.clear(),o.add(v))}i.emit("path:click",u(v,w))}function E(v,w){var x;w.isTrusted||(x=t[v])!=null&&x.clickable&&i.emit("path:dblclick",u(v,w))}function g(v,w){var x;(x=t[v])!=null&&x.clickable&&(w.stopPropagation(),i.emit("path:contextmenu",u(v,w)))}return{handlePathPointerDownEvent:f,handlePathPointerOverEvent:l,handlePathPointerOutEvent:d,handlePathClickEvent:b,handlePathDoubleClickEvent:E,handlePathContextMenu:g}}function Wf(t){return we(this,null,function*(){const e=yield(yield fetch(t)).blob();return new Promise((n,o)=>{try{const r=new FileReader;r.onload=function(){n(this.result)},r.readAsDataURL(e)}catch(r){o(r)}})})}function Mn(t,e,n){var o;const r=t.createSVGPoint();r.x=n.x,r.y=n.y;const i=r.matrixTransform((o=e.getCTM())==null?void 0:o.inverse());return{x:i.x,y:i.y}}function Vf(t,e,n){const o=t.createSVGPoint();o.x=n.x,o.y=n.y;const r=o.matrixTransform(e.getCTM());return{x:r.x,y:r.y}}function Ei(t,e,n){var o;const r=t.cloneNode(!0),i=e.getBBox(),a=1/n,u={x:Math.floor((i.x-10)*a),y:Math.floor((i.y-10)*a),width:Math.ceil((i.width+20)*a),height:Math.ceil((i.height+20)*a)};r.setAttribute("width",u.width.toString()),r.setAttribute("height",u.height.toString());const c=r.querySelector(".v-ng-viewport");c.setAttribute("transform",`translate(${-u.x} ${-u.y}), scale(${a})`),c.removeAttribute("style"),r.setAttribute("viewBox",`0 0 ${u.width} ${u.height}`),r.removeAttribute("style");const f=document.createNodeIterator(r,NodeFilter.SHOW_COMMENT);for(;f.nextNode();){const h=f.referenceNode;(o=h.parentNode)==null||o.removeChild(h)}return r}function Uf(t){return we(this,null,function*(){let e=!1,n=t.getAttribute("href");if(n||(e=!0,n=t.getAttribute("xlink:href")),!(!n||n.startsWith("data:")))try{const o=yield Wf(n);t.setAttribute(e?"xlink:href":"href",o)}catch{console.warn("Image download failed.",n);return}})}function Ff(t,e,n){return we(this,arguments,function*(o,r,i,a={}){const u=Ei(o,r,i);if(a.embedImages){const c=Array.from(u.querySelectorAll("image")).map(f=>Uf(f));yield Promise.all(c)}return u})}function Gf(t,e,n,o,r,i){const a=_(()=>!!i.node.selectable&&i.view.boxSelectionEnabled),u=_(()=>e.viewMode.value==="box-selection"),c=j(),f=j(),h={pointers:new Set,points:new Map,startPoint:null,selectedNodesAtSelectStarted:new Set,selectionType:"append",options:{stopTrigger:"pointerup",selectionType:"append",selectionTypeWithShiftKey:"same"}},s=ri(()=>{qf(G(t.value,"container"),G(c.value,"viewport"),f,n.nodes,o,r,h.selectedNodesAtSelectStarted,h.selectionType)},50,{maxWait:100}),l=new Xf(t,b,E,g,d,v);function d(m){if(h.options.stopTrigger!=="click"||h.pointers.size>0)return;const S={x:m.offsetX,y:m.offsetY};h.startPoint&&W.fromObject(h.startPoint).distance(S)>10||p()}function b(m){m.stopPropagation();const S={x:m.offsetX,y:m.offsetY};h.pointers.size===0&&(h.startPoint=S,l.activate(),h.selectedNodesAtSelectStarted.clear(),r.forEach(M=>h.selectedNodesAtSelectStarted.add(M)),h.options.selectionTypeWithShiftKey==="same"?h.selectionType=h.options.selectionType:h.selectionType=m.shiftKey?h.options.selectionTypeWithShiftKey:h.options.selectionType),h.pointers.has(m.pointerId)||h.pointers.add(m.pointerId),h.points.set(m.pointerId,S),w()}function E(m){if(h.pointers.delete(m.pointerId),h.pointers.size===1){const S=G(t.value).getBoundingClientRect(),M={x:m.x-S.x,y:m.y-S.y};h.startPoint=M}else h.pointers.size===0&&(l.deactivate(),h.options.stopTrigger==="pointerup"&&p(),h.selectedNodesAtSelectStarted.clear());w()}function g(m){const S=G(t.value).getBoundingClientRect(),M={x:m.x-S.x,y:m.y-S.y};h.points.set(m.pointerId,M),w(),s()}function v(m){m.key==="Escape"&&h.options.stopTrigger!=="manual"&&(m.stopPropagation(),p())}function w(){let m,S;const M=Array.from(h.pointers);if(M.length>=2){const I=M[0],T=M[M.length-1];m=h.points.get(I),S=h.points.get(T)}else if(h.startPoint&&M.length===1){const I=M[0];m=h.startPoint,S=h.points.get(I)}else m=void 0,S=void 0;m&&S?(f.value={pos:{x:Math.min(m.x,S.x),y:Math.min(m.y,S.y)},size:{width:Math.abs(S.x-m.x),height:Math.abs(S.y-m.y)}},f.value.size.width===0&&(f.value.size.width=1),f.value.size.height===0&&(f.value.size.height=1)):f.value&&(f.value=void 0)}const x=new Kf(t,m=>{a.value&&i.view.selection.detector(m)&&(y({stop:"manual",type:"append",withShiftKey:"invert"}),x.activate())},m=>{a.value&&i.view.selection.detector(m)&&(h.pointers.size===0?p():h.options.stopTrigger="pointerup",x.deactivate())});F(a,m=>{m?x.register():x.unregister()}),et(()=>{var m;c.value=(m=t.value)==null?void 0:m.querySelector(".v-ng-viewport"),a.value&&x.register()}),gt(()=>{p(),a.value&&x.unregister()});function y(m={}){var S,M,I;h.options={stopTrigger:(S=m.stop)!=null?S:"pointerup",selectionType:(M=m.type)!=null?M:"append",selectionTypeWithShiftKey:(I=m.withShiftKey)!=null?I:"same"},e.viewMode.value!=="box-selection"&&(e.viewMode.value="box-selection",h.pointers.clear(),l.register())}function p(){e.viewMode.value==="box-selection"&&(e.viewMode.value="default",l.unregister())}return{isBoxSelectionMode:u,selectionBox:f,startBoxSelection:y,stopBoxSelection:p}}function qf(t,e,n,o,r,i,a,u){if(!n.value)return;const c=n.value,f=Mn(t,e,c.pos),h=Mn(t,e,{x:c.pos.x+c.size.width,y:c.pos.y+c.size.height}),s=new Set(Object.entries(o).filter(([l,d])=>f.x<=d.x&&d.x<=h.x&&f.y<=d.y&&d.y<=h.y).map(([l,d])=>l));if(u==="append")i.forEach(l=>{s.has(l)||i.delete(l)}),s.forEach(l=>{var d,b;const E=(b=(d=r[l])==null?void 0:d.selectable)!=null?b:!1;(E===!0||typeof E=="number"&&i.size<E)&&i.add(l)});else{const l=new Set(a);l.forEach(d=>{s.has(d)&&l.delete(d)}),s.forEach(d=>{var b,E;if(!a.has(d)){const g=(E=(b=r[d])==null?void 0:b.selectable)!=null?E:!1;(g===!0||typeof g=="number"&&l.size<g)&&l.add(d)}}),i.clear(),l.forEach(d=>i.add(d))}}class Xf{constructor(e,n,o,r,i,a){this._container=e,this._handlePointerDownEvent=n,this._handlePointerUpEvent=o,this._handlePointerMoveEvent=r,this._handleClickEvent=i,this._handleKeyDownEvent=a,this._ignoreEvent=u=>u.stopPropagation()}register(){const e={capture:!0,passive:!1},n=G(this._container.value,"container");n.addEventListener("pointerdown",this._handlePointerDownEvent,e),n.addEventListener("click",this._handleClickEvent,e),n.addEventListener("pointerenter",this._ignoreEvent,e),n.addEventListener("pointerleave",this._ignoreEvent,e),document.addEventListener("keydown",this._handleKeyDownEvent,e)}activate(){const e={capture:!0,passive:!1};document.addEventListener("pointermove",this._handlePointerMoveEvent,e),document.addEventListener("pointerup",this._handlePointerUpEvent,e)}deactivate(){const e={capture:!0};document.removeEventListener("pointermove",this._handlePointerMoveEvent,e),document.removeEventListener("pointerup",this._handlePointerUpEvent,e)}unregister(){this.deactivate();const e={capture:!0};if(this._container.value){const n=this._container.value;n.removeEventListener("pointerdown",this._handlePointerDownEvent,e),n.removeEventListener("click",this._handleClickEvent,e),n.removeEventListener("pointerenter",this._ignoreEvent,e),n.removeEventListener("pointerleave",this._ignoreEvent,e),document.removeEventListener("keydown",this._handleKeyDownEvent,e)}}}class Kf{constructor(e,n,o){this._container=e,this._handleKeyDownEvent=n,this._handleKeyUpEvent=o,this._preventDefault=r=>{r.stopPropagation(),r.preventDefault()}}register(){document.addEventListener("keydown",this._handleKeyDownEvent,{capture:!0,passive:!0})}activate(){document.addEventListener("keyup",this._handleKeyUpEvent,{capture:!0,passive:!0}),G(this._container.value,"container").addEventListener("contextmenu",this._preventDefault,{passive:!1})}deactivate(){document.removeEventListener("keyup",this._handleKeyUpEvent,{capture:!0}),this._container.value&&this._container.value.removeEventListener("contextmenu",this._preventDefault)}unregister(){this.deactivate(),document.removeEventListener("keydown",this._handleKeyDownEvent,{capture:!0})}}const Si=Symbol("mouseEventHandlers");function Yf(t,e,n,o,r,i,a,u,c,f,h,s,l,d,b,E){const g={selectionMode:j("container"),viewMode:j("default")};a.size>0?g.selectionMode.value="node":u.size>0?g.selectionMode.value="edge":c.size>0&&(g.selectionMode.value="path"),F(g.viewMode,w=>{E.emit("view:mode",w)}),Bf(t,g,d,E);const v=ae(ae(ae(ae({selectedNodes:a,hoveredNodes:f,selectedEdges:u,hoveredEdges:h,selectedPaths:c,hoveredPaths:s},Df(o,e,g,f,a,n,E)),Rf(r,g,h,u,E)),Hf(i,g,s,c,l,E)),Gf(t,g,e,o,a,b));return Ze(Si,v),v}function yt(){return G(Ne(Si),"mouseEventHandlers")}function Jf(t){return{all:t=t||new Map,on:function(e,n){var o=t.get(e);o?o.push(n):t.set(e,[n])},off:function(e,n){var o=t.get(e);o&&(n?o.splice(o.indexOf(n)>>>0,1):t.set(e,[]))},emit:function(e,n){var o=t.get(e);o&&o.slice().map(function(r){r(n)}),(o=t.get("*"))&&o.slice().map(function(r){r(e,n)})}}}const ki=Symbol("emitter");function Qf(){const t=Jf();return Ze(ki,t),t}function eh(){return G(Ne(ki),"event emitter")}var tr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function th(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sn,nr;function Ut(){if(nr)return sn;nr=1,sn={getGlobalThis:function(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof tr<"u")return tr;if(typeof this<"u")return this;throw new Error("Unable to locate global `this`")},extend:function(e,n){e=e||{};for(var o in n)this.isObject(n[o])?e[o]=this.extend(e[o],n[o]):e[o]=n[o];return e},isElement:function(e){return e instanceof HTMLElement||e instanceof SVGElement||e instanceof SVGSVGElement||e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"},isObject:function(e){return Object.prototype.toString.call(e)==="[object Object]"},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},getSvg:function(e){var n,o;if(this.isElement(e))n=e;else if(typeof e=="string"||e instanceof String){if(n=document.querySelector(e),!n)throw new Error("Provided selector did not find any elements. Selector: "+e)}else throw new Error("Provided selector is not an HTML object nor String");if(n.tagName.toLowerCase()==="svg")o=n;else if(n.tagName.toLowerCase()==="object")o=n.contentDocument.documentElement;else if(n.tagName.toLowerCase()==="embed")o=n.getSVGDocument().documentElement;else throw n.tagName.toLowerCase()==="img"?new Error('Cannot script an SVG in an "img" element. Please use an "object" element or an in-line SVG.'):new Error("Cannot get SVG.");return o},proxy:function(e,n){return function(){return e.apply(n,arguments)}},getType:function(e){return Object.prototype.toString.apply(e).replace(/^\[object\s/,"").replace(/\]$/,"")},mouseAndTouchNormalize:function(e,n){if(e.clientX===void 0||e.clientX===null)if(e.clientX=0,e.clientY=0,e.touches!==void 0&&e.touches.length){if(e.touches[0].clientX!==void 0)e.clientX=e.touches[0].clientX,e.clientY=e.touches[0].clientY;else if(e.touches[0].pageX!==void 0){var o=n.getBoundingClientRect();e.clientX=e.touches[0].pageX-o.left,e.clientY=e.touches[0].pageY-o.top}}else e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY)},touchNormalize:function(e,n,o){if(e.touches!==void 0&&e.touches.length){if(e.touches[o].clientX!==void 0)e.clientX=e.touches[o].clientX,e.clientY=e.touches[o].clientY;else if(e.touches[o].pageX!==void 0){var r=n.getBoundingClientRect();e.clientX=e.touches[o].pageX-r.left,e.clientY=e.touches[o].pageY-r.top}}else(e.clientX===void 0||e.clientX===null)&&(e.clientX=0,e.clientY=0,e.originalEvent!==void 0&&e.originalEvent.clientX!==void 0&&(e.clientX=e.originalEvent.clientX,e.clientY=e.originalEvent.clientY))},isDblClick:function(e,n){if(e.detail===2)return!0;if(n!=null){var o=e.timeStamp-n.timeStamp,r=Math.sqrt(Math.pow(e.clientX-n.clientX,2)+Math.pow(e.clientY-n.clientY,2));return o<250&&r<10}return!1},now:Date.now||function(){return new Date().getTime()},throttle:function(e,n,o){var r=this,i,a,u,c=null,f=0;o||(o={});var h=function(){f=o.leading===!1?0:r.now(),c=null,u=e.apply(i,a),c||(i=a=null)};return function(){var s=r.now();!f&&o.leading===!1&&(f=s);var l=n-(s-f);return i=this,a=arguments,l<=0||l>n?(clearTimeout(c),c=null,f=s,u=e.apply(i,a),c||(i=a=null)):!c&&o.trailing!==!1&&(c=setTimeout(h,l)),u}},createRequestAnimationFrame:function(e){var n=null;return e!=="auto"&&e<60&&e>1&&(n=Math.floor(1e3/e)),n===null?window.requestAnimationFrame||t(33):t(n)},calculateDistance:function(e,n){var o=e.x-n.x,r=e.y-n.y;return Math.sqrt(o*o+r*r)}};function t(e){return function(n){window.setTimeout(n,e)}}return sn}var ln,or;function nh(){if(or)return ln;or=1;var t=Ut();return ln=(function(){var e="",n,o,r,i=[],a={passive:!0},u={passive:!1};t.getGlobalThis().addEventListener?(n="addEventListener",o="removeEventListener"):(n="attachEvent",o="detachEvent",e="on");function c(){return r||(r="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll"),r}function f(g,v){var w=function(x){!x&&(x=window.event);var y={originalEvent:x,target:x.target||x.srcElement,type:"wheel",deltaMode:x.type=="MozMousePixelScroll"?0:1,deltaX:0,delatZ:0,preventDefault:function(){x.preventDefault?x.preventDefault():x.returnValue=!1}};return c()=="mousewheel"?(y.deltaY=-.025*x.wheelDelta,x.wheelDeltaX&&(y.deltaX=-.025*x.wheelDeltaX)):y.deltaY=x.detail,v(y)};return i.push({element:g,fn:w}),w}function h(g){for(var v=0;v<i.length;v++)if(i[v].element===g)return i[v].fn;return function(){}}function s(g){for(var v=0;v<i.length;v++)if(i[v].element===g)return i.splice(v,1)}function l(g,v,w,x){var y;c()==="wheel"?y=w:y=f(g,w),g[n](e+v,y,x?a:u)}function d(g,v,w,x){var y;c()==="wheel"?y=w:y=h(g),g[o](e+v,y,x?a:u),s(g)}function b(g,v,w){l(g,c(),v,w),c()=="DOMMouseScroll"&&l(g,"MozMousePixelScroll",v,w)}function E(g,v,w){d(g,c(),v,w),c()=="DOMMouseScroll"&&d(g,"MozMousePixelScroll",v,w)}return{on:b,off:E}})(),ln}var at,rr;function Qn(){if(rr)return at;rr=1;var t=Ut(),e="unknown";return typeof document<"u"&&document.documentMode&&(e="ie"),at={svgNS:"http://www.w3.org/2000/svg",xmlNS:"http://www.w3.org/XML/1998/namespace",xmlnsNS:"http://www.w3.org/2000/xmlns/",xlinkNS:"http://www.w3.org/1999/xlink",evNS:"http://www.w3.org/2001/xml-events",getBoundingClientRectNormalized:function(n){if(n.clientWidth&&n.clientHeight)return{width:n.clientWidth,height:n.clientHeight};if(n.getBoundingClientRect())return n.getBoundingClientRect();throw new Error("Cannot get BoundingClientRect for SVG.")},getOrCreateViewport:function(n,o){var r=null;if(t.isElement(o)?r=o:r=n.querySelector(o),!r){var i=Array.prototype.slice.call(n.childNodes||n.children).filter(function(h){return h.nodeName!=="defs"&&h.nodeName!=="#text"});i.length===1&&i[0].nodeName==="g"&&i[0].getAttribute("transform")===null&&(r=i[0])}if(!r){var a="viewport-"+new Date().toISOString().replace(/\D/g,"");r=document.createElementNS(this.svgNS,"g"),r.setAttribute("id",a);var u=n.childNodes||n.children;if(u&&u.length>0)for(var c=u.length;c>0;c--)u[u.length-c].nodeName!=="defs"&&r.appendChild(u[u.length-c]);n.appendChild(r)}var f=[];return r.getAttribute("class")&&(f=r.getAttribute("class").split(" ")),~f.indexOf("svg-pan-zoom_viewport")||(f.push("svg-pan-zoom_viewport"),r.setAttribute("class",f.join(" "))),r},setupSvgAttributes:function(n){if(n.setAttribute("xmlns",this.svgNS),n.setAttributeNS(this.xmlnsNS,"xmlns:xlink",this.xlinkNS),n.setAttributeNS(this.xmlnsNS,"xmlns:ev",this.evNS),n.parentNode!==null){var o=n.getAttribute("style")||"";o.toLowerCase().indexOf("overflow")===-1&&n.setAttribute("style","overflow: hidden; "+o)}},internetExplorerRedisplayInterval:300,refreshDefsGlobal:t.throttle(function(){for(var n=document.querySelectorAll("defs"),o=n.length,r=0;r<o;r++){var i=n[r];i.parentNode.insertBefore(i,i)}},at?at.internetExplorerRedisplayInterval:null),setCTM:function(n,o,r){var i=this,a="matrix("+o.a+","+o.b+","+o.c+","+o.d+","+o.e+","+o.f+")";n.setAttributeNS(null,"transform",a),"transform"in n.style?n.style.transform=a:"-ms-transform"in n.style?n.style["-ms-transform"]=a:"-webkit-transform"in n.style&&(n.style["-webkit-transform"]=a),e==="ie"&&r&&(r.parentNode.insertBefore(r,r),window.setTimeout(function(){i.refreshDefsGlobal()},i.internetExplorerRedisplayInterval))},getEventPoint:function(n,o){var r=o.createSVGPoint();return t.mouseAndTouchNormalize(n,o),r.x=n.clientX,r.y=n.clientY,r},getTouchPoint:function(n,o,r){var i=o.createSVGPoint();return t.touchNormalize(n,o,r),i.x=n.clientX,i.y=n.clientY,i},getSvgCenterPoint:function(n,o,r){return this.createSVGPoint(n,o/2,r/2)},createSVGPoint:function(n,o,r){var i=n.createSVGPoint();return i.x=o,i.y=r,i}},at}var un,ir;function oh(){if(ir)return un;ir=1;var t=Qn();return un={enable:function(e){var n=e.svg.querySelector("defs");n||(n=document.createElementNS(t.svgNS,"defs"),e.svg.appendChild(n));var o=n.querySelector("style#svg-pan-zoom-controls-styles");if(!o){var r=document.createElementNS(t.svgNS,"style");r.setAttribute("id","svg-pan-zoom-controls-styles"),r.setAttribute("type","text/css"),r.textContent=".svg-pan-zoom-control { cursor: pointer; fill: black; fill-opacity: 0.333; } .svg-pan-zoom-control:hover { fill-opacity: 0.8; } .svg-pan-zoom-control-background { fill: white; fill-opacity: 0.5; } .svg-pan-zoom-control-background { fill-opacity: 0.8; }",n.appendChild(r)}var i=document.createElementNS(t.svgNS,"g");i.setAttribute("id","svg-pan-zoom-controls"),i.setAttribute("transform","translate("+(e.width-70)+" "+(e.height-76)+") scale(0.75)"),i.setAttribute("class","svg-pan-zoom-control"),i.appendChild(this._createZoomIn(e)),i.appendChild(this._createZoomReset(e)),i.appendChild(this._createZoomOut(e)),e.svg.appendChild(i),e.controlIcons=i},_createZoomIn:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-in"),n.setAttribute("transform","translate(30.5 5) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomIn()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomIn()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var r=document.createElementNS(t.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-320v320q0 26 -19 45t-45 19h-128q-26 0 -45 -19t-19 -45v-320h-320q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h320v-320q0 -26 19 -45t45 -19h128q26 0 45 19t19 45v320h320q26 0 45 19t19 45zM1536 1120v-960 q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r),n},_createZoomReset:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-reset-pan-zoom"),n.setAttribute("transform","translate(5 35) scale(0.4)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().reset()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().reset()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","2"),o.setAttribute("y","2"),o.setAttribute("width","182"),o.setAttribute("height","58"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var r=document.createElementNS(t.svgNS,"path");r.setAttribute("d","M33.051,20.632c-0.742-0.406-1.854-0.609-3.338-0.609h-7.969v9.281h7.769c1.543,0,2.701-0.188,3.473-0.562c1.365-0.656,2.048-1.953,2.048-3.891C35.032,22.757,34.372,21.351,33.051,20.632z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r);var i=document.createElementNS(t.svgNS,"path");return i.setAttribute("d","M170.231,0.5H15.847C7.102,0.5,0.5,5.708,0.5,11.84v38.861C0.5,56.833,7.102,61.5,15.847,61.5h154.384c8.745,0,15.269-4.667,15.269-10.798V11.84C185.5,5.708,178.976,0.5,170.231,0.5z M42.837,48.569h-7.969c-0.219-0.766-0.375-1.383-0.469-1.852c-0.188-0.969-0.289-1.961-0.305-2.977l-0.047-3.211c-0.03-2.203-0.41-3.672-1.142-4.406c-0.732-0.734-2.103-1.102-4.113-1.102h-7.05v13.547h-7.055V14.022h16.524c2.361,0.047,4.178,0.344,5.45,0.891c1.272,0.547,2.351,1.352,3.234,2.414c0.731,0.875,1.31,1.844,1.737,2.906s0.64,2.273,0.64,3.633c0,1.641-0.414,3.254-1.242,4.84s-2.195,2.707-4.102,3.363c1.594,0.641,2.723,1.551,3.387,2.73s0.996,2.98,0.996,5.402v2.32c0,1.578,0.063,2.648,0.19,3.211c0.19,0.891,0.635,1.547,1.333,1.969V48.569z M75.579,48.569h-26.18V14.022h25.336v6.117H56.454v7.336h16.781v6H56.454v8.883h19.125V48.569z M104.497,46.331c-2.44,2.086-5.887,3.129-10.34,3.129c-4.548,0-8.125-1.027-10.731-3.082s-3.909-4.879-3.909-8.473h6.891c0.224,1.578,0.662,2.758,1.316,3.539c1.196,1.422,3.246,2.133,6.15,2.133c1.739,0,3.151-0.188,4.236-0.562c2.058-0.719,3.087-2.055,3.087-4.008c0-1.141-0.504-2.023-1.512-2.648c-1.008-0.609-2.607-1.148-4.796-1.617l-3.74-0.82c-3.676-0.812-6.201-1.695-7.576-2.648c-2.328-1.594-3.492-4.086-3.492-7.477c0-3.094,1.139-5.664,3.417-7.711s5.623-3.07,10.036-3.07c3.685,0,6.829,0.965,9.431,2.895c2.602,1.93,3.966,4.73,4.093,8.402h-6.938c-0.128-2.078-1.057-3.555-2.787-4.43c-1.154-0.578-2.587-0.867-4.301-0.867c-1.907,0-3.428,0.375-4.565,1.125c-1.138,0.75-1.706,1.797-1.706,3.141c0,1.234,0.561,2.156,1.682,2.766c0.721,0.406,2.25,0.883,4.589,1.43l6.063,1.43c2.657,0.625,4.648,1.461,5.975,2.508c2.059,1.625,3.089,3.977,3.089,7.055C108.157,41.624,106.937,44.245,104.497,46.331z M139.61,48.569h-26.18V14.022h25.336v6.117h-18.281v7.336h16.781v6h-16.781v8.883h19.125V48.569z M170.337,20.14h-10.336v28.43h-7.266V20.14h-10.383v-6.117h27.984V20.14z"),i.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(i),n},_createZoomOut:function(e){var n=document.createElementNS(t.svgNS,"g");n.setAttribute("id","svg-pan-zoom-zoom-out"),n.setAttribute("transform","translate(30.5 70) scale(0.015)"),n.setAttribute("class","svg-pan-zoom-control"),n.addEventListener("click",function(){e.getPublicInstance().zoomOut()},!1),n.addEventListener("touchstart",function(){e.getPublicInstance().zoomOut()},!1);var o=document.createElementNS(t.svgNS,"rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width","1500"),o.setAttribute("height","1400"),o.setAttribute("class","svg-pan-zoom-control-background"),n.appendChild(o);var r=document.createElementNS(t.svgNS,"path");return r.setAttribute("d","M1280 576v128q0 26 -19 45t-45 19h-896q-26 0 -45 -19t-19 -45v-128q0 -26 19 -45t45 -19h896q26 0 45 19t19 45zM1536 1120v-960q0 -119 -84.5 -203.5t-203.5 -84.5h-960q-119 0 -203.5 84.5t-84.5 203.5v960q0 119 84.5 203.5t203.5 84.5h960q119 0 203.5 -84.5 t84.5 -203.5z"),r.setAttribute("class","svg-pan-zoom-control-element"),n.appendChild(r),n},disable:function(e){e.controlIcons&&(e.controlIcons.parentNode.removeChild(e.controlIcons),e.controlIcons=null)}},un}var cn,ar;function rh(){if(ar)return cn;ar=1;var t=Qn(),e=Ut(),n=function(o,r){this.init(o,r)};return n.prototype.init=function(o,r){this.viewport=o,this.options=r,this.originalState={zoom:1,x:0,y:0},this.activeState={zoom:1,x:0,y:0},this.updateCTMCached=e.proxy(this.updateCTM,this),this.requestAnimationFrame=e.createRequestAnimationFrame(this.options.refreshRate),this.viewBox={x:0,y:0,width:0,height:0},this.cacheViewBox();var i=this.processCTM();this.setCTM(i),this.updateCTM()},n.prototype.cacheViewBox=function(){var o=this.options.svg.getAttribute("viewBox");if(o){var r=o.split(/[\s\,]/).filter(function(a){return a}).map(parseFloat);this.viewBox.x=r[0],this.viewBox.y=r[1],this.viewBox.width=r[2],this.viewBox.height=r[3];var i=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height);this.activeState.zoom=isFinite(i)?i:1,this.activeState.x=(this.options.width-this.viewBox.width*i)/2,this.activeState.y=(this.options.height-this.viewBox.height*i)/2,this.updateCTMOnNextFrame(),this.options.svg.removeAttribute("viewBox")}else this.simpleViewBoxCache()},n.prototype.simpleViewBoxCache=function(){var o=this.viewport.getBBox();this.viewBox.x=o.x,this.viewBox.y=o.y,this.viewBox.width=o.width,this.viewBox.height=o.height},n.prototype.getViewBox=function(){return e.extend({},this.viewBox)},n.prototype.processCTM=function(){var o=this.getCTM();if(this.options.fit||this.options.contain){var r;this.options.fit?r=Math.min(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height):r=Math.max(this.options.width/this.viewBox.width,this.options.height/this.viewBox.height),r=isFinite(r)?r:1,o.a=r,o.d=r,o.e=-this.viewBox.x*r,o.f=-this.viewBox.y*r}if(this.options.center){var i=(this.options.width-(this.viewBox.width+this.viewBox.x*2)*o.a)*.5,a=(this.options.height-(this.viewBox.height+this.viewBox.y*2)*o.a)*.5;o.e=i,o.f=a}return this.originalState.zoom=o.a,this.originalState.x=o.e,this.originalState.y=o.f,o},n.prototype.getOriginalState=function(){return e.extend({},this.originalState)},n.prototype.getState=function(){return e.extend({},this.activeState)},n.prototype.getZoom=function(){return this.activeState.zoom},n.prototype.getRelativeZoom=function(){return this.activeState.zoom/this.originalState.zoom},n.prototype.computeRelativeZoom=function(o){return o/this.originalState.zoom},n.prototype.getPan=function(){return{x:this.activeState.x,y:this.activeState.y}},n.prototype.getCTM=function(){var o=this.options.svg.createSVGMatrix();return o.a=this.activeState.zoom,o.b=0,o.c=0,o.d=this.activeState.zoom,o.e=this.activeState.x,o.f=this.activeState.y,o},n.prototype.setCTM=function(o){var r=this.isZoomDifferent(o),i=this.isPanDifferent(o);if(r||i){if(r&&(this.options.beforeZoom(this.getRelativeZoom(),this.computeRelativeZoom(o.a))===!1?(o.a=o.d=this.activeState.zoom,r=!1):(this.updateCache(o),this.options.onZoom(this.getRelativeZoom()))),i){var a=this.options.beforePan(this.getPan(),{x:o.e,y:o.f}),u=!1,c=!1;a===!1?(o.e=this.getPan().x,o.f=this.getPan().y,u=c=!0):e.isObject(a)&&(a.x===!1?(o.e=this.getPan().x,u=!0):e.isNumber(a.x)&&(o.e=a.x),a.y===!1?(o.f=this.getPan().y,c=!0):e.isNumber(a.y)&&(o.f=a.y)),u&&c||!this.isPanDifferent(o)?i=!1:(this.updateCache(o),this.options.onPan(this.getPan()))}(r||i)&&this.updateCTMOnNextFrame()}},n.prototype.isZoomDifferent=function(o){return this.activeState.zoom!==o.a},n.prototype.isPanDifferent=function(o){return this.activeState.x!==o.e||this.activeState.y!==o.f},n.prototype.updateCache=function(o){this.activeState.zoom=o.a,this.activeState.x=o.e,this.activeState.y=o.f},n.prototype.pendingUpdate=!1,n.prototype.updateCTMOnNextFrame=function(){this.pendingUpdate||(this.pendingUpdate=!0,this.requestAnimationFrame.call(window,this.updateCTMCached))},n.prototype.updateCTM=function(){var o=this.getCTM();t.setCTM(this.viewport,o,this.defs),this.pendingUpdate=!1,this.options.onUpdatedCTM&&this.options.onUpdatedCTM(o)},cn=function(o,r){return new n(o,r)},cn}var dn,sr;function ih(){if(sr)return dn;sr=1;var t=nh(),e=oh(),n=Ut(),o=Qn(),r=rh(),i=function(s,l){this.init(s,l)},a={viewportSelector:".svg-pan-zoom_viewport",panEnabled:!0,controlIconsEnabled:!1,zoomEnabled:!0,dblClickZoomEnabled:!0,mouseWheelZoomEnabled:!0,preventMouseEventsDefault:!0,zoomScaleSensitivity:.1,minZoom:.5,maxZoom:10,fit:!0,contain:!1,center:!0,refreshRate:"auto",beforeZoom:null,onZoom:null,beforePan:null,onPan:null,customEventsHandler:null,eventsListenerElement:null,onUpdatedCTM:null},u={passive:!0},c={passive:!1};i.prototype.init=function(s,l){var d=this;this.svg=s,this.defs=s.querySelector("defs"),o.setupSvgAttributes(this.svg),this.options=n.extend(n.extend({},a),l),this.state="none";var b=o.getBoundingClientRectNormalized(s);this.width=b.width,this.height=b.height,this.viewport=r(o.getOrCreateViewport(this.svg,this.options.viewportSelector),{svg:this.svg,width:this.width,height:this.height,fit:this.options.fit,contain:this.options.contain,center:this.options.center,refreshRate:this.options.refreshRate,beforeZoom:function(g,v){if(d.viewport&&d.options.beforeZoom)return d.options.beforeZoom(g,v)},onZoom:function(g){if(d.viewport&&d.options.onZoom)return d.options.onZoom(g)},beforePan:function(g,v){if(d.viewport&&d.options.beforePan)return d.options.beforePan(g,v)},onPan:function(g){if(d.viewport&&d.options.onPan)return d.options.onPan(g)},onUpdatedCTM:function(g){if(d.viewport&&d.options.onUpdatedCTM)return d.options.onUpdatedCTM(g)}});var E=this.getPublicInstance();E.setBeforeZoom(this.options.beforeZoom),E.setOnZoom(this.options.onZoom),E.setBeforePan(this.options.beforePan),E.setOnPan(this.options.onPan),E.setOnUpdatedCTM(this.options.onUpdatedCTM),this.options.controlIconsEnabled&&e.enable(this),this.lastMouseWheelEventTime=Date.now(),this.setupHandlers()},i.prototype.setupHandlers=function(){var s=this,l=null;if(this.eventListeners={pointerdown:function(g){if(g.pointerType!=="touch"){var v=s.handleMouseDown(g,l);return l=g,v}},touchstart:function(g){var v=s.handleTouchStart(g,l);return l=g,v},pointerup:function(g){if(g.pointerType!=="touch")return s.handleMouseUp(g)},touchend:function(g){return s.handleTouchEnd(g)},pointermove:function(g){if(g.pointerType!=="touch")return s.handleMouseMove(g)},touchmove:function(g){return s.handleTouchMove(g)},pointerleave:function(g){if(g.pointerType!=="touch")return s.handleMouseUp(g)},pointercancel:function(g){if(g.pointerType!=="touch")return s.handleMouseUp(g)},touchleave:function(g){return s.handleTouchEnd(g)},touchcancel:function(g){return s.handleTouchEnd(g)}},this.options.customEventsHandler!=null){this.options.customEventsHandler.init({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});var d=this.options.customEventsHandler.haltEventListeners;if(d&&d.length)for(var b=d.length-1;b>=0;b--)this.eventListeners.hasOwnProperty(d[b])&&delete this.eventListeners[d[b]]}for(var E in this.eventListeners)(this.options.eventsListenerElement||this.svg).addEventListener(E,this.eventListeners[E],this.options.preventMouseEventsDefault?c:u);this.options.mouseWheelZoomEnabled&&(this.options.mouseWheelZoomEnabled=!1,this.enableMouseWheelZoom())},i.prototype.enableMouseWheelZoom=function(){if(!this.options.mouseWheelZoomEnabled){var s=this;this.wheelListener=function(d){return s.handleMouseWheel(d)};var l=!this.options.preventMouseEventsDefault;t.on(this.options.eventsListenerElement||this.svg,this.wheelListener,l),this.options.mouseWheelZoomEnabled=!0}},i.prototype.disableMouseWheelZoom=function(){if(this.options.mouseWheelZoomEnabled){var s=!this.options.preventMouseEventsDefault;t.off(this.options.eventsListenerElement||this.svg,this.wheelListener,s),this.options.mouseWheelZoomEnabled=!1}},i.prototype.handleMouseWheel=function(s){if(!(!this.options.zoomEnabled||this.state!=="none")){this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1);var l=s.deltaY||1,d=Date.now()-this.lastMouseWheelEventTime,b=3+Math.max(0,30-d);this.lastMouseWheelEventTime=Date.now(),"deltaMode"in s&&s.deltaMode===0&&s.wheelDelta&&(l=s.deltaY===0?0:Math.abs(s.wheelDelta)/s.deltaY),l=-.3<l&&l<.3?l:(l>0?1:-1)*Math.log(Math.abs(l)+10)/b;var E=this.svg.getScreenCTM().inverse(),g=o.getEventPoint(s,this.svg).matrixTransform(E),v=Math.pow(1+this.options.zoomScaleSensitivity,-1*l);this.zoomAtPoint(v,g)}},i.prototype.zoomAtPoint=function(s,l,d){var b=this.viewport.getOriginalState();d?(s=Math.max(this.options.minZoom*b.zoom,Math.min(this.options.maxZoom*b.zoom,s)),s=s/this.getZoom()):this.getZoom()*s<this.options.minZoom*b.zoom?s=this.options.minZoom*b.zoom/this.getZoom():this.getZoom()*s>this.options.maxZoom*b.zoom&&(s=this.options.maxZoom*b.zoom/this.getZoom());var E=this.viewport.getCTM(),g=l.matrixTransform(E.inverse()),v=this.svg.createSVGMatrix().translate(g.x,g.y).scale(s).translate(-g.x,-g.y),w=E.multiply(v);w.a!==E.a&&this.viewport.setCTM(w)},i.prototype.zoom=function(s,l){this.zoomAtPoint(s,o.getSvgCenterPoint(this.svg,this.width,this.height),l)},i.prototype.publicZoom=function(s,l){l&&(s=this.computeFromRelativeZoom(s)),this.zoom(s,l)},i.prototype.publicZoomAtPoint=function(s,l,d){if(d&&(s=this.computeFromRelativeZoom(s)),n.getType(l)!=="SVGPoint")if("x"in l&&"y"in l)l=o.createSVGPoint(this.svg,l.x,l.y);else throw new Error("Given point is invalid");this.zoomAtPoint(s,l,d)},i.prototype.getZoom=function(){return this.viewport.getZoom()},i.prototype.getRelativeZoom=function(){return this.viewport.getRelativeZoom()},i.prototype.computeFromRelativeZoom=function(s){return s*this.viewport.getOriginalState().zoom},i.prototype.resetZoom=function(){var s=this.viewport.getOriginalState();this.zoom(s.zoom,!0)},i.prototype.resetPan=function(){this.pan(this.viewport.getOriginalState())},i.prototype.reset=function(){this.resetZoom(),this.resetPan()},i.prototype.handleDblClick=function(s){if(this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),this.options.controlIconsEnabled){var l=s.target.getAttribute("class")||"";if(l.indexOf("svg-pan-zoom-control")>-1)return!1}var d;s.shiftKey?d=1/((1+this.options.zoomScaleSensitivity)*2):d=(1+this.options.zoomScaleSensitivity)*2;var b=o.getEventPoint(s,this.svg).matrixTransform(this.svg.getScreenCTM().inverse());this.zoomAtPoint(d,b)},i.prototype.handleMouseDown=function(s,l){this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),n.mouseAndTouchNormalize(s,this.svg),this.options.dblClickZoomEnabled&&n.isDblClick(s,l)?this.handleDblClick(s):(this.state="pan",this.firstEventCTM=this.viewport.getCTM(),this.stateOrigin=o.getEventPoint(s,this.svg).matrixTransform(this.firstEventCTM.inverse()))},i.prototype.handleMouseMove=function(s){if(this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),this.state==="pan"&&this.options.panEnabled){var l=o.getEventPoint(s,this.svg).matrixTransform(this.firstEventCTM.inverse()),d=this.firstEventCTM.translate(l.x-this.stateOrigin.x,l.y-this.stateOrigin.y);this.viewport.setCTM(d)}},i.prototype.handleMouseUp=function(s){this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),this.state==="pan"&&(this.state="none")},i.prototype.handleTouchStart=function(s,l){if(s.touches.length==1)this.handleMouseDown(s,l);else{this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),this.firstEventCTM=this.viewport.getCTM();var d=o.getTouchPoint(s,this.svg,0),b=o.getTouchPoint(s,this.svg,1);this.firstDistance=n.calculateDistance(d,b),d.x=(d.x+b.x)/2,d.y=(d.y+b.y)/2,this.stateOrigin=d.matrixTransform(this.firstEventCTM.inverse()),this.firstZoomLevel=this.getZoom()}},i.prototype.handleTouchMove=function(s){if(s.touches.length==1)this.handleMouseMove(s);else{if(this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),!this.options.panEnabled&&!this.options.zoomEnabled)return;var l=o.getTouchPoint(s,this.svg,0),d=o.getTouchPoint(s,this.svg,1),b=this.svg.createSVGPoint();if(b.x=(l.x+d.x)/2,b.y=(l.y+d.y)/2,this.state==="pan"&&this.options.panEnabled){var E=b.matrixTransform(this.firstEventCTM.inverse()),g=this.firstEventCTM.translate(E.x-this.stateOrigin.x,E.y-this.stateOrigin.y);this.viewport.setCTM(g)}if(this.options.zoomEnabled){var v=n.calculateDistance(l,d),w=v/this.firstDistance,x=this.svg.getScreenCTM().inverse(),y=b.matrixTransform(x);this.zoomAtPoint(this.firstZoomLevel*w,y,!0)}}},i.prototype.handleTouchEnd=function(s){if(s.touches.length==0)this.handleMouseUp(s);else if(this.options.preventMouseEventsDefault&&(s.preventDefault?s.preventDefault():s.returnValue=!1),this.firstEventCTM=this.viewport.getCTM(),s.touches.length==1)this.stateOrigin=o.getEventPoint(s,this.svg).matrixTransform(this.firstEventCTM.inverse());else{var l=o.getTouchPoint(s,this.svg,0),d=o.getTouchPoint(s,this.svg,1);this.firstDistance=n.calculateDistance(l,d),l.x=(l.x+d.x)/2,l.y=(l.y+d.y)/2,this.stateOrigin=l.matrixTransform(this.firstEventCTM.inverse())}},i.prototype.fit=function(){var s=this.viewport.getViewBox(),l=Math.min(this.width/s.width,this.height/s.height);this.zoom(l,!0)},i.prototype.contain=function(){var s=this.viewport.getViewBox(),l=Math.max(this.width/s.width,this.height/s.height);this.zoom(l,!0)},i.prototype.center=function(){var s=this.viewport.getViewBox(),l=(this.width-(s.width+s.x*2)*this.getZoom())*.5,d=(this.height-(s.height+s.y*2)*this.getZoom())*.5;this.getPublicInstance().pan({x:l,y:d})},i.prototype.updateBBox=function(){this.viewport.simpleViewBoxCache()},i.prototype.pan=function(s){var l=this.viewport.getCTM();l.e=s.x,l.f=s.y,this.viewport.setCTM(l)},i.prototype.panBy=function(s){var l=this.viewport.getCTM();l.e+=s.x,l.f+=s.y,this.viewport.setCTM(l)},i.prototype.getPan=function(){var s=this.viewport.getState();return{x:s.x,y:s.y}},i.prototype.resize=function(){var s=o.getBoundingClientRectNormalized(this.svg);this.width=s.width,this.height=s.height;var l=this.viewport;l.options.width=this.width,l.options.height=this.height,l.processCTM(),this.options.controlIconsEnabled&&(this.getPublicInstance().disableControlIcons(),this.getPublicInstance().enableControlIcons())},i.prototype.destroy=function(){var s=this;this.beforeZoom=null,this.onZoom=null,this.beforePan=null,this.onPan=null,this.onUpdatedCTM=null,this.options.customEventsHandler!=null&&this.options.customEventsHandler.destroy({svgElement:this.svg,eventsListenerElement:this.options.eventsListenerElement,instance:this.getPublicInstance()});for(var l in this.eventListeners)(this.options.eventsListenerElement||this.svg).removeEventListener(l,this.eventListeners[l],this.options.preventMouseEventsDefault?c:u);this.disableMouseWheelZoom(),this.getPublicInstance().disableControlIcons(),f=f.filter(function(d){return d.svg!==s.svg}),delete this.options,delete this.viewport,delete this.publicInstance,delete this.pi,this.getPublicInstance=function(){return null}},i.prototype.getPublicInstance=function(){var s=this;return this.publicInstance||(this.publicInstance=this.pi={enablePan:function(){return s.options.panEnabled=!0,s.pi},disablePan:function(){return s.options.panEnabled=!1,s.pi},isPanEnabled:function(){return!!s.options.panEnabled},pan:function(l){return s.pan(l),s.pi},panBy:function(l){return s.panBy(l),s.pi},getPan:function(){return s.getPan()},setBeforePan:function(l){return s.options.beforePan=l===null?null:n.proxy(l,s.publicInstance),s.pi},setOnPan:function(l){return s.options.onPan=l===null?null:n.proxy(l,s.publicInstance),s.pi},enableZoom:function(){return s.options.zoomEnabled=!0,s.pi},disableZoom:function(){return s.options.zoomEnabled=!1,s.pi},isZoomEnabled:function(){return!!s.options.zoomEnabled},enableControlIcons:function(){return s.options.controlIconsEnabled||(s.options.controlIconsEnabled=!0,e.enable(s)),s.pi},disableControlIcons:function(){return s.options.controlIconsEnabled&&(s.options.controlIconsEnabled=!1,e.disable(s)),s.pi},isControlIconsEnabled:function(){return!!s.options.controlIconsEnabled},enableDblClickZoom:function(){return s.options.dblClickZoomEnabled=!0,s.pi},disableDblClickZoom:function(){return s.options.dblClickZoomEnabled=!1,s.pi},isDblClickZoomEnabled:function(){return!!s.options.dblClickZoomEnabled},enableMouseWheelZoom:function(){return s.enableMouseWheelZoom(),s.pi},disableMouseWheelZoom:function(){return s.disableMouseWheelZoom(),s.pi},isMouseWheelZoomEnabled:function(){return!!s.options.mouseWheelZoomEnabled},setZoomScaleSensitivity:function(l){return s.options.zoomScaleSensitivity=l,s.pi},setMinZoom:function(l){return s.options.minZoom=l,s.pi},setMaxZoom:function(l){return s.options.maxZoom=l,s.pi},setBeforeZoom:function(l){return s.options.beforeZoom=l===null?null:n.proxy(l,s.publicInstance),s.pi},setOnZoom:function(l){return s.options.onZoom=l===null?null:n.proxy(l,s.publicInstance),s.pi},zoom:function(l){return s.publicZoom(l,!0),s.pi},zoomBy:function(l){return s.publicZoom(l,!1),s.pi},zoomAtPoint:function(l,d){return s.publicZoomAtPoint(l,d,!0),s.pi},zoomAtPointBy:function(l,d){return s.publicZoomAtPoint(l,d,!1),s.pi},zoomIn:function(){return this.zoomBy(1+s.options.zoomScaleSensitivity),s.pi},zoomOut:function(){return this.zoomBy(1/(1+s.options.zoomScaleSensitivity)),s.pi},getZoom:function(){return s.getRelativeZoom()},setOnUpdatedCTM:function(l){return s.options.onUpdatedCTM=l===null?null:n.proxy(l,s.publicInstance),s.pi},resetZoom:function(){return s.resetZoom(),s.pi},resetPan:function(){return s.resetPan(),s.pi},reset:function(){return s.reset(),s.pi},fit:function(){return s.fit(),s.pi},contain:function(){return s.contain(),s.pi},center:function(){return s.center(),s.pi},updateBBox:function(){return s.updateBBox(),s.pi},resize:function(){return s.resize(),s.pi},getSizes:function(){return{width:s.width,height:s.height,realZoom:s.getZoom(),viewBox:s.viewport.getViewBox()}},destroy:function(){return s.destroy(),s.pi}}),this.publicInstance};var f=[],h=function(s,l){var d=n.getSvg(s);if(d===null)return null;for(var b=f.length-1;b>=0;b--)if(f[b].svg===d)return f[b].instance.getPublicInstance();return f.push({svg:d,instance:new i(d,l)}),f[f.length-1].instance.getPublicInstance()};return dn=h,dn}var ah=ih();const sh=th(ah),lh={getViewArea(){const t=this.getSizes(),e=this.getPan(),n=t.realZoom;e.x/=n,e.y/=n;const o={width:t.width/n,height:t.height/n};return{box:{top:-e.y,bottom:o.height-e.y,left:-e.x,right:o.width-e.x},center:{x:o.width/2-e.x,y:o.height/2-e.y}}},getViewBox(){return this.getViewArea().box},setViewBox(t){const e=t.right-t.left,n=t.bottom-t.top,{width:o,height:r}=this.getSizes(),i=e/n,a=o/r,u=i<a?n*a:e,c=i>a?e/a:n,f=Math.min(o/u,r/c),h=this.getRealZoom(),s=this.getZoom(),l=h/s;this.zoom(f/l);const d={x:(t.left+e/2)*f,y:(t.top+n/2)*f};this.pan({x:-d.x+u/2*f,y:-d.y+c/2*f})},getRealZoom(){return this.getSizes().realZoom},applyAbsoluteZoomLevel(t,e,n){const o=Math.max(1e-4,e),r=Math.max(o,n),i=Math.max(Math.min(r,t),o),a=this.getRealZoom(),u=this.getZoom(),c=a/u;this.setMinZoom(o/c).setMaxZoom(r/c).zoom(i/c)},isPanEnabled(){return this._isPanEnabled},enablePan(){return this._isPanEnabled=!0,this._internalEnablePan(),this},disablePan(){return this._isPanEnabled=!1,this._internalDisablePan(),this},isZoomEnabled(){return this._isZoomEnabled},enableZoom(){return this._isZoomEnabled=!0,this._internalEnableZoom(),this},disableZoom(){return this._isZoomEnabled=!1,this._internalDisableZoom(),this},setPanEnabled(t){return t?this.enablePan():this.disablePan(),this},setZoomEnabled(t){return t?(this.enableZoom(),this.enableDblClickZoom()):(this.disableZoom(),this.disableDblClickZoom()),this}};function uh(t,e){var n,o;const r=t;return r._isPanEnabled=(n=e.panEnabled)!=null?n:!0,r._isZoomEnabled=(o=e?.zoomEnabled)!=null?o:!0,r._internalIsPanEnabled=r.isPanEnabled,r._internalEnablePan=r.enablePan,r._internalDisablePan=r.disablePan,r._internalIsZoomEnabled=r.isZoomEnabled,r._internalEnableZoom=r.enableZoom,r._internalDisableZoom=r.disableZoom,Object.assign(t,lh),r}function ch(t,e){var n,o,r,i,a,u;const c=(o=(n=e.customEventsHandler)==null?void 0:n.init)!=null?o:s=>{},f=(i=(r=e.customEventsHandler)==null?void 0:r.destroy)!=null?i:s=>{},h=(u=(a=e.customEventsHandler)==null?void 0:a.haltEventListeners)!=null?u:[];return e.mouseWheelZoomEnabled===void 0&&(e.mouseWheelZoomEnabled=e.zoomEnabled),e.customEventsHandler={init:s=>{uh(s.instance,e),c(s)},destroy:s=>f(s),haltEventListeners:h},sh(t,e)}function dh(t,e){const n=j();let o=0;const r=[],i=[],a=()=>{o=1,r.forEach(c=>c()),r.length=0},u=()=>{o=2,i.forEach(c=>c()),i.length=0};return et(()=>{var c,f,h,s,l,d;const b=G(t.value,"<svg>"),E=(f=(c=e.customEventsHandler)==null?void 0:c.init)!=null?f:x=>{},g=(s=(h=e.customEventsHandler)==null?void 0:h.destroy)!=null?s:x=>{},v=(d=(l=e.customEventsHandler)==null?void 0:l.haltEventListeners)!=null?d:[];e.customEventsHandler={init:x=>{n.value=x.instance,E(x),a()},destroy:x=>{u(),g(x)},haltEventListeners:v};const w=()=>{const x=b.getBoundingClientRect();x.width!==0&&x.height!==0?ch(b,e):setTimeout(w,200)};w()}),gt(()=>{var c;(c=n.value)==null||c.destroy(),n.value=void 0}),{svgPanZoom:n,onSvgPanZoomMounted:c=>{o===0?r.push(c):o===1&&c()},onSvgPanZoomUnmounted:c=>{o===0||o===1?i.push(c):c()}}}const Pi=Symbol("zoomLevel");function fh(t,e){const n=_(()=>e.scalingObjects?1:1/t.value);return Ze(Pi,{zoomLevel:t,scale:n}),{scale:n}}function ve(){return G(Ne(Pi),"zoomLevel")}function hh(t){return t instanceof Promise||t&&typeof t.then=="function"}function vh(){let t=null;const e=j({enabled:!1,duration:300,timingFunction:"linear"});function n(o,r=300,i="linear"){t&&(clearTimeout(t),t=null),e.value={enabled:!0,duration:r,timingFunction:i},On(()=>we(this,null,function*(){const a=o();hh(a)&&(yield a),t&&clearTimeout(t),t=window?.setTimeout(()=>{e.value.enabled=!1,t=null},r)}))}return{transitionWhile:n,transitionOption:e}}function ph(t){const e=j({}),n=j(!1);let o=1;const r=new Map;return he(()=>{if(t.value instanceof Array){const i=new Set([]);if(e.value=Object.fromEntries(t.value.map(a=>{let u=a.id;return u||(n.value||(n.value=!0,console.warn("[v-network-graph] Please specify the `id` field for the `Path` object. Currently, this works for compatibility, but in the future, the id field will be required.")),u=r.get(a),u||(u="path-"+o++,r.set(a,u))),i.add(u),[u,a]})),n.value)for(const[a,u]of Array.from(r.entries()))i.has(u)||r.delete(a)}else e.value=t.value}),{objects:e,isInCompatibilityModeForPath:n}}function gh(t,e,n,o){if(o){const i=j(o(t[e])),a=u=>{Ae(u,i.value)||(i.value=u),Ae(u,t[e])||n(`update:${e}`,u)};return F(()=>o(i.value),a),F(()=>t[e],u=>a(o(u))),i.value!==t[e]&&n(`update:${e}`,i.value),i}const r=j(t[e]);return F(()=>t[e],i=>{Ae(i,r.value)||(r.value=i)}),F(r,i=>{Ae(i,t[e])||n(`update:${e}`,i)}),r}function fn(t,e,n,o){const r=Me(new Set);return F(()=>t[e],()=>{const i=t[e].filter(a=>a in n.value);Ae(i,Array.from(r))||(r.clear(),i.forEach(r.add,r))},{deep:!0,immediate:!0}),F(r,()=>{const i=Array.from(r);Ae(t[e],i)||o(`update:${e}`,i)}),ze(r)}const Mi=Symbol("selection");function mh(t,e,n){Ze(Mi,{selectedNodes:t,selectedEdges:e,selectedPaths:n})}function bh(){return G(Ne(Mi),"Selections")}const Oi=Symbol("layouts");function yh(t){Ze(Oi,t)}function eo(){return G(Ne(Oi),"Layouts")}function wh(t,e){for(let n=0;n<t.length-1;n++)e(t[n],t[n+1])}function st(t,e){const n=t.indexOf(e);n>=0&&t.splice(n,1)}function xh(t,e,n){const o=t.indexOf(e);o<0||t.splice(o+1,0,n)}function Eh(t,e){const n=["edges","edge-labels","focusring","nodes","node-labels","paths"];return _(()=>{const o=jd(t.view.builtInLayerOrder).filter(i=>{const a=n.includes(i);return a||console.warn(`Layer ${i} is not a built-in layer.`),a}).reverse(),r=[...n];return wh(o,(i,a)=>{st(r,a),xh(r,i,a)}),"edge-label"in e||"edges-label"in e||st(r,"edge-labels"),t.node.focusring.visible||st(r,"focusring"),t.node.label.visible===!1&&st(r,"node-labels"),t.path.visible||st(r,"paths"),r})}const lr=()=>new Promise(t=>On(t));function Sh(t,e){const n=Math.max(t.width,t.height,e.width,e.height)/1e4;return Math.abs(t.x-e.x)<n&&Math.abs(t.y-e.y)<n&&Math.abs(t.width-e.width)<n&&Math.abs(t.height-e.height)<n}function kh(t,e){return{top:t.top+e.top,left:t.left+e.left,right:t.right+e.right,bottom:t.bottom+e.bottom}}function Ph(t,e){return{top:t.top*e,left:t.left*e,right:t.right*e,bottom:t.bottom*e}}function Mh(t,e){return{top:t.top/e,left:t.left/e,right:t.right/e,bottom:t.bottom/e}}function Ti(t){return{top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function _i(t){return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}function Oh(t,e){return{top:Math.min(t.top,e.top),left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),bottom:Math.max(t.bottom,e.bottom)}}const Th=new RegExp("^\\d+$");function _h(t,e){let n={top:0,left:0,right:0,bottom:0};if(typeof t=="string"){const o=Ge(t,e.width),r=Ge(t,e.height);o===void 0||r===void 0?console.warn("Invalid `fitContentMargin` value.",t):n={top:r,left:o,right:o,bottom:r}}else if(typeof t=="number"){const o=t;n={top:o,left:o,right:o,bottom:o}}else{if(t.top){const o=Ge(t.top,e.height);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.top):n.top=o}if(t.left){const o=Ge(t.left,e.width);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.left):n.left=o}if(t.right){const o=Ge(t.right,e.width);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.right):n.right=o}if(t.bottom){const o=Ge(t.bottom,e.height);o===void 0?console.warn("Invalid `fitContentMargin` value.",t.bottom):n.bottom=o}}return n}function Ch(t,e,n,o,r,i){const a=t.getBBox();if(i)return Ah(a,e,n,r);{const u=zh(t);return Ih(a,u,e,n,o,r)}}function Ge(t,e){if(typeof t=="string"){if(t.endsWith("%")){const n=parseInt(t.toString());if(Number.isFinite(n))return e*(n/100)}else if(t.endsWith("px")||Th.test(t)){const n=parseInt(t.toString());if(Number.isFinite(n))return n}}else if(typeof t=="number")return t}function zh(t){return Array.from(t.querySelectorAll(".v-ng-graph-objects")).map(e=>e.getBBox()).reduce((e,n,o)=>{if(o===0)return n;const r=Math.min(e.x,n.x),i=Math.min(e.y,n.y);return{x:r,y:i,width:Math.max(e.x+e.width-r,n.x+n.width-r),height:Math.max(e.y+e.height-i,n.y+n.height-i)}},{x:0,y:0,width:0,height:0})}function Ah(t,e,n,o){if(Object.keys(n).length<=1)return;const r=Ci(t,e,o);if(r>0){const i=Ti(t);return{zoom:r,pos:zi(i,r,e,o)}}else return}function Ih(t,e,n,o,r,i){if(Object.keys(o).length<=1)return;const a=vf(o),u={top:(a.top-e.y)*r,left:(a.left-e.x)*r,right:(e.x+e.width-a.right)*r,bottom:(e.y+e.height-a.bottom)*r};let c=Ci(t,n,i);if(c===0)return;const f=At(n,kh(i,u));if(f.width<=0||f.height<=0)return;const h=Ti(t),s=At(n,i),l=Sh(t,e);let d=0,b=0,E={top:0,left:0,right:0,bottom:0};do{b=c;const g=Mh(u,c),v={top:a.top-g.top,left:a.left-g.left,right:a.right+g.right,bottom:a.bottom+g.bottom};E=l?v:Oh(h,v);const w=_i(E),x=[s.width/w.width,s.height/w.height].filter(y=>y>0);if(x.length===0)return;c=Math.min(...x),d++}while(Math.abs(b-c)>1e-6&&d<10);return{zoom:c,pos:zi(E,c,n,i)}}function Ci(t,e,n){if(t.width===0||t.height===0)return 0;const o=At(e,n);if(o.width<=0||o.height<=0)return 0;const r=[o.width/t.width,o.height/t.height];return Math.min(...r)}function zi(t,e,n,o){const r=At(n,o),i=_i(Ph(t,e)),a=(r.width-i.width)/2,u=(r.height-i.height)/2,c=i.x-o.left,f=i.y-o.top;return{x:-c+a,y:-f+u}}function At(t,e){const n=e.left+e.right,o=e.top+e.bottom;return{width:t.width-n,height:t.height-o}}const $h=["x","y","width","height","fill","stroke","stroke-width","stroke-dasharray"],Lh=U({__name:"VSelectionBox",props:{box:{},config:{}},setup(t){return(e,n)=>(P(),A("rect",{class:"v-ng-selection-box",x:Math.round(e.box.pos.x),y:Math.round(e.box.pos.y),width:Math.ceil(e.box.size.width),height:Math.ceil(e.box.size.height),fill:e.config.color,stroke:e.config.strokeColor,"stroke-width":e.config.strokeWidth,"stroke-dasharray":e.config.strokeDasharray},null,8,$h))}}),Nh=["points","fill"],Zh=U({__name:"VMarkerHeadArrow",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){const e=t,n=_(()=>{const o=e.width,r=e.height;return e.isSource?`${o} ${r}, 0 ${r/2}, ${o} 0`:`0 0, ${o} ${r/2}, 0 ${r}`});return(o,r)=>(P(),A("polygon",{points:n.value,fill:o.color},null,8,Nh))}}),jh=["points","stroke-width","stroke"],Dh=U({__name:"VMarkerHeadAngle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){const e=t,n=_(()=>e.units==="strokeWidth"?1:Math.min(e.width,e.height)/5),o=_(()=>{const r=n.value/2,i=e.width,a=e.height;return e.isSource?`${i-r} ${a-r}, ${r} ${a/2}, ${i-r} ${r}`:`${r} ${r}, ${i-r} ${a/2}, ${r} ${a-r}`});return(r,i)=>(P(),A("polyline",{points:o.value,fill:"none","stroke-width":n.value,stroke:r.color,"stroke-linecap":"round","stroke-linejoin":"round"},null,8,jh))}}),Rh=["fill","cx","cy","rx","ry"],Bh=U({__name:"VMarkerHeadCircle",props:{width:{},height:{},refX:{},color:{},isSource:{type:Boolean},units:{}},setup(t){return(e,n)=>(P(),A("ellipse",{fill:e.color,cx:e.width/2,cy:e.height/2,rx:e.width/2,ry:e.height/2},null,8,Rh))}}),Hh=["id","markerWidth","markerHeight","refX","refY","markerUnits"],Wh=U({__name:"VMarkerHead",props:{id:{},marker:{},scale:{}},setup(t){const e={arrow:Zh,angle:Dh,circle:Bh},n=t,o=_(()=>n.marker.width*(n.marker.units==="strokeWidth"?1:n.scale)),r=_(()=>n.marker.height*(n.marker.units==="strokeWidth"?1:n.scale)),i=_(()=>{const u=n.marker.margin*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?o.value+u:-u}),a=_(()=>{const u=n.marker.offset*(n.marker.units==="strokeWidth"?1:n.scale);return n.marker.isSource?u:-u});return(u,c)=>u.marker.type!=="none"&&u.marker.type!=="custom"?(P(),A("marker",{key:0,id:u.id,markerWidth:o.value,markerHeight:r.value,refX:i.value,refY:r.value/2+a.value,orient:"auto",markerUnits:u.marker.units,class:"v-ng-marker"},[(P(),V(hr(e[u.marker.type]),{width:o.value,height:r.value,refX:i.value,color:u.marker.color,"is-source":u.marker.isSource,units:u.marker.units},null,8,["width","height","refX","color","is-source","units"]))],8,Hh)):ce("",!0)}}),Vh={class:"v-ng-background-grid","shape-rendering":"crispEdges"},Uh=["d"],Fh=["d"],Gh=["d"],qh=["d"],Xh=U({__name:"VBackgroundGrid",setup(t){const{container:e,svgPanZoom:n}=Hn(),{zoomLevel:o}=ve(),r=eh(),i=Kd(),a=j({x:0,y:0}),u=j({width:500,height:500});et(()=>{var l;const d=(l=n.value)==null?void 0:l.getPan();d&&(a.value={x:-d.x,y:-d.y});const b=e.value.getBoundingClientRect();u.value={width:b.width,height:b.height}}),r.on("view:resize",l=>{u.value={width:l.width,height:l.height}}),r.on("view:pan",l=>{a.value={x:-l.x,y:-l.y}}),r.on("view:zoom",()=>{var l;const d=(l=n.value)==null?void 0:l.getPan();d&&(a.value={x:-d.x,y:-d.y})});const c=j([]),f=j([]),h=j([]),s=j([]);return he(()=>{const l=[],d=[],b=[],E=[],g=1/o.value,v=i.grid.interval,w=a.value.x*g,x=a.value.y*g,y=Math.floor(u.value.width/v+1)*v,p=Math.floor(u.value.height/v+1)*v,m=(a.value.x+y)*g,S=(a.value.y+p)*g,M=i.grid.thickIncrements,I=i.grid.line.dasharray,T=i.grid.thick.dasharray;let C={stroke:i.grid.thick.color,"stroke-width":i.grid.thick.width,"stroke-dasharray":T,"stroke-dashoffset":T?w/g:void 0},Z={stroke:i.grid.line.color,"stroke-width":i.grid.line.width,"stroke-dasharray":I,"stroke-dashoffset":I?w/g:void 0};const D=(a.value.x+y)*g;for(let R=x;R<=S;R+=v){const H=Math.floor(R/v);M&&H%M===0?l.push([H,H*v,w,D,C]):b.push([H,H*v,w,D,Z])}C=ae({},C),C["stroke-dashoffset"]=T?x/g:void 0,Z=ae({},Z),Z["stroke-dashoffset"]=I?x/g:void 0;const X=(a.value.y+p)*g;for(let R=w;R<=m;R+=v){const H=Math.floor(R/v);M&&H%M===0?d.push([H,H*v,x,X,C]):E.push([H,H*v,x,X,Z])}f.value=l,c.value=d,s.value=b,h.value=E}),(l,d)=>(P(),A("g",Vh,[(P(!0),A(q,null,Q(s.value,([b,E,g,v,w])=>(P(),A("path",oe({key:`nv${b}`,d:`M ${g} ${E} L ${v} ${E}`,ref_for:!0},w,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Uh))),128)),(P(!0),A(q,null,Q(h.value,([b,E,g,v,w])=>(P(),A("path",oe({key:`nh${b}`,d:`M ${E} ${g} L ${E} ${v}`,ref_for:!0},w,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Fh))),128)),(P(!0),A(q,null,Q(f.value,([b,E,g,v,w])=>(P(),A("path",oe({key:`tv${b}`,d:`M ${g} ${E} L ${v} ${E}`,ref_for:!0},w,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,Gh))),128)),(P(!0),A(q,null,Q(c.value,([b,E,g,v,w])=>(P(),A("path",oe({key:`th${b}`,d:`M ${E} ${g} L ${E} ${v}`,ref_for:!0},w,{style:{"vector-effect":"non-scaling-stroke"}}),null,16,qh))),128))]))}}),Kh=U({__name:"VBackgroundViewport",setup(t){const{viewport:e}=Hn(),n=j(),o=(i,a,u)=>{i.forEach(c=>{var f;return a.setAttribute(c,(f=u.getAttribute(c))!=null?f:"")})},r=new MutationObserver(i=>{if(!n.value)return;const a=i.map(u=>{var c;return(c=u.attributeName)!=null?c:""}).filter(Boolean);o(a,n.value,e.value)});return et(()=>{const i=["transform","style"];r.observe(e.value,{attributes:!0,attributeFilter:i}),n.value&&o(i,n.value,e.value)}),gt(()=>{r.disconnect()}),(i,a)=>(P(),A("g",{ref_key:"background",ref:n,class:"v-ng-background-viewport"},[K(i.$slots,"default")],512))}}),Yh=["d","stroke-width"],Jh=U({__name:"VEdgeBackground",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(t){const e=t,{scale:n}=ve(),o=Wt(),{handleEdgePointerDownEvent:r,handleEdgePointerOverEvent:i,handleEdgePointerOutEvent:a,handleEdgeClickEvent:u,handleEdgeDoubleClickEvent:c,handleEdgeContextMenu:f}=yt(),h=_(()=>{const l=e.state.position;if(e.state.loop){const{radius:d,isLargeArc:b,isClockwise:E}=e.state.loop,[g,v]=d,w=b?1:0,x=E?1:0;return`M ${l.p1.x} ${l.p1.y} A ${g} ${v} 0 ${w} ${x} ${l.p2.x} ${l.p2.y}`}else{if(o.type==="straight"||!e.state.curve)return`M ${l.p1.x} ${l.p1.y} L ${l.p2.x} ${l.p2.y}`;{const d=[...e.state.curve.control,{x:l.p2.x,y:l.p2.y}],b=[];return b.push(`M ${l.p1.x} ${l.p1.y}`),Dn(d,2).forEach(([E,g])=>b.push(`Q ${E.x} ${E.y} ${g.x} ${g.y}`)),b.join(" ")}}}),s=_(()=>(e.state.line.stroke.width+10)*n.value);return(l,d)=>(P(),A("path",{class:fe({"v-ng-line-background":!0,selectable:l.state.selectable}),d:h.value,stroke:"transparent","stroke-width":s.value,fill:"none",onPointerdown:d[0]||(d[0]=ye(b=>O(r)(l.id,b),["stop"])),onPointerenterPassive:d[1]||(d[1]=b=>O(i)(l.id,b)),onPointerleavePassive:d[2]||(d[2]=b=>O(a)(l.id,b)),onClick:d[3]||(d[3]=ye(b=>O(u)(l.id,b),["stop"])),onDblclick:d[4]||(d[4]=ye(b=>O(c)(l.id,b),["stop"])),onContextmenu:d[5]||(d[5]=b=>O(f)(l.id,b))},null,42,Yh))}}),Qh=U({__name:"VEdgeBackgrounds",setup(t){const{edgeStates:e,edgeGroupStates:n,layouts:o}=Ee();return(r,i)=>(P(!0),A(q,null,Q(O(n).edgeGroups,({summarize:a,edges:u})=>(P(),A(q,null,[a?ce("",!0):(P(!0),A(q,{key:0},Q(u,(c,f)=>(P(),V(Jh,{key:f,id:f,state:O(e)[f],"source-pos":O(o).nodes[c.source],"target-pos":O(o).nodes[c.target]},null,8,["id","state","source-pos","target-pos"]))),128))],64))),256))}}),ev=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],Ai=U({__name:"VLine",props:{p1:{},p2:{},config:{}},setup(t){const e=t,{scale:n}=ve(),o=_(()=>e.config.width*n.value),r=_(()=>bt(e.config.dasharray,n.value)),i=_(()=>{const a=e.config.animate?Rt(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return a?{"--animation-speed":a}:void 0});return(a,u)=>(P(),A("path",{class:fe({"v-ng-line":!0,animate:a.config.animate}),d:`M ${a.p1.x} ${a.p1.y} L ${a.p2.x} ${a.p2.y}`,stroke:a.config.color,"stroke-width":o.value,"stroke-dasharray":r.value,"stroke-linecap":a.config.linecap,style:pt(i.value)},null,14,ev))}}),tv=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap"],nv=U({__name:"VArc",props:{p1:{},p2:{},radius:{},isLargeArc:{type:Boolean},isClockwise:{type:Boolean},config:{}},setup(t){const e=t,{scale:n}=ve(),o=_(()=>e.config.width*n.value),r=_(()=>bt(e.config.dasharray,n.value)),i=_(()=>{const u=e.config.animate?Rt(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return u?{"--animation-speed":u}:void 0}),a=_(()=>{const{p1:u,p2:c,radius:f,isLargeArc:h,isClockwise:s}=e,[l,d]=f,b=h?1:0,E=s?1:0;return`M ${u.x} ${u.y} A ${l} ${d} 0 ${b} ${E} ${c.x} ${c.y}`});return(u,c)=>(P(),A("path",{class:fe({"v-ng-line":!0,animate:u.config.animate}),d:a.value,stroke:u.config.color,"stroke-width":o.value,"stroke-dasharray":r.value,"stroke-linecap":u.config.linecap,style:pt(i.value),fill:"none"},null,14,tv))}}),ov=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","marker-start","marker-end"],rv=U({__name:"VEdgeCurved",props:{state:{},config:{},markerStart:{default:void 0},markerEnd:{default:void 0}},setup(t){const e=t,{scale:n}=ve(),o=_(()=>{var u,c;const f=e.state.position,h=[...(c=(u=e.state.curve)==null?void 0:u.control)!=null?c:[],{x:f.p2.x,y:f.p2.y}],s=[];return s.push(`M ${f.p1.x} ${f.p1.y}`),Dn(h,2).forEach(([l,d])=>s.push(`Q ${l.x} ${l.y} ${d.x} ${d.y}`)),s.join(" ")}),r=_(()=>e.config.width*n.value),i=_(()=>bt(e.config.dasharray,n.value)),a=_(()=>{const u=e.config.animate?Rt(e.config.dasharray)*e.config.animationSpeed*n.value:!1;return u?{"--animation-speed":u}:void 0});return(u,c)=>(P(),A("path",{class:fe({"v-ng-line":!0,animate:u.config.animate}),d:o.value,fill:"none",stroke:u.config.color,"stroke-width":r.value,"stroke-dasharray":i.value,"stroke-linecap":u.config.linecap,style:pt(a.value),"marker-start":u.markerStart,"marker-end":u.markerEnd},null,14,ov))}}),iv=U({__name:"VEdge",props:{id:{},state:{},sourcePos:{default:void 0},targetPos:{default:void 0}},setup(t){const e=Wt();return(n,o)=>n.state.loop?(P(),V(nv,oe({key:0},n.state.position,{radius:n.state.loop.radius,"is-large-arc":n.state.loop.isLargeArc,"is-clockwise":n.state.loop.isClockwise,class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["radius","is-large-arc","is-clockwise","class","config","marker-start","marker-end"])):O(e).type=="straight"||!n.state.curve?(P(),V(Ai,oe({key:1,"data-edge-id":n.id},n.state.position,{class:[{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"],config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0}),null,16,["data-edge-id","class","config","marker-start","marker-end"])):(P(),V(rv,{key:2,"data-edge-id":n.id,class:fe([{selectable:n.state.selectable,hover:n.state.hovered,selected:n.state.selected},"v-ng-edge"]),state:n.state,config:n.state.line.stroke,"marker-start":n.state.sourceMarkerId?`url('#${n.state.sourceMarkerId}')`:void 0,"marker-end":n.state.targetMarkerId?`url('#${n.state.targetMarkerId}')`:void 0},null,8,["data-edge-id","class","state","config","marker-start","marker-end"]))}}),av=["cx","cy","r","fill","stroke","stroke-width","stroke-dasharray"],sv=["x","y","width","height","rx","ry","fill","stroke","stroke-width","stroke-dasharray"],Ft=U({__name:"VShape",props:{baseX:{default:0},baseY:{default:0},config:{}},setup(t){const e=t,{scale:n}=ve(),o=j(e.baseX),r=j(e.baseY),i=j(0),a=j("#000000"),u=j(void 0),c=j(0),f=j(0),h=j(0),s=j(0);return he(()=>{var l;const d=n.value;i.value=e.config.strokeWidth*d,a.value=(l=e.config.strokeColor)!=null?l:"none",u.value=bt(e.config.strokeDasharray,d),e.config.type==="circle"?(o.value=e.baseX,r.value=e.baseY,c.value=e.config.radius*d):(f.value=e.config.width*d,h.value=e.config.height*d,s.value=e.config.borderRadius*d,o.value=e.baseX-f.value/2,r.value=e.baseY-h.value/2)}),(l,d)=>l.config.type==="circle"?(P(),A("circle",{key:0,class:"v-ng-shape-circle",cx:o.value,cy:r.value,r:c.value,fill:l.config.color,stroke:a.value,"stroke-width":i.value,"stroke-dasharray":u.value},null,8,av)):(P(),A("rect",{key:1,class:"v-ng-shape-rect",x:o.value,y:r.value,width:f.value,height:h.value,rx:s.value,ry:s.value,fill:l.config.color,stroke:a.value,"stroke-width":i.value,"stroke-dasharray":u.value},null,8,sv))}}),lv=["rx","ry","fill","transform"],uv=["x","y","dominant-baseline","font-family","font-size","fill"],cv=["x","dy","dominant-baseline"],Gt=U({__name:"VLabelText",props:{text:{},x:{default:0},y:{default:0},dominantBaseline:{default:"central"},config:{}},setup(t){const e=t,n=ta(),{scale:o}=ve(),r=_(()=>{var g,v;return(v=(g=e.text)==null?void 0:g.toString().split(/\r?\n/))!=null?v:""}),i=_(()=>{var g;return(g=n["font-size"])!=null?g:e.config.fontSize*o.value}),a=_(()=>i.value*e.config.lineHeight),u=_(()=>{const g=e.dominantBaseline;return g==="hanging"?0:g==="central"?-(a.value*(r.value.length-1))/2:-a.value*(r.value.length-1)}),c=j(),f=j(""),h=Me({x:0,y:0,width:0,height:0}),s=_(()=>{var g,v;const w=e.config.background;if(!w)return h;let x,y;w.padding instanceof Object?(x=w.padding.vertical,y=w.padding.horizontal):(x=(g=w.padding)!=null?g:0,y=(v=w.padding)!=null?v:0);const p=a.value-i.value;return{x:h.x-y*o.value,y:h.y-x*o.value-p/2,width:h.width+y*2*o.value,height:h.height+x*2*o.value+p}});let l;const d=()=>{e.config.background&&e.config.background.visible?!l&&c.value&&(l=E(c.value,h,f)):(l?.disconnect(),l=void 0)};et(()=>d()),F(()=>e.config.background&&e.config.background.visible,(g,v)=>{g!=v&&d()}),gt(()=>{l?.disconnect(),l=void 0});function b(g,v,w){var x;const y=g.getBBox();v.x=y.x,v.y=y.y,v.width=y.width,v.height=y.height,w.value=(x=g.getAttribute("transform"))!=null?x:void 0}function E(g,v,w){const x=new MutationObserver(()=>{b(g,v,w)});return x.observe(g,{attributes:!0,attributeFilter:["x","y","transform","font-size"]}),b(g,v,w),x}return(g,v)=>{var w,x,y,p,m,S;return P(),A(q,null,[g.config.background&&g.config.background.visible?(P(),A("rect",oe({key:0,class:"v-ng-text-background"},s.value,{rx:((x=(w=g.config.background)==null?void 0:w.borderRadius)!=null?x:0)*O(o),ry:((p=(y=g.config.background)==null?void 0:y.borderRadius)!=null?p:0)*O(o),fill:(S=(m=g.config.background)==null?void 0:m.color)!=null?S:"#ffffff",transform:f.value}),null,16,lv)):ce("",!0),fr("text",oe({ref_key:"element",ref:c,class:"v-ng-text"},g.$attrs,{x:g.x,y:g.y,"dominant-baseline":g.dominantBaseline,"font-family":g.$attrs["font-family"]?`${g.$attrs["font-family"]}`:g.config.fontFamily,"font-size":i.value,fill:g.$attrs.fill?`${g.$attrs.fill}`:g.config.color}),[r.value.length<=1?(P(),A(q,{key:0},[na(lo(g.text),1)],64)):(P(!0),A(q,{key:1},Q(r.value,(M,I)=>(P(),A("tspan",{key:I,x:g.x,dy:I==0?u.value:a.value,"dominant-baseline":g.dominantBaseline},lo(M),9,cv))),128))],16,uv)],64)}}}),dv=U({__name:"VEdgeSummarized",props:{edges:{},layouts:{}},setup(t){const e=t,n=Wt(),{handleEdgesPointerDownEvent:o,handleEdgesPointerOverEvent:r,handleEdgesPointerOutEvent:i,handleEdgesClickEvent:a,handleEdgesDoubleClickEvent:u,handleEdgesContextMenu:c}=yt(),{edgeStates:f}=Ee(),h=j({p1:{x:0,y:0},p2:{x:0,y:0}}),s=j({x:0,y:0});he(()=>{const x=Object.keys(e.edges).find(y=>y in f);x&&(h.value=f[x].position,s.value={x:(h.value.p1.x+h.value.p2.x)/2,y:(h.value.p1.y+h.value.p2.y)/2})});const l=_(()=>Object.keys(e.edges)),d=_(()=>z.values(n.summarized.label,e.edges)),b=_(()=>z.values(n.summarized.shape,e.edges)),E=_(()=>z.values(n.summarized.stroke,e.edges)),g=_(()=>l.value.some(x=>f[x].hovered)),v=_(()=>l.value.some(x=>f[x].selectable)),w=_(()=>l.value.some(x=>f[x].selected));return(x,y)=>(P(),A("g",{class:fe({"v-ng-line-summarized":!0,hovered:g.value,selectable:v.value,selected:w.value}),onPointerdown:y[0]||(y[0]=ye(p=>O(o)(l.value,p),["stop"])),onPointerenterPassive:y[1]||(y[1]=p=>O(r)(l.value,p)),onPointerleavePassive:y[2]||(y[2]=p=>O(i)(l.value,p)),onClick:y[3]||(y[3]=ye(p=>O(a)(l.value,p),["stop"])),onDblclick:y[4]||(y[4]=ye(p=>O(u)(l.value,p),["stop"])),onContextmenu:y[5]||(y[5]=p=>O(c)(l.value,p))},[Re(Ai,oe(h.value,{config:E.value,"data-edge-id":l.value[0]}),null,16,["config","data-edge-id"]),Re(Ft,{"base-x":s.value.x,"base-y":s.value.y,config:b.value},null,8,["base-x","base-y","config"]),Re(Gt,{text:Object.keys(x.edges).length.toString(),x:s.value.x,y:s.value.y,config:d.value,"text-anchor":"middle","dominant-baseline":"central"},null,8,["text","x","y","config"])],34))}}),fv={class:"v-ng-edge-overlay"},ur=U({__name:"VEdgeOverlay",props:{edgeId:{default:void 0},edge:{default:void 0},edges:{default:()=>({})},state:{},isSummarized:{type:Boolean}},setup(t){const e=t,{svg:n}=Hn(),{scale:o}=ve(),r=Wt();function i(){return e.isSummarized?z.values(r.summarized.stroke,e.edges):e.state.line.stroke}function a(h){return{source:h.p1,target:h.p2}}function u(h){if(h.curve)return h.curve.center;{const s=h.origin.p1,l=h.origin.p2;return{x:(s.x+l.x)/2,y:(s.y+l.y)/2}}}function c(){var h;if(!n.value)return 0;const s=(h=e.edgeId)!=null?h:Object.keys(e.edges)[0],l=n.value.querySelector(`path[data-edge-id="${s}"]`);return l?l.getTotalLength():0}function f(h){var s;if(!n.value||!isFinite(h))return e.state.position.p1;e.state;const l=(s=e.edgeId)!=null?s:Object.keys(e.edges)[0],d=n.value.querySelector(`path[data-edge-id="${l}"]`);if(!d)return e.state.position.p1;const b=d.getPointAtLength(h);return{x:b.x,y:b.y}}return(h,s)=>(P(),A("g",fv,[h.isSummarized?K(h.$slots,"default",{key:0,edges:h.edges,isSummarized:h.isSummarized,stroke:i(),position:a(h.state.origin),center:u(h.state),hovered:h.state.hovered,selected:h.state.selected,scale:O(o),length:c(),pointAtLength:f}):K(h.$slots,"default",{key:1,edgeId:h.edgeId,edge:h.edge,edges:{[h.edgeId]:h.edge},isSummarized:h.isSummarized,stroke:i(),position:a(h.state.origin),center:u(h.state),hovered:h.state.hovered,selected:h.state.selected,scale:O(o),length:c(),pointAtLength:f})]))}}),hv=U({__name:"VEdgeGroups",props:{hasEdgeOverlaySlot:{type:Boolean}},setup(t){const{edgeStates:e,edgeZOrderedList:n,layouts:o}=Ee();return(r,i)=>(P(!0),A(q,null,Q(O(n),a=>(P(),A(q,null,[O(Tf)(a)?(P(),A(q,{key:0},[(P(),V(dv,{key:a.key,edges:a.group.edges,layouts:O(o).nodes},null,8,["edges","layouts"])),r.hasEdgeOverlaySlot?(P(),V(ur,{key:a.key,edges:a.group.edges,state:O(e)[Object.keys(a.group.edges)[0]],"is-summarized":!0},{default:ne(u=>[K(r.$slots,"default",oe({ref_for:!0},u))]),_:2},1032,["edges","state"])):ce("",!0)],64)):(P(),A(q,{key:1},[(P(),V(iv,{id:a.key,key:a.key,state:O(e)[a.key],"source-pos":O(o).nodes[a.edge.source],"target-pos":O(o).nodes[a.edge.target]},null,8,["id","state","source-pos","target-pos"])),r.hasEdgeOverlaySlot?(P(),V(ur,{key:a.key,"edge-id":a.key,edge:a.edge,state:O(e)[a.key],"is-summarized":!1},{default:ne(u=>[K(r.$slots,"default",oe({ref_for:!0},u))]),_:2},1032,["edge-id","edge","state"])):ce("",!0)],64))],64))),256))}}),vv={class:"v-ng-layer-edges v-ng-graph-objects"},pv=U({__name:"VEdgesLayer",setup(t){const e=It(),n=_(()=>"edge-overlay"in e);return(o,r)=>(P(),A("g",vv,[Re(Qh),Re(hv,{"has-edge-overlay-slot":n.value},Tn({_:2},[n.value?{name:"default",fn:ne(i=>[K(o.$slots,"edge-overlay",hn(vn(i)))]),key:"0"}:void 0]),1032,["has-edge-overlay-slot"])]))}}),gv=U({__name:"VEdgeLabelPlace",props:{edgeId:{},edge:{},state:{}},setup(t){const e=t,{scale:n}=ve(),o=_(()=>gi(e.state.labelPosition,e.state.line.stroke,e.state.label.margin,e.state.label.padding,n.value));return(r,i)=>r.state.loop?ce("",!0):K(r.$slots,"default",{key:0,edgeId:r.edgeId,edge:r.edge,config:r.state.label,area:o.value,hovered:r.state.hovered,selected:r.state.selected,scale:O(n)})}}),mv=U({__name:"VEdgeLabelsPlace",props:{edges:{},state:{},summarizeState:{}},setup(t){const e=t,{scale:n}=ve(),o=_(()=>{var r,i;return gi(e.state.labelPosition,(i=(r=e.summarizeState)==null?void 0:r.stroke)!=null?i:e.state.line.stroke,e.state.label.margin,e.state.label.padding,n.value)});return(r,i)=>r.state.loop?ce("",!0):K(r.$slots,"default",{key:0,edges:r.edges,config:r.state.label,area:o.value,hovered:r.state.hovered,selected:r.state.selected,scale:O(n)})}}),bv={class:"v-ng-edge-labels"},yv=U({__name:"VEdgeLabels",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(t){const{edgeStates:e,edgeGroupStates:n,summarizedEdgeStates:o}=Ee(),r=_(()=>{const a={},u={};return Object.entries(n.edgeGroups).forEach(([c,f])=>{Object.keys(f.edges).length>0&&(f.summarize?u[c]=f:a[c]=f)}),{individual:a,summarized:u}});function i(a){return Object.keys(a.edges)[0]}return(a,u)=>(P(),A("g",bv,[a.enableEdgeLabel?(P(!0),A(q,{key:0},Q(r.value.individual,(c,f)=>(P(),A(q,{key:f},[(P(!0),A(q,null,Q(c.edges,(h,s)=>(P(),V(gv,{key:s,"edge-id":s,edge:h,state:O(e)[s]},{default:ne(l=>[K(a.$slots,"edge-label",oe({ref_for:!0},l))]),_:2},1032,["edge-id","edge","state"]))),128))],64))),128)):ce("",!0),a.enableEdgesLabel?(P(!0),A(q,{key:1},Q(r.value.summarized,(c,f)=>(P(),V(mv,{key:f,edges:c.edges,state:O(e)[i(c)],"summarize-state":O(o)[i(c)]},{default:ne(h=>[K(a.$slots,"edges-label",oe({ref_for:!0},h))]),_:2},1032,["edges","state","summarize-state"]))),128)):ce("",!0)]))}}),wv=U({__name:"VEdgeLabelsLayer",props:{enableEdgeLabel:{type:Boolean,default:!1},enableEdgesLabel:{type:Boolean,default:!1}},setup(t){return(e,n)=>(P(),V(yv,{"enable-edge-label":e.enableEdgeLabel,"enable-edges-label":e.enableEdgesLabel,class:"v-ng-layer-edge-labels v-ng-graph-objects"},Tn({_:2},[e.enableEdgeLabel?{name:"edge-label",fn:ne(o=>[K(e.$slots,"edge-label",hn(vn(o)))]),key:"0"}:void 0,e.enableEdgesLabel?{name:"edges-label",fn:ne(o=>[K(e.$slots,"edges-label",hn(vn(o)))]),key:"1"}:void 0]),1032,["enable-edge-label","enable-edges-label"]))}}),xv=U({__name:"VNodeFocusRing",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=_(()=>{var a;return((a=e.pos)==null?void 0:a.x)||0}),o=_(()=>{var a;return((a=e.pos)==null?void 0:a.y)||0}),r=Ht(),i=Me({});return he(()=>{var a,u,c;const f=e.state.shape;if(f.type==="circle"){const h={type:"circle",radius:f.radius+((a=f.strokeWidth)!=null?a:0)/2+r.focusring.padding+r.focusring.width/2,color:"none",strokeWidth:r.focusring.width,strokeColor:r.focusring.color,strokeDasharray:r.focusring.dasharray};Object.assign(i,h)}else{const h={type:"rect",width:f.width+((u=f.strokeWidth)!=null?u:0)+r.focusring.padding*2+r.focusring.width,height:f.height+((c=f.strokeWidth)!=null?c:0)+r.focusring.padding*2+r.focusring.width,borderRadius:f.borderRadius>0?f.borderRadius+r.focusring.padding:0,color:"none",strokeWidth:r.focusring.width,strokeColor:r.focusring.color,strokeDasharray:r.focusring.dasharray};Object.assign(i,h)}}),(a,u)=>(P(),V(Ft,{class:"v-ng-node-focusring","base-x":n.value,"base-y":o.value,config:i},null,8,["base-x","base-y","config"]))}}),Ev={class:"v-ng-layer-nodes-selections"},Sv=U({__name:"VFocusringLayer",setup(t){const{nodeStates:e}=Ee(),{selectedNodes:n}=bh(),o=eo();return(r,i)=>(P(),A("g",Ev,[(P(!0),A(q,null,Q(O(n),a=>(P(),V(xv,{id:a,key:a,state:O(e)[a],pos:O(o).nodes[a]},null,8,["id","state","pos"]))),128))]))}}),kv=["transform"],cr=U({__name:"VNode",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=_(()=>{var s;return((s=e.pos)==null?void 0:s.x)||0}),o=_(()=>{var s;return((s=e.pos)==null?void 0:s.y)||0}),{scale:r}=ve(),{handleNodePointerDownEvent:i,handleNodePointerOverEvent:a,handleNodePointerOutEvent:u,handleNodeClickEvent:c,handleNodeDoubleClickEvent:f,handleNodeContextMenu:h}=yt();return(s,l)=>(P(),A("g",{class:fe({"v-ng-node":!0,hover:s.state.hovered,selected:s.state.selected}),transform:`translate(${n.value} ${o.value})`,onPointerdown:l[0]||(l[0]=ye(d=>O(i)(s.id,d),["stop"])),onPointerenterPassive:l[1]||(l[1]=d=>O(a)(s.id,d)),onPointerleavePassive:l[2]||(l[2]=d=>O(u)(s.id,d)),onClick:l[3]||(l[3]=ye(d=>O(c)(s.id,d),["stop"])),onDblclick:l[4]||(l[4]=ye(d=>O(f)(s.id,d),["stop"])),onContextmenu:l[5]||(l[5]=d=>O(h)(s.id,d))},[K(s.$slots,"override-node",{nodeId:s.id,scale:O(r),config:s.state.shape,class:fe({draggable:s.state.draggable,selectable:s.state.selectable})},()=>[Re(Ft,{config:s.state.shape,class:fe({"v-ng-node-default":!0,draggable:s.state.draggable,selectable:s.state.selectable})},null,8,["config","class"])])],42,kv))}}),Pv=U({__name:"VNodesLayer",setup(t){const e=It(),n=_(()=>"override-node"in e),{nodeZOrderedList:o}=Ee(),r=Ht(),i=eo();return(a,u)=>n.value?(P(),V(ct,{key:0,name:O(r).transition,css:!!O(r).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:ne(()=>[(P(!0),A(q,null,Q(O(o),c=>(P(),V(cr,{id:c.id,key:c.id,state:c,pos:O(i).nodes[c.id]},{"override-node":ne(f=>[K(a.$slots,"override-node",oe({ref_for:!0},f))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(P(),V(ct,{key:1,name:O(r).transition,css:!!O(r).transition,tag:"g",class:"v-ng-layer-nodes v-ng-graph-objects"},{default:ne(()=>[(P(!0),A(q,null,Q(O(o),c=>(P(),V(cr,{id:c.id,key:c.id,state:c,pos:O(i).nodes[c.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),Ii={[N.NORTH]:0,[N.NORTH_EAST]:1,[N.EAST]:2,[N.SOUTH_EAST]:3,[N.SOUTH]:4,[N.SOUTH_WEST]:5,[N.WEST]:6,[N.NORTH_WEST]:7,[N.CENTER]:-1},Mv=[(t,e)=>_e(t,0,e?90:60),(t,e)=>_e(t,45,e?90:45),(t,e)=>_e(t,90,e?60:30),(t,e)=>_e(t,135,e?90:45),(t,e)=>_e(t,180,e?90:60),(t,e)=>_e(t,225,e?90:45),(t,e)=>_e(t,270,e?60:30),(t,e)=>_e(t,315,e?90:45)];function Ov(t,e,n,o,r){if(r===N.CENTER)return N.CENTER;const i=[];Object.entries(n).forEach(([c,f])=>{let h=!1;if(f.nodeId===t){const l=o(c);l&&(h=!0,f=Dt(ae({},f),{pos:{x:l.x,y:l.y}}))}const s=(Xn(Wn(f.pos,e))+360+90)%360;i.push([s,h])});const a=Tv(r),u=[a,(a+4)%8,(a+2)%8,(a-2+8)%8,(a+1)%8,(a-1+8)%8,(a+3)%8,(a-3+8)%8].find(c=>i.every(f=>!Mv[c](...f)));return u===void 0?r:_v(u,r)}function _e(t,e,n){t%=360;const o=(e-n+360)%360,r=(e+n)%360;return o<=r?o<t&&t<r:o<t||t<r}function Tv(t){var e;return(e=Ii[t])!=null?e:0}function _v(t,e){var n,o;return(o=(n=Object.entries(Ii)[t])==null?void 0:n[0])!=null?o:e}const Cv=["transform"],dr=U({__name:"VNodeLabel",props:{id:{},state:{},pos:{default:void 0}},setup(t){const e=t,n=Ht(),{edgeStates:o}=Ee(),{scale:r}=ve(),{handleNodePointerDownEvent:i,handleNodePointerOverEvent:a,handleNodePointerOutEvent:u,handleNodeClickEvent:c,handleNodeDoubleClickEvent:f,handleNodeContextMenu:h}=yt(),s=_(()=>{var T;return((T=e.pos)==null?void 0:T.x)||0}),l=_(()=>{var T;return((T=e.pos)==null?void 0:T.y)||0}),d=_(()=>e.state.label.direction===N.CENTER?0:e.state.label.margin*r.value),b=j(0),E=j(0),g=j(0),v=j(0),w=_(()=>{var T;const C=e.state.label.direction,Z=e.state.label.directionAutoAdjustment;if(Z===!1)return C;const D={x:s.value,y:l.value};return Z===!0?Ov(e.state.id,D,e.state.oppositeNodes,X=>{var R,H;return(H=(R=o[X])==null?void 0:R.loop)==null?void 0:H.center},C):(T=Z({nodeId:e.state.id,pos:D,oppositeNodes:e.state.oppositeNodes}))!=null?T:C}),x=_(()=>{switch(w.value){case N.CENTER:case N.NORTH:case N.SOUTH:return"middle";case N.EAST:case N.NORTH_EAST:case N.SOUTH_EAST:return"start";case N.WEST:case N.NORTH_WEST:case N.SOUTH_WEST:default:return"end"}}),y=_(()=>{switch(w.value){case N.NORTH:case N.NORTH_EAST:case N.NORTH_WEST:return"text-top";case N.SOUTH:case N.SOUTH_EAST:case N.SOUTH_WEST:return"hanging";case N.CENTER:case N.EAST:case N.WEST:default:return"central"}}),p=_(()=>{switch(w.value){case N.CENTER:case N.NORTH:case N.SOUTH:return 0;case N.EAST:return E.value;case N.WEST:return-E.value;case N.NORTH_EAST:case N.SOUTH_EAST:return v.value;case N.NORTH_WEST:case N.SOUTH_WEST:default:return-v.value}}),m=_(()=>{switch(w.value){case N.NORTH:return-b.value;case N.SOUTH:return b.value;case N.CENTER:case N.EAST:case N.WEST:return 0;case N.NORTH_EAST:case N.NORTH_WEST:return-g.value;case N.SOUTH_EAST:case N.SOUTH_WEST:default:return g.value}});he(()=>{const T=r.value,C=e.state.shape;if(C.type=="circle"){const Z=C.radius*T,D=Z+d.value,X=Math.sqrt(ue(D,2)/2);b.value=Z+d.value,E.value=Z+d.value,g.value=X,v.value=X}else{const Z=C.borderRadius*T,D=C.width*T,X=C.height*T,R=Z+d.value,H=Math.sqrt(ue(R,2)/2);b.value=X/2+d.value,E.value=D/2+d.value,g.value=X/2-Z+H,v.value=D/2-Z+H}});const S=_(()=>T=>n.label.handleNodeEvents?{pointerdown:C=>{C.stopPropagation(),i(T,C)},pointerenter:C=>a(T,C),pointerleave:C=>u(T,C),click:C=>{C.stopPropagation(),c(T,C)},dblclick:C=>{C.stopPropagation(),f(T,C)},contextmenu:C=>{h(T,C)}}:{}),M=_(()=>{const T=n.label.handleNodeEvents;return{"v-ng-node-label":!0,hover:T&&e.state.hovered,selected:T&&e.state.selected}}),I=_(()=>{const T=n.label.handleNodeEvents;return{draggable:T&&e.state.draggable,selectable:T&&e.state.selectable}});return(T,C)=>(P(),A("g",oe({class:M.value,transform:`translate(${s.value} ${l.value})`},ra(S.value(T.id))),[K(T.$slots,"override-node-label",{nodeId:T.id,scale:O(r),text:T.state.labelText,x:p.value,y:m.value,config:T.state.label,shape:T.state.shape,textAnchor:x.value,dominantBaseline:y.value,class:fe(I.value)},()=>[Re(Gt,{text:T.state.labelText,x:0,y:0,config:T.state.label,"text-anchor":x.value,"dominant-baseline":y.value,class:fe(I.value),transform:`translate(${p.value} ${m.value})`},null,8,["text","config","text-anchor","dominant-baseline","class","transform"])])],16,Cv))}}),zv=U({__name:"VNodeLabelsLayer",setup(t){const e=It(),n=_(()=>"override-node-label"in e),{nodeZOrderedList:o}=Ee(),r=Ht(),i=eo(),a=_(()=>u(o.value));function u(c){return c.filter(f=>{var h;return f.label.visible&&((h=f.labelText)!=null?h:!1)})}return(c,f)=>n.value?(P(),V(ct,{key:0,name:O(r).transition,css:!!O(r).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:ne(()=>[(P(!0),A(q,null,Q(a.value,h=>(P(),V(dr,{id:h.id,key:h.id,state:h,pos:O(i).nodes[h.id]},{"override-node-label":ne(s=>[K(c.$slots,"override-node-label",oe({ref_for:!0},s))]),_:2},1032,["id","state","pos"]))),128))]),_:3},8,["name","css"])):(P(),V(ct,{key:1,name:O(r).transition,css:!!O(r).transition,tag:"g",class:"v-ng-layer-node-labels v-ng-graph-objects"},{default:ne(()=>[(P(!0),A(q,null,Q(a.value,h=>(P(),V(dr,{id:h.id,key:h.id,state:h,pos:O(i).nodes[h.id]},null,8,["id","state","pos"]))),128))]),_:1},8,["name","css"]))}}),Av=["d","stroke","stroke-width","stroke-dasharray","stroke-linecap","stroke-linejoin"],Iv=U({__name:"VPath",props:{path:{}},setup(t){const e=t,{nodeStates:n,edgeStates:o,layouts:r}=Ee(),{scale:i}=ve(),a=li();function u(l){if(l.edges.length===0)return[];const d=z.value(a.margin,l.path)*i.value;return gf(l,n,r.nodes,o,i.value,a.curveInNode,a.end,d)}function c(l){const d=u(l);let b=!0;return d.map(E=>{if(E===null)b=!0;else{if(typeof E=="string")return E;if(E instanceof Array){E=[...E];const g=[];if(E.length%2===1){const v=E[0];E=E.slice(1),g.push(`L ${v.x} ${v.y}`)}return Dn(E,2).map(([v,w])=>g.push(`Q ${v.x} ${v.y} ${w.x} ${w.y}`)),g.join(" ")}else{const g=b;return b=!1,`${g?"M ":"L "}${E.x} ${E.y}`}}}).join(" ")}const f=_(()=>{const l=e.path;return l.selected?z.values(a.selected,l.path):l.hovered&&a.hover?z.values(a.hover,l.path):z.values(a.normal,l.path)}),h=_(()=>bt(f.value.dasharray,i.value)),s=_(()=>{const l=f.value.animate?Rt(f.value.dasharray)*f.value.animationSpeed*i.value:!1;return l?{"--animation-speed":l}:void 0});return(l,d)=>(P(),A("path",{class:fe({"v-ng-path":!0,animate:f.value.animate,clickable:l.path.clickable,hoverable:l.path.hoverable}),d:c(l.path),fill:"none",stroke:f.value.color,"stroke-width":f.value.width*O(i),"stroke-dasharray":h.value,"stroke-linecap":f.value.linecap,"stroke-linejoin":f.value.linejoin,style:pt(s.value)},null,14,Av))}}),$v=U({__name:"VPaths",setup(t){const{pathZOrderedList:e}=Ee(),n=li(),{handlePathPointerDownEvent:o,handlePathPointerOverEvent:r,handlePathPointerOutEvent:i,handlePathClickEvent:a,handlePathDoubleClickEvent:u,handlePathContextMenu:c}=yt();return(f,h)=>(P(),V(ct,{name:O(n).transition,css:!!O(n).transition,tag:"g",class:"v-ng-paths v-ng-layer-paths v-ng-graph-objects"},{default:ne(()=>[(P(!0),A(q,null,Q(O(e),s=>(P(),V(Iv,{key:s.id,path:s,onPointerdown:l=>O(o)(s.id,l),onPointerenterPassive:l=>O(r)(s.id,l),onPointerleavePassive:l=>O(i)(s.id,l),onClick:ye(l=>O(a)(s.id,l),["stop"]),onDblclick:ye(l=>O(u)(s.id,l),["stop"]),onContextmenu:l=>O(c)(s.id,l)},null,8,["path","onPointerdown","onPointerenterPassive","onPointerleavePassive","onClick","onDblclick","onContextmenu"]))),128))]),_:1},8,["name","css"]))}}),Lv=U({__name:"VPathsLayer",setup(t){return(e,n)=>(P(),V($v))}}),Nv={key:0},Zv=U({__name:"VNetworkGraph",props:{nodes:{default:()=>({})},edges:{default:()=>({})},paths:{default:()=>({})},layouts:{default:()=>({})},zoomLevel:{default:1},selectedNodes:{default:()=>[]},selectedEdges:{default:()=>[]},selectedPaths:{default:()=>[]},configs:{default:()=>({})},layers:{default:()=>({})},eventHandlers:{default:()=>({})}},emits:["update:zoomLevel","update:selectedNodes","update:selectedEdges","update:selectedPaths","update:layouts"],setup(t,{expose:e,emit:n}){const o=["override-node","override-node-label","edge-overlay","edge-label","edges-label"],r=t,i=n,a=It(),u=Pe(r,"nodes"),c=Pe(r,"edges"),{objects:f,isInCompatibilityModeForPath:h}=ph(Pe(r,"paths")),s=Qf();Object.entries(r.eventHandlers).forEach(([k,L])=>{s.on(k,L)});const l=Xd(Pe(r,"configs")),d=_(()=>{const k=new Set(Object.keys(a));o.forEach($=>k.delete($));const L=Object.fromEntries(Vd.map($=>[$,[]]));return Object.assign(L,Object.entries(r.layers).reduce(($,[B,re])=>(k.delete(B),re in $?$[re].push(B):$[re]=[B],$),{})),L.root.push(...k),L}),b=_(()=>l.view.grid.visible),E=_(()=>{const k=d.value;return b.value||k.background.length>0||k.grid.length>0}),g=Eh(l,a),v=j(),w=j(),x=j(),y=j(0),p=_(()=>y.value!==0),m=gh(r,"zoomLevel",i,k=>(k=Math.max(k,l.view.minZoomLevel),k=Math.min(k,l.view.maxZoomLevel),k)),{svgPanZoom:S,onSvgPanZoomMounted:M,onSvgPanZoomUnmounted:I}=dh(w,{viewportSelector:".v-ng-viewport",minZoom:l.view.minZoomLevel,maxZoom:l.view.maxZoomLevel,dblClickZoomEnabled:ao(l.view),mouseWheelZoomEnabled:Kt(l.view),fit:l.view.autoPanAndZoomOnLoad==="fit-content",center:l.view.autoPanAndZoomOnLoad!==!1,zoomEnabled:l.view.zoomEnabled,preventMouseEventsDefault:!1,onZoom:k=>{var L,$;if(y.value===2)return;const B=($=(L=S.value)==null?void 0:L.getRealZoom())!=null?$:1;Math.abs(m.value-B)>=1e-6&&(m.value=B,s.emit("view:zoom",B))},panEnabled:l.view.panEnabled,onPan:k=>{y.value!==2&&s.emit("view:pan",k)}});Ud({container:v,svg:w,viewport:x,svgPanZoom:S});const T={width:0,height:0},C=globalThis.ResizeObserver?new ResizeObserver(()=>{var k,L,$;if((k=S.value)==null||k.resize(),!l.view.autoPanOnResize)return;const B=(L=v.value)==null?void 0:L.getBoundingClientRect();if(B){const re=-(T.width-B.width)/2,nt=-(T.height-B.height)/2;($=S.value)==null||$.panBy({x:re,y:nt});const{width:ke,height:Yt}=B;(T.width!==ke||T.height!==Yt)&&(Object.assign(T,{width:ke,height:Yt}),s.emit("view:resize",{x:B.x,y:B.y,width:ke,height:Yt}))}}):void 0;M(()=>{var k,L,$;const B=G(v.value,"svg-pan-zoom container");C?.observe(B),(L=(k=l.view).onSvgPanZoomInitialized)==null||L.call(k,G(S.value,"svg-pan-zoom instance"));const re=B.getBoundingClientRect(),{width:nt,height:ke}=re;Object.assign(T,{width:nt,height:ke}),($=x.value)==null||$.addEventListener("touchstart",so,{passive:!1})}),I(()=>{var k;C?.disconnect(),(k=x.value)==null||k.removeEventListener("touchstart",so)});const Z=k=>{var L;(L=S.value)==null||L.applyAbsoluteZoomLevel(k,l.view.minZoomLevel,l.view.maxZoomLevel)};F(()=>l.view.panEnabled,k=>{var L;(L=S.value)==null||L.setPanEnabled(k)}),F(()=>[l.view.zoomEnabled,ao(l.view),Kt(l.view)],()=>{const k=S.value;k&&ea(k,l.view.zoomEnabled,l.view.doubleClickZoomEnabled,l.view.mouseWheelZoomEnabled)}),F(m,k=>Z(k)),F(()=>[l.view.minZoomLevel,l.view.maxZoomLevel],k=>{Z(m.value)});const{scale:D}=fh(m,l.view);M(()=>{const k=r.zoomLevel;Z(k)});const X=()=>we(this,null,function*(){var k;Object.keys(r.nodes).length>0&&((k=S.value)==null||k.updateBBox(),yield lr())}),R=k=>we(this,null,function*(){var L,$;const B=!k||k.margin===void 0?l.view.fitContentMargin:k.margin;yield X();const re=G(w.value).getBoundingClientRect(),nt=_h(B,re),ke=Ch(G(x.value),re,Se.nodes,m.value,nt,l.view.scalingObjects);ke?(Z(ke.zoom),(L=S.value)==null||L.pan(ke.pos)):($=S.value)==null||$.center(),s.emit("view:fit",void 0)}),H=()=>we(this,null,function*(){var k;yield X(),(k=S.value)==null||k.center()}),ie=()=>{var k,L;return(L=(k=S.value)==null?void 0:k.getViewBox())!=null?L:{top:0,bottom:0,left:0,right:0}},te=k=>{var L;return(L=S.value)==null?void 0:L.setViewBox(k)},se=fn(r,"selectedNodes",u,i);F(se,k=>s.emit("node:select",Array.from(k)));const je=fn(r,"selectedEdges",c,i);F(je,k=>s.emit("edge:select",Array.from(k)));const le=fn(r,"selectedPaths",f,i);F(le,k=>s.emit("path:select",Array.from(k))),mh(se,je,le);const Ue=ze(new Set),Fe=ze(new Set),to=ze(new Set),Se=ze({nodes:{}});yh(Se),F(()=>r.layouts,()=>{var k;return Object.assign(Se.nodes,(k=r.layouts.nodes)!=null?k:{})},{deep:!0,immediate:!0}),F(Se,()=>i("update:layouts",Se),{deep:!0});const qt=Ef(),Xt=j(!1);s.on("node:dragstart",k=>Xt.value=!0),s.on("node:dragend",k=>Xt.value=!1),s.on("view:mode",k=>{var L,$,B,re;l.view.panEnabled&&(k==="default"?(L=S.value)==null||L.enablePan():($=S.value)==null||$.disablePan()),l.view.zoomEnabled&&(k==="default"?(B=S.value)==null||B.enableZoom():(re=S.value)==null||re.disableZoom())});const $i=_(()=>l.view.panEnabled||l.view.zoomEnabled||l.node.draggable),{nodeStates:Li,edgeStates:Ni,pathStates:Zi}=Of(rn(u,se,Ue),rn(c,je,Fe),rn(f,le,to),ot(l),Se,r.layouts,qt,D),ji=_(()=>Kt(l.view)),{isBoxSelectionMode:Di,selectionBox:no,startBoxSelection:Ri,stopBoxSelection:Bi}=Yf(w,ot(Se),ot(m),Li,Ni,Zi,se,je,le,Ue,Fe,to,h,ji,l,s),oo=()=>({layouts:ze(Se.nodes),nodePositions:Pe(Se,"nodes"),nodes:u,edges:c,configs:ot(l),scale:ot(D),emitter:s,svgPanZoom:G(S.value)});F(()=>l.view.layoutHandler,(k,L)=>{L.deactivate(),k.activate(oo())});const{transitionWhile:Hi,transitionOption:ro}=vh(),Wi=_(()=>{const k=ro.value;return k.enabled?{"--transition-duration":k.duration+"ms","--transition-function":k.timingFunction}:{}});M(()=>we(this,null,function*(){if(l.view.onBeforeInitialDisplay){const $=l.view.onBeforeInitialDisplay();Qd($)&&(yield $)}const k=G(S.value,"svg-pan-zoom");l.view.layoutHandler.activate(oo()),yield lr();const L=l.view.autoPanAndZoomOnLoad;if(l.view.fit||L!==!1){const $=Object.keys(r.nodes).length==0,B=k.getPan();if($||L==="center-zero"){yield X();const re=k.getSizes();k.pan({x:re.width/2,y:re.height/2})}else L==="fit-content"||l.view.fit?yield R():L==="center-content"?yield H():yield X();On(()=>{const re=k.getPan();B.x===re.x&&B.y===re.y&&s.emit("view:pan",re)})}else yield X();s.emit("view:load"),y.value=1})),I(()=>{y.value=2,s.emit("view:unload"),l.view.layoutHandler.deactivate()});function Vi(){var k;(k=S.value)==null||k.zoomIn()}function Ui(){var k;(k=S.value)==null||k.zoomOut()}function Fi(k){var L;(L=S.value)==null||L.pan(k)}function Gi(k){var L;(L=S.value)==null||L.panBy(k)}function qi(){return G(S.value).getPan()}function Xi(){const k=G(S.value).getSizes();return{width:k.width,height:k.height,viewBox:k.viewBox}}function Ki(k){return Mn(G(w.value,"svg"),G(x.value,"viewport"),k)}function Yi(k){return Vf(G(w.value,"svg"),G(x.value,"viewport"),k)}function Ji(){return Ei(G(w.value,"svg"),G(x.value,"viewport"),D.value).outerHTML}function Qi(){return we(this,arguments,function*(k={}){return(yield io(k)).outerHTML})}function io(){return we(this,arguments,function*(k={}){return Ff(G(w.value,"svg"),G(x.value,"viewport"),D.value,k)})}e({fitToContents:R,panToCenter:H,getViewBox:ie,setViewBox:te,transitionWhile:Hi,startBoxSelection:Ri,stopBoxSelection:Bi,zoomIn:Vi,zoomOut:Ui,panTo:Fi,panBy:Gi,getPan:qi,getSizes:Xi,translateFromDomToSvgCoordinates:Ki,translateFromSvgToDomCoordinates:Yi,getAsSvg:Ji,exportAsSvgText:Qi,exportAsSvgElement:io});function ea(k,L,$,B){k.setZoomEnabled(L),L&&$?k.enableDblClickZoom():k.disableDblClickZoom(),L&&B?k.enableMouseWheelZoom():k.disableMouseWheelZoom()}function ao(k){return k.zoomEnabled&&k.doubleClickZoomEnabled}function Kt(k){return k.zoomEnabled&&k.mouseWheelZoomEnabled}function so(k){k.stopPropagation()}return(k,L)=>(P(),A("div",{ref_key:"container",ref:v,class:"v-network-graph v-ng-container"},[(P(),A("svg",{ref_key:"svg",ref:w,class:fe(["v-ng-canvas",{show:p.value,dragging:Xt.value,touches:$i.value,"box-selection-mode":O(Di)}]),width:"100%",height:"100%"},[(P(!0),A(q,null,Q(d.value.root,$=>K(k.$slots,$,{key:$,scale:O(D)})),128)),Object.keys(O(qt).markers).length>0?(P(),A("defs",Nv,[(P(!0),A(q,null,Q(O(qt).markers,($,B)=>(P(),V(Wh,{id:B,key:B,marker:$,scale:O(D)},null,8,["id","marker","scale"]))),128))])):ce("",!0),E.value?(P(),V(Kh,{key:1},{default:ne(()=>[(P(!0),A(q,null,Q(d.value.background,$=>(P(),A("g",{key:$,class:"v-ng-layer"},[K(k.$slots,$,{scale:O(D)})]))),128)),b.value?(P(),V(Xh,{key:0})):ce("",!0),(P(!0),A(q,null,Q(d.value.grid,$=>(P(),A("g",{key:$,class:"v-ng-layer"},[K(k.$slots,$,{scale:O(D)})]))),128))]),_:3})):ce("",!0),fr("g",{ref_key:"viewport",ref:x,class:fe(["v-ng-viewport",{"v-ng-transition":O(ro).enabled}]),style:pt(Wi.value)},[(P(!0),A(q,null,Q(d.value.base,$=>(P(),A("g",{key:$,class:"v-ng-layer"},[K(k.$slots,$,{scale:O(D)})]))),128)),(P(!0),A(q,null,Q(O(g),$=>(P(),A(q,{key:$},[$==="edges"?(P(),V(pv,{key:0},Tn({_:2},["edge-overlay"in a?{name:"edge-overlay",fn:ne(B=>[K(k.$slots,"edge-overlay",oe({ref_for:!0},B))]),key:"0"}:void 0]),1024)):$==="edge-labels"?(P(),V(wv,{key:1,"enable-edge-label":"edge-label"in a,"enable-edges-label":"edges-label"in a},{"edge-label":ne(B=>[K(k.$slots,"edge-label",oe({ref_for:!0},B))]),"edges-label":ne(B=>[K(k.$slots,"edges-label",oe({ref_for:!0},B))]),_:3},8,["enable-edge-label","enable-edges-label"])):$==="focusring"?(P(),V(Sv,{key:2})):$==="nodes"?(P(),V(Pv,{key:3},{"override-node":ne(B=>[K(k.$slots,"override-node",oe({ref_for:!0},B))]),_:3})):$==="node-labels"?(P(),V(zv,{key:4},{"override-node-label":ne(B=>[K(k.$slots,"override-node-label",oe({ref_for:!0},B))]),_:3})):$==="paths"?(P(),V(Lv,{key:5})):ce("",!0),(P(!0),A(q,null,Q(d.value[$],B=>(P(),A("g",{key:B,class:"v-ng-layer"},[K(k.$slots,B,{scale:O(D)})]))),128))],64))),128))],6),O(no)?(P(),V(Lh,{key:2,box:O(no),config:O(l).view.selection.box},null,8,["box","config"])):ce("",!0)],2))],512))}}),jv=(t,e)=>{const n=t.__vccOpts||t;for(const[o,r]of e)n[o]=r;return n},Dv={};function Rv(t,e){return P(),A("defs",null,[(P(),V(hr("style"),null,{default:ne(()=>[K(t.$slots,"default")]),_:3}))])}const Bv=jv(Dv,[["render",Rv]]),Hv=U({__name:"VEdgeLabel",props:{area:{},config:{},text:{default:""},align:{default:"center"},verticalAlign:{default:"center"},edge:{default:void 0},hovered:{type:Boolean,default:void 0},selected:{type:Boolean,default:void 0},scale:{default:void 0}},setup(t){const e=t,n=j(0),o=j(0),r=j("middle"),i=j("central"),a=j(0);he(()=>{const c=e.area.source,f=e.area.target;e.align==="source"?(c.above.x==f.above.x?r.value=c.above.y>f.above.y?"start":"end":r.value=c.above.x<f.above.x?"start":"end",e.verticalAlign==="above"?(n.value=c.above.x,o.value=c.above.y,i.value="text-top"):e.verticalAlign==="below"?(n.value=c.below.x,o.value=c.below.y,i.value="hanging"):(n.value=(c.above.x+c.below.x)/2,o.value=(c.above.y+c.below.y)/2,i.value="central")):e.align==="target"?(c.above.x==f.above.x?r.value=c.above.y<f.above.y?"start":"end":r.value=c.above.x>f.above.x?"start":"end",e.verticalAlign==="above"?(n.value=f.above.x,o.value=f.above.y,i.value="text-top"):e.verticalAlign==="below"?(n.value=f.below.x,o.value=f.below.y,i.value="hanging"):(n.value=(f.above.x+f.below.x)/2,o.value=(f.above.y+f.below.y)/2,i.value="central")):(r.value="middle",e.verticalAlign==="above"?(n.value=(c.above.x+f.above.x)/2,o.value=(c.above.y+f.above.y)/2,i.value="text-top"):e.verticalAlign==="below"?(n.value=(c.below.x+f.below.x)/2,o.value=(c.below.y+f.below.y)/2,i.value="hanging"):(n.value=(c.above.x+f.below.x)/2,o.value=(c.above.y+f.below.y)/2,i.value="central"));let h=J.fromPositions(c.above,f.above).v.angleDegree();(h<-90||h>=90)&&(h=h+180,h>180&&(h-=360)),a.value=h});const u=_(()=>i.value==="central"&&!e.config.background?Dt(ae({},e.config),{background:{visible:!0,color:"#ffffff",padding:{vertical:1,horizontal:4},borderRadius:2}}):e.config);return(c,f)=>(P(),V(Gt,{class:"v-ng-edge-label",text:c.text,x:n.value,y:o.value,config:u.value,"text-anchor":r.value,"dominant-baseline":i.value,transform:`rotate(${a.value} ${n.value} ${o.value})`},null,8,["text","x","y","config","text-anchor","dominant-baseline","transform"]))}}),Wv=Object.freeze(Object.defineProperty({__proto__:null,VEdgeLabel:Hv,VLabelText:Gt,VNetworkGraph:Zv,VShape:Ft,VStyle:Bv},Symbol.toStringTag,{value:"Module"})),Vv=10;class Yv extends ai{constructor(e={}){super(),this.options=e}setNodePosition(e,n){const o=this.options.grid||Vv;e.value.x=Math.floor(n.x/o)*o,e.value.y=Math.floor(n.y/o)*o}}const Jv=function(t){Object.entries(Wv).forEach(([e,n])=>{t.component(e,n)})};export{ai as A,Yv as K,Kv as X,Jv as Y,Gv as a,Nl as g,qv as k,Ad as m,Xv as t,Fv as u};
